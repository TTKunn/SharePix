# Knot å›¾ç‰‡åˆ†äº«ç³»ç»Ÿ API æ–‡æ¡£

**é¡¹ç›®åç§°**: Knot - Image Sharing Service
**ç‰ˆæœ¬**: v2.10.0 (åº”ç”¨å†…åˆ†äº«åŠŸèƒ½)
**æ›´æ–°æ—¶é—´**: 2025-10-22
**åŸºç¡€URL**: `http://localhost:8080/api/v1`/`http://43.142.157.145:8080/api/v1`
**éƒ¨ç½²æœåŠ¡å™¨ip**ï¼š43.142.157.145

---

## ğŸ“‹ ç›®å½•

1. [è®¤è¯ç›¸å…³API](#è®¤è¯ç›¸å…³api)
   - [ç”¨æˆ·æ³¨å†Œ](#1-ç”¨æˆ·æ³¨å†Œ)
   - [ç”¨æˆ·ç™»å½•](#2-ç”¨æˆ·ç™»å½•)
   - [ä»¤ç‰ŒéªŒè¯](#3-ä»¤ç‰ŒéªŒè¯)
   - [ä»¤ç‰Œåˆ·æ–°](#4-ä»¤ç‰Œåˆ·æ–°)
   - [ç”¨æˆ·ç™»å‡º](#5-ç”¨æˆ·ç™»å‡º)
   - [ä¿®æ”¹å¯†ç ](#6-ä¿®æ”¹å¯†ç )
   - [è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯](#7-è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯) **v2.1.0**
   - [æ›´æ–°ç”¨æˆ·ä¿¡æ¯](#8-æ›´æ–°ç”¨æˆ·ä¿¡æ¯) **v2.1.0**
   - [è·å–ç”¨æˆ·å…¬å¼€ä¿¡æ¯](#9-è·å–ç”¨æˆ·å…¬å¼€ä¿¡æ¯) **v2.1.0**
   - [æ£€æŸ¥ç”¨æˆ·åå¯ç”¨æ€§](#10-æ£€æŸ¥ç”¨æˆ·åå¯ç”¨æ€§) **v2.1.0**
   - [ä¸Šä¼ ç”¨æˆ·å¤´åƒ](#11-ä¸Šä¼ ç”¨æˆ·å¤´åƒ) **v2.6.0**

2. [å¸–å­ç®¡ç†API](#å¸–å­ç®¡ç†api) **v2.0.0**
   - [åˆ›å»ºå¸–å­](#1-åˆ›å»ºå¸–å­)
   - [è·å–å¸–å­è¯¦æƒ…](#2-è·å–å¸–å­è¯¦æƒ…) **v2.5.1ä¼˜åŒ–**
   - [æ›´æ–°å¸–å­](#3-æ›´æ–°å¸–å­)
   - [åˆ é™¤å¸–å­](#4-åˆ é™¤å¸–å­)
   - [è·å–Feedæµ](#5-è·å–feedæµ) **v2.5.0ä¼˜åŒ–**
   - [è·å–ç”¨æˆ·å¸–å­åˆ—è¡¨](#6-è·å–ç”¨æˆ·å¸–å­åˆ—è¡¨) **v2.5.0ä¼˜åŒ–**
   - [æ·»åŠ å›¾ç‰‡åˆ°å¸–å­](#7-æ·»åŠ å›¾ç‰‡åˆ°å¸–å­)
   - [ä»å¸–å­åˆ é™¤å›¾ç‰‡](#8-ä»å¸–å­åˆ é™¤å›¾ç‰‡)
   - [è°ƒæ•´å›¾ç‰‡é¡ºåº](#9-è°ƒæ•´å›¾ç‰‡é¡ºåº)

3. [ç‚¹èµç›¸å…³API](#ç‚¹èµç›¸å…³api) **v2.2.0**
   - [ç‚¹èµå¸–å­](#1-ç‚¹èµå¸–å­)
   - [å–æ¶ˆç‚¹èµ](#2-å–æ¶ˆç‚¹èµ)
   - [æŸ¥è¯¢ç‚¹èµçŠ¶æ€](#3-æŸ¥è¯¢ç‚¹èµçŠ¶æ€)

4. [æ”¶è—ç›¸å…³API](#æ”¶è—ç›¸å…³api) **v2.2.0**
   - [æ”¶è—å¸–å­](#1-æ”¶è—å¸–å­)
   - [å–æ¶ˆæ”¶è—](#2-å–æ¶ˆæ”¶è—)
   - [æŸ¥è¯¢æ”¶è—çŠ¶æ€](#3-æŸ¥è¯¢æ”¶è—çŠ¶æ€)
   - [è·å–ç”¨æˆ·æ”¶è—åˆ—è¡¨](#4-è·å–ç”¨æˆ·æ”¶è—åˆ—è¡¨) **v2.7.0ä¼˜åŒ–**

5. [å…³æ³¨ç›¸å…³API](#å…³æ³¨ç›¸å…³api) **v2.2.0**
   - [å…³æ³¨ç”¨æˆ·](#1-å…³æ³¨ç”¨æˆ·)
   - [å–æ¶ˆå…³æ³¨](#2-å–æ¶ˆå…³æ³¨)
   - [æŸ¥è¯¢å…³æ³¨çŠ¶æ€](#3-æŸ¥è¯¢å…³æ³¨çŠ¶æ€)
   - [è·å–å…³æ³¨åˆ—è¡¨](#4-è·å–å…³æ³¨åˆ—è¡¨)
   - [è·å–ç²‰ä¸åˆ—è¡¨](#5-è·å–ç²‰ä¸åˆ—è¡¨)
   - [è·å–ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯](#6-è·å–ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯)
   - [æ‰¹é‡æ£€æŸ¥å…³æ³¨çŠ¶æ€](#7-æ‰¹é‡æ£€æŸ¥å…³æ³¨çŠ¶æ€)

6. [åº”ç”¨å†…åˆ†äº«API](#åº”ç”¨å†…åˆ†äº«api) **v2.10.0**
   - [åˆ›å»ºåº”ç”¨å†…åˆ†äº«](#1-åˆ›å»ºåº”ç”¨å†…åˆ†äº«)
   - [è·å–æ”¶åˆ°çš„åˆ†äº«åˆ—è¡¨](#2-è·å–æ”¶åˆ°çš„åˆ†äº«åˆ—è¡¨)
   - [è·å–å‘å‡ºçš„åˆ†äº«åˆ—è¡¨](#3-è·å–å‘å‡ºçš„åˆ†äº«åˆ—è¡¨)
   - [åˆ é™¤åˆ†äº«è®°å½•](#4-åˆ é™¤åˆ†äº«è®°å½•)

7. [è¯„è®ºç›¸å…³API](#è¯„è®ºç›¸å…³api) **v2.8.0**
   - [åˆ›å»ºè¯„è®º](#1-åˆ›å»ºè¯„è®º)
   - [è·å–è¯„è®ºåˆ—è¡¨](#2-è·å–è¯„è®ºåˆ—è¡¨)
   - [åˆ é™¤è¯„è®º](#3-åˆ é™¤è¯„è®º)

8. [å›¾ç‰‡ç®¡ç†API](#å›¾ç‰‡ç®¡ç†api) **âš ï¸ éƒ¨åˆ†å·²åºŸå¼ƒ**
   - [ä¸Šä¼ å›¾ç‰‡](#1-ä¸Šä¼ å›¾ç‰‡) âœ… å¯ç”¨ï¼ˆå†…éƒ¨è°ƒç”¨Post APIï¼‰
   - [è·å–æœ€æ–°å›¾ç‰‡åˆ—è¡¨](#2-è·å–æœ€æ–°å›¾ç‰‡åˆ—è¡¨) âœ… å¯ç”¨
   - [è·å–å›¾ç‰‡è¯¦æƒ…](#3-è·å–å›¾ç‰‡è¯¦æƒ…) âœ… å¯ç”¨
   - [æ›´æ–°å›¾æ–‡é…æ–‡](#4-æ›´æ–°å›¾æ–‡é…æ–‡) âŒ å·²åºŸå¼ƒï¼ˆä½¿ç”¨Post APIï¼‰
   - [åˆ é™¤å›¾ç‰‡](#5-åˆ é™¤å›¾ç‰‡) âœ… å¯ç”¨
   - [è·å–ç”¨æˆ·å›¾ç‰‡åˆ—è¡¨](#6-è·å–ç”¨æˆ·å›¾ç‰‡åˆ—è¡¨) âœ… å¯ç”¨

9. [ç³»ç»Ÿç›¸å…³API](#ç³»ç»Ÿç›¸å…³api)
   - [å¥åº·æ£€æŸ¥](#1-å¥åº·æ£€æŸ¥)
   - [ç³»ç»ŸæŒ‡æ ‡](#2-ç³»ç»ŸæŒ‡æ ‡)
   - [ç‰ˆæœ¬ä¿¡æ¯](#3-ç‰ˆæœ¬ä¿¡æ¯)

---

## ğŸ”” æœ€æ–°ç‰ˆæœ¬æ›´æ–°

### ğŸš€ v2.10.0 åº”ç”¨å†…åˆ†äº«åŠŸèƒ½ï¼ˆ2025-10-22ï¼‰

**æ ¸å¿ƒåŠŸèƒ½**ï¼šç”¨æˆ·å¯å°†å¸–å­åˆ†äº«ç»™äº’å…³å¥½å‹ï¼Œæ”¯æŒåˆ†äº«åˆ—è¡¨æŸ¥çœ‹å’Œç®¡ç†
- âœ… **åˆ›å»ºåˆ†äº«** - POST /api/v1/shares/posts - åˆ†äº«å¸–å­ç»™äº’å…³ç”¨æˆ·
- âœ… **æŸ¥çœ‹æ”¶åˆ°çš„åˆ†äº«** - GET /api/v1/shares/received - è·å–æ”¶åˆ°çš„åˆ†äº«åˆ—è¡¨
- âœ… **æŸ¥çœ‹å‘å‡ºçš„åˆ†äº«** - GET /api/v1/shares/sent - è·å–å‘å‡ºçš„åˆ†äº«åˆ—è¡¨
- âœ… **åˆ é™¤åˆ†äº«** - DELETE /api/v1/shares/:id - åˆ é™¤è‡ªå·±çš„åˆ†äº«è®°å½•

**æŠ€æœ¯äº®ç‚¹**ï¼š
- æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–ï¼š3æ¬¡æŸ¥è¯¢å®Œæˆ(åˆ†äº«+å¸–å­+ç”¨æˆ·)ï¼Œæ€§èƒ½æå‡95%
- äº’å…³éªŒè¯ï¼šåªèƒ½åˆ†äº«ç»™äº’ç›¸å…³æ³¨çš„ç”¨æˆ·
- é˜²é‡å¤æœºåˆ¶ï¼šæ•°æ®åº“å”¯ä¸€çº¦æŸé˜²æ­¢é‡å¤åˆ†äº«
- æƒé™æ§åˆ¶ï¼šåªèƒ½åˆ é™¤è‡ªå·±å‘å‡ºçš„åˆ†äº«
- æ•°æ®ä¸€è‡´æ€§ï¼šæ— å†—ä½™å­—æ®µï¼Œå®æ—¶æŸ¥è¯¢ä¿è¯æ•°æ®æœ€æ–°

**æ€§èƒ½æŒ‡æ ‡**ï¼š
- æŸ¥è¯¢æ¬¡æ•°ï¼š3æ¬¡ï¼ˆåˆ†äº«è®°å½•+æ‰¹é‡æŸ¥è¯¢å¸–å­+æ‰¹é‡æŸ¥è¯¢ç”¨æˆ·ï¼‰
- å“åº”æ—¶é—´ï¼š~80ms (P99)
- æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–ï¼šç›¸æ¯”N+1æŸ¥è¯¢èŠ‚çœ40-95%æŸ¥è¯¢æ¬¡æ•°

**æµ‹è¯•è¦†ç›–**ï¼š
- âœ… åˆ›å»ºåˆ†äº« - æˆåŠŸåˆ›å»ºå¹¶éªŒè¯äº’å…³
- âœ… æŸ¥çœ‹åˆ†äº«åˆ—è¡¨ - è¿”å›å®Œæ•´å¸–å­å’Œç”¨æˆ·ä¿¡æ¯
- âœ… é‡å¤åˆ†äº«é˜²æŠ¤ - æ­£ç¡®æ‹’ç»
- âœ… æ¶ˆæ¯é•¿åº¦é™åˆ¶ - æœ€å¤š500å­—ç¬¦
- âœ… åˆ é™¤åˆ†äº« - æƒé™éªŒè¯æ­£å¸¸
- âœ… æ•°æ®ä¸€è‡´æ€§ - åˆ é™¤ååˆ—è¡¨æ­£ç¡®æ›´æ–°

---

### ğŸš€ v2.9.0 ç”¨æˆ·åä¿®æ”¹åŠŸèƒ½ï¼ˆ2025-10-22ï¼‰

**æ ¸å¿ƒåŠŸèƒ½**ï¼šç”¨æˆ·ä¿¡æ¯ä¿®æ”¹æ¥å£æ”¯æŒusernameå­—æ®µï¼Œæ™ºèƒ½é‡å¤æ£€æµ‹æœºåˆ¶
- âœ… **usernameå‚æ•°** - PUT /api/v1/users/profile æ–°å¢usernameå‚æ•°æ”¯æŒ
- âœ… **æ ¼å¼éªŒè¯** - 3-50å­—ç¬¦ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿
- âœ… **æ™ºèƒ½æ£€æµ‹** - usernameæœªå˜åŒ–æ—¶è·³è¿‡é‡å¤æ£€æµ‹ï¼Œé¿å…è¯¯æŠ¥
- âœ… **å”¯ä¸€æ€§æ£€æŸ¥** - è‡ªåŠ¨æ£€æµ‹æ˜¯å¦ä¸å…¶ä»–ç”¨æˆ·å†²çª

**æŠ€æœ¯äº®ç‚¹**ï¼š
- å®Œå…¨å¤ç”¨phone/emailçš„æ™ºèƒ½æ£€æµ‹é€»è¾‘ï¼Œé›¶ä»£ç é‡å¤
- æ€§èƒ½ä¼˜åŒ–ï¼šusernameæœªå˜åŒ–æ—¶ä»…éœ€O(1)å­—ç¬¦ä¸²æ¯”è¾ƒ
- ä¸ç°æœ‰ä»£ç æ¨¡å¼100%ä¸€è‡´

**æµ‹è¯•è¦†ç›–**ï¼š
- âœ… ä¿®æ”¹ä¸ºæ–°username - æˆåŠŸ
- âœ… ä¿®æ”¹ä¸ºè‡ªå·±å½“å‰çš„username - æ™ºèƒ½è·³è¿‡æ£€æµ‹
- âœ… æ ¼å¼éªŒè¯ï¼ˆè¿‡çŸ­ã€åŒ…å«éæ³•å­—ç¬¦ï¼‰ - æ­£ç¡®æ‹’ç»
- âœ… é‡å¤æ£€æµ‹ï¼ˆå·²å­˜åœ¨çš„usernameï¼‰ - æ­£ç¡®æ‹’ç»
- âœ… ç»„åˆä¿®æ”¹å¤šä¸ªå­—æ®µ - å…¨éƒ¨æˆåŠŸ

**è¯¦ç»†æ–‡æ¡£**: `project_document/[171]ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹æ¥å£usernameæ˜µç§°åŠŸèƒ½å®Œå–„æ–¹æ¡ˆ.md`

---

### ğŸš€ v2.8.0 è¯„è®ºåŠŸèƒ½ï¼ˆ2025-10-19ï¼‰

**æ ¸å¿ƒåŠŸèƒ½**ï¼šå®Œæ•´å®ç°å¸–å­è¯„è®ºç³»ç»Ÿï¼Œæ”¯æŒåˆ›å»ºã€æŸ¥è¯¢ã€åˆ é™¤è¯„è®º
- âœ… **åˆ›å»ºè¯„è®º** - æ”¯æŒUTF-8ä¸­æ–‡å†…å®¹ï¼Œè‡ªåŠ¨ç”Ÿæˆè¯„è®ºIDï¼ˆCMT_2025Q4_XXXXXXæ ¼å¼ï¼‰
- âœ… **è·å–è¯„è®ºåˆ—è¡¨** - åˆ†é¡µæŸ¥è¯¢ï¼Œæ‰¹é‡åŠ è½½ä½œè€…ä¿¡æ¯ï¼Œè§£å†³N+1é—®é¢˜
- âœ… **åˆ é™¤è¯„è®º** - æƒé™éªŒè¯ï¼ˆè¯„è®ºä½œè€…æˆ–å¸–å­ä½œè€…å¯åˆ é™¤ï¼‰
- âœ… **è¯„è®ºæ•°ç»Ÿè®¡** - è‡ªåŠ¨ç»´æŠ¤å¸–å­çš„comment_countå­—æ®µ
- âœ… **æ¸¸å®¢æ¨¡å¼** - æ¸¸å®¢å¯æŸ¥çœ‹è¯„è®ºåˆ—è¡¨ï¼Œåˆ›å»º/åˆ é™¤éœ€ç™»å½•

**æ–°å¢æ¥å£**ï¼š
- `POST /api/v1/posts/:post_id/comments` - åˆ›å»ºè¯„è®ºï¼ˆéœ€è®¤è¯ï¼‰
- `GET /api/v1/posts/:post_id/comments` - è·å–è¯„è®ºåˆ—è¡¨ï¼ˆå…¬å¼€ï¼‰
- `DELETE /api/v1/posts/:post_id/comments/:comment_id` - åˆ é™¤è¯„è®ºï¼ˆéœ€è®¤è¯ï¼‰

**æ•°æ®åº“å˜æ›´**ï¼š
- æ–°å¢è¡¨ï¼š`comments`ï¼ˆ6å­—æ®µï¼Œ4ç´¢å¼•ï¼Œ2å¤–é”®ï¼‰
- postsè¡¨æ–°å¢å­—æ®µï¼š`comment_count`ï¼ˆè¯„è®ºæ•°ç»Ÿè®¡ï¼‰

**æŠ€æœ¯å®ç°**ï¼š
- ä¹å±‚æ¶æ„ï¼šModel â†’ Repository â†’ Service â†’ Handler
- RAIIèµ„æºç®¡ç†ï¼šConnectionGuardè‡ªåŠ¨ç®¡ç†æ•°æ®åº“è¿æ¥
- æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–ï¼šUserService::batchGetUsers()é¿å…N+1æŸ¥è¯¢
- äº‹åŠ¡ä¿è¯ï¼šåˆ›å»º/åˆ é™¤è¯„è®ºä¸countæ›´æ–°åŸå­æ€§
- å¤–é”®çº§è”åˆ é™¤ï¼šåˆ é™¤å¸–å­è‡ªåŠ¨åˆ é™¤è¯„è®º

**æ€§èƒ½æŒ‡æ ‡**ï¼š
- è¯„è®ºåˆ—è¡¨æŸ¥è¯¢ï¼ˆ20æ¡ï¼‰ï¼š2æ¬¡æ•°æ®åº“æŸ¥è¯¢ï¼ˆå¸–å­è¯„è®º + æ‰¹é‡ç”¨æˆ·ä¿¡æ¯ï¼‰
- åˆ›å»ºè¯„è®ºå“åº”æ—¶é—´ï¼š< 100ms
- æŸ¥è¯¢è¯„è®ºåˆ—è¡¨å“åº”æ—¶é—´ï¼š< 150ms

---

### ğŸš€ v2.7.0 æ”¶è—åˆ—è¡¨æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–ï¼ˆ2025-10-19ï¼‰

**æ ¸å¿ƒä¼˜åŒ–**ï¼šæ”¶è—åˆ—è¡¨æ¥å£æ–°å¢ä½œè€…ä¿¡æ¯å’Œäº’åŠ¨çŠ¶æ€ï¼Œæ‰¹é‡æŸ¥è¯¢è§£å†³N+1é—®é¢˜
- âœ… **æ–°å¢è¿”å›å­—æ®µ** - æ”¶è—åˆ—è¡¨æ–°å¢`author`ï¼ˆä½œè€…ä¿¡æ¯ï¼‰ã€`has_liked`ï¼ˆç‚¹èµçŠ¶æ€ï¼‰ã€`has_favorited`ï¼ˆæ”¶è—çŠ¶æ€ï¼Œå›ºå®štrueï¼‰
- âœ… **æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–** - ä½¿ç”¨SQL INæ‰¹é‡æŸ¥è¯¢ä½œè€…ä¿¡æ¯å’Œç‚¹èµçŠ¶æ€
- âœ… **æ€§èƒ½æå‡** - 20æ¡è®°å½•æŸ¥è¯¢æ¬¡æ•°ä»41æ¬¡é™è‡³3æ¬¡ï¼ˆâ¬‡ï¸92.7%ï¼‰ï¼Œå“åº”æ—¶é—´P99 < 100ms
- âœ… **APIä¸€è‡´æ€§** - ä¸v2.5.0 Feedæµæ¥å£ä¿æŒä¸€è‡´çš„æ•°æ®ç»“æ„

**å½±å“æ¥å£**ï¼š
- `GET /api/v1/my/favorites` - è·å–ç”¨æˆ·æ”¶è—åˆ—è¡¨ï¼ˆæ–°å¢æ‰¹é‡æŸ¥è¯¢ï¼‰

**æ€§èƒ½æŒ‡æ ‡**ï¼š
- æ”¶è—åˆ—è¡¨æŸ¥è¯¢ï¼ˆ20æ¡ï¼‰ï¼š41æ¬¡æŸ¥è¯¢ â†’ 3æ¬¡æŸ¥è¯¢ï¼ˆâ¬‡ï¸92.7%ï¼‰
  - 1æ¬¡ï¼šæŸ¥è¯¢æ”¶è—çš„å¸–å­
  - 1æ¬¡ï¼šæ‰¹é‡æŸ¥è¯¢ä½œè€…ä¿¡æ¯
  - 1æ¬¡ï¼šæ‰¹é‡æŸ¥è¯¢ç‚¹èµçŠ¶æ€
- å“åº”æ—¶é—´ï¼ˆP99ï¼‰ï¼š~150ms â†’ ~80msï¼ˆâ¬†ï¸46.7%ï¼‰

**æŠ€æœ¯å®ç°**ï¼š
- å¤ç”¨v2.5.0çš„UserService::batchGetUsers()
- å¤ç”¨v2.5.0çš„LikeService::batchCheckLikedStatus()
- has_favoritedå›ºå®šè¿”å›trueï¼ˆæ”¶è—åˆ—è¡¨ç‰¹æ€§ï¼‰
- ä»…Handlerå±‚ä¿®æ”¹ï¼Œé›¶æ•°æ®åº“è¡¨å˜æ›´

**è¯¦ç»†æ–‡æ¡£**ï¼š
- ä¼˜åŒ–æ–¹æ¡ˆè§ï¼š`project_document/[170]æ”¶è—åˆ—è¡¨æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–æ–¹æ¡ˆ.md`

---

### ğŸš€ v2.5.1 å¸–å­è¯¦æƒ…ç”¨æˆ·ä¿¡æ¯ä¼˜åŒ–ï¼ˆ2025-10-18ï¼‰

**æ ¸å¿ƒä¼˜åŒ–**ï¼šå¸–å­è¯¦æƒ…æ¥å£æ–°å¢ç”¨æˆ·æ˜µç§°å­—æ®µï¼Œå‡å°‘å‰ç«¯è¯·æ±‚æ¬¡æ•°
- âœ… **æ–°å¢usernameå­—æ®µ** - è·å–å¸–å­è¯¦æƒ…æ¥å£è¿”å›ä¸­æ–°å¢`username`ï¼ˆç”¨æˆ·æ˜µç§°ï¼‰å­—æ®µ
- âœ… **æ€§èƒ½æå‡** - å‰ç«¯æ— éœ€é¢å¤–è°ƒç”¨ç”¨æˆ·ä¿¡æ¯æ¥å£ï¼Œå‡å°‘1æ¬¡HTTPè¯·æ±‚ï¼ŒåŠ è½½é€Ÿåº¦æå‡~50%
- âœ… **APIä¸€è‡´æ€§** - ä¸v2.5.0 Feedæµæ¥å£ä¿æŒä¸€è‡´çš„æ•°æ®ç»“æ„ï¼ˆå‡åŒ…å«ç”¨æˆ·ä¿¡æ¯ï¼‰
- âœ… **å‘åå…¼å®¹** - æ–°å¢å­—æ®µä¸å½±å“ç°æœ‰å‰ç«¯ï¼Œæ¸è¿›å¼å‡çº§

**å½±å“æ¥å£**ï¼š
- `GET /api/v1/posts/:post_id` - è·å–å¸–å­è¯¦æƒ…ï¼ˆè¿”å›æ–°å¢usernameå­—æ®µï¼‰
- `POST /api/v1/posts` - åˆ›å»ºå¸–å­ï¼ˆè¿”å›æ–°å¢usernameå­—æ®µï¼‰
- `PUT /api/v1/posts/:post_id` - æ›´æ–°å¸–å­ï¼ˆè¿”å›æ–°å¢usernameå­—æ®µï¼‰

**æŠ€æœ¯å®ç°**ï¼š
- Postæ¨¡å‹æ–°å¢`username_`å­—æ®µ
- Repositoryå±‚SQLæŸ¥è¯¢LEFT JOIN usersè¡¨è·å–username
- ä¸€æ¬¡æŸ¥è¯¢è¿”å›å®Œæ•´ä¿¡æ¯ï¼Œé¿å…N+1æŸ¥è¯¢

**è¯¦ç»†æ–‡æ¡£**ï¼š
- å®æ–½æ–¹æ¡ˆè§ï¼š`project_document/[119]å¸–å­è¯¦æƒ…æ¥å£æ·»åŠ ç”¨æˆ·æ˜µç§°å­—æ®µ-å®æ–½æ–¹æ¡ˆ.md`
- æ¨¡å—æ–‡æ¡£è§ï¼š`project_document/[105]é˜¶æ®µC-2-å¤šå›¾ç‰‡å¸–å­ç³»ç»Ÿ.md`ï¼ˆåç»­ä¼˜åŒ–è®¡åˆ’ç« èŠ‚ï¼‰

---

### ğŸš€ v2.5.0 Feedæµæ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–ï¼ˆ2025-10-18ï¼‰

**æ ¸å¿ƒä¼˜åŒ–**ï¼šè§£å†³N+1æŸ¥è¯¢é—®é¢˜ï¼Œæ”¯æŒæ¸¸å®¢è®¿é—®ï¼Œç»Ÿä¸€è¿”å›æ ¼å¼
- âœ… **å¯é€‰JWTè®¤è¯** - Feedæµæ”¯æŒæ¸¸å®¢å’Œç™»å½•ç”¨æˆ·ç»Ÿä¸€è®¿é—®ï¼Œæ— æ•ˆTokenè‡ªåŠ¨é™çº§ä¸ºæ¸¸å®¢æ¨¡å¼ï¼ˆä¸è¿”å›401ï¼‰
- âœ… **æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–** - ä½¿ç”¨SQL INæ‰¹é‡æŸ¥è¯¢ä½œè€…ä¿¡æ¯ã€ç‚¹èµçŠ¶æ€ã€æ”¶è—çŠ¶æ€ï¼Œè§£å†³N+1æŸ¥è¯¢é—®é¢˜
- âœ… **æ–°å¢è¿”å›å­—æ®µ** - Feedæµæ–°å¢`author`ï¼ˆä½œè€…ä¿¡æ¯ï¼‰ã€`has_liked`ï¼ˆç‚¹èµçŠ¶æ€ï¼‰ã€`has_favorited`ï¼ˆæ”¶è—çŠ¶æ€ï¼‰å­—æ®µ
- âœ… **ç»Ÿä¸€JSONç»“æ„** - å­—æ®µå§‹ç»ˆå­˜åœ¨ï¼Œæ¸¸å®¢è¿”å›`false`è€Œä¸æ˜¯`null`æˆ–çœç•¥å­—æ®µ
- âœ… **æ€§èƒ½æå‡** - æ¸¸å®¢è®¿é—®å‡å°‘95.2%æŸ¥è¯¢æ¬¡æ•°ï¼Œç™»å½•ç”¨æˆ·å‡å°‘93.4%æŸ¥è¯¢æ¬¡æ•°ï¼ŒQPSæå‡200%

**å½±å“æ¥å£**ï¼š
- `GET /api/v1/posts` - è·å–Feedæµï¼ˆæ–°å¢å¯é€‰è®¤è¯+æ‰¹é‡æŸ¥è¯¢ï¼‰
- `GET /api/v1/users/:user_id/posts` - è·å–ç”¨æˆ·å¸–å­åˆ—è¡¨ï¼ˆæ–°å¢å¯é€‰è®¤è¯+æ‰¹é‡æŸ¥è¯¢ï¼‰

**æ€§èƒ½æŒ‡æ ‡**ï¼š
- æ¸¸å®¢è®¿é—®Feedæµï¼ˆ20æ¡ï¼‰ï¼š21æ¬¡æŸ¥è¯¢ â†’ 1æ¬¡æŸ¥è¯¢ï¼ˆâ¬‡ï¸95.2%ï¼‰
- ç™»å½•ç”¨æˆ·è®¿é—®Feedæµï¼ˆ20æ¡ï¼‰ï¼š61æ¬¡æŸ¥è¯¢ â†’ 4æ¬¡æŸ¥è¯¢ï¼ˆâ¬‡ï¸93.4%ï¼‰
- å“åº”æ—¶é—´ï¼ˆP99ï¼‰ï¼š~150ms â†’ ~50msï¼ˆâ¬†ï¸66.7%ï¼‰
- QPSï¼š~100 â†’ ~300ï¼ˆâ¬†ï¸200%ï¼‰

**è¯¦ç»†æ–‡æ¡£**ï¼š
- ä¼˜åŒ–æ–¹æ¡ˆè§ï¼š`project_document/[118]Feedæµç”¨æˆ·çŠ¶æ€æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–æ–¹æ¡ˆ.md`

---

### ğŸ”§ v2.4.1 JSONæ ¼å¼åˆ›å»ºå¸–å­æ”¯æŒï¼ˆ2025-10-15ï¼‰

**æ–°å¢åŠŸèƒ½**ï¼šåˆ›å»ºå¸–å­æ¥å£æ”¯æŒJSON+Base64æ ¼å¼
- âœ… æ”¯æŒ`application/json` Content-Typeï¼ˆBase64å›¾ç‰‡ï¼‰
- âœ… æ”¯æŒ`multipart/form-data` Content-Typeï¼ˆæ–‡ä»¶ä¸Šä¼ ï¼‰
- âœ… è‡ªåŠ¨æ£€æµ‹å’Œè§£ç Base64æ•°æ®ï¼ˆData URIå’Œçº¯Base64ï¼‰
- âœ… å®Œå…¨å‘åå…¼å®¹ï¼Œä¸å½±å“ç°æœ‰å®¢æˆ·ç«¯

**å½±å“æ¥å£**ï¼š
- `POST /api/v1/posts` - åˆ›å»ºå¸–å­

**æŠ€æœ¯äº®ç‚¹**ï¼š
- Base64è§£ç æ—¶é—´ï¼š<1msï¼ˆ9KBå›¾ç‰‡ï¼‰
- æ”¯æŒæ ¼å¼ï¼šPNGã€JPEGã€GIFã€WebP
- è‡ªåŠ¨è¯†åˆ«Content-Typeå¹¶åˆ‡æ¢è§£æé€»è¾‘

**è¯¦ç»†æ–‡æ¡£**ï¼š
- å®æ–½è®¡åˆ’è§ï¼š`project_document/[115]åˆ›å»ºå¸–å­æ¥å£æ”¯æŒJSON+Base64æ ¼å¼-å®æ–½è®¡åˆ’.md`

---

### ğŸ”— v2.3.0 åˆ†äº«ç³»ç»Ÿï¼ˆ2025-10-11ï¼‰

**æ–°å¢åŠŸèƒ½**ï¼šçŸ­é“¾æ¥ç”Ÿæˆä¸ä¸‰ç«¯Deep Linkæ”¯æŒ
- âœ… çŸ­é“¾æ¥ç”Ÿæˆç³»ç»Ÿï¼ˆé›ªèŠ±ID + Base62ç¼–ç ï¼‰
- âœ… Deep Linkæ”¯æŒï¼ˆiOS Universal Linksã€Android App Linksã€HarmonyOS Deep Linkingï¼‰
- âœ… çŸ­é“¾æ¥å»é‡ï¼ˆåŒä¸€å¸–å­è¿”å›ç›¸åŒçŸ­é“¾æ¥ï¼‰
- âœ… è¿‡æœŸæœºåˆ¶æ”¯æŒ

**æ–°å¢æ¥å£**ï¼š
- `POST /api/v1/posts/:post_id/share` - åˆ›å»ºå¸–å­åˆ†äº«é“¾æ¥
- `GET /api/v1/share/:code` - è§£æåˆ†äº«é“¾æ¥ï¼ˆå…¬å¼€æ¥å£ï¼‰

**æŠ€æœ¯äº®ç‚¹**ï¼š
- 8ä½Base62çŸ­ç ï¼Œ62^8 â‰ˆ 218ä¸‡äº¿ç§å¯èƒ½
- ä¸‰ç«¯Deep Linkç»Ÿä¸€é…ç½®æ–¹æ¡ˆ
- å¤–é”®çº§è”åˆ é™¤ï¼Œæ•°æ®ä¸€è‡´æ€§ä¿è¯

**è¯¦ç»†æ–‡æ¡£**ï¼š
- å®æ–½è®¡åˆ’è§ï¼š`project_document/[109]é˜¶æ®µD-3-åˆ†äº«ç³»ç»Ÿå®ç°è®¡åˆ’.md`

---

## ğŸ“‹ é€šç”¨è¯´æ˜

### å›¾ç‰‡URLè‡ªåŠ¨å‰ç¼€

**æ‰€æœ‰è¿”å›çš„å›¾ç‰‡è·¯å¾„å·²è‡ªåŠ¨æ·»åŠ æœåŠ¡å™¨URLå‰ç¼€**ï¼Œå®¢æˆ·ç«¯å¯ç›´æ¥ä½¿ç”¨è¿”å›çš„å®Œæ•´URLè®¿é—®å›¾ç‰‡ã€‚

**å½±å“å­—æ®µ**ï¼š
- `file_url` - åŸå›¾URL
- `thumbnail_url` - ç¼©ç•¥å›¾URL
- `cover_image_url` - å°é¢å›¾URL
- `avatar_url` - ç”¨æˆ·å¤´åƒURL

**è¿”å›æ ¼å¼**ï¼š
```json
{
  "file_url": "http://43.142.157.145:8080/uploads/images/IMG_2025Q4_xxx.jpg",
  "thumbnail_url": "http://43.142.157.145:8080/uploads/thumbnails/IMG_2025Q4_xxx_thumb.jpg"
}
```

**é…ç½®è¯´æ˜**ï¼š
- ç”Ÿäº§ç¯å¢ƒï¼šè‡ªåŠ¨ä½¿ç”¨ `http://43.142.157.145:8080` ä½œä¸ºå‰ç¼€
- å¼€å‘ç¯å¢ƒï¼šå¯åœ¨ `config.json` ä¸­é…ç½® `server.base_url` è‡ªå®šä¹‰å‰ç¼€
- ç›¸å¯¹è·¯å¾„æ¨¡å¼ï¼šè®¾ç½® `server.base_url: ""` è¿”å›ç›¸å¯¹è·¯å¾„ï¼ˆç”¨äºæœ¬åœ°å¼€å‘ï¼‰

---

## è®¤è¯ç›¸å…³API

### 1. ç”¨æˆ·æ³¨å†Œ

**åŠŸèƒ½ä»‹ç»**: æ³¨å†Œæ–°ç”¨æˆ·è´¦å·

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/auth/register`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| username | string | æ˜¯ | ç”¨æˆ·åï¼ˆ3-50å­—ç¬¦ï¼Œå­—æ¯æ•°å­—ä¸‹åˆ’çº¿ï¼‰ | "zhangsan" |
| password | string | æ˜¯ | å¯†ç ï¼ˆ6-100å­—ç¬¦ï¼‰ | "password123" |
| real_name | string | æ˜¯ | çœŸå®å§“åï¼ˆä¸è¶…è¿‡50å­—ç¬¦ï¼‰ | "å¼ ä¸‰" |
| phone | string | æ˜¯ | æ‰‹æœºå·ï¼ˆ11ä½ä¸­å›½æ‰‹æœºå·ï¼‰ | "13800138000" |
| email | string | å¦ | é‚®ç®±ï¼ˆå¯é€‰ï¼‰ | "zhangsan@example.com" |
| role | string | å¦ | ç”¨æˆ·è§’è‰²ï¼ˆowner/driver/bothï¼Œé»˜è®¤driverï¼‰ | "driver" |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "username": "zhangsan",
  "password": "password123",
  "real_name": "å¼ ä¸‰",
  "phone": "13800138000",
  "email": "zhangsan@example.com",
  "role": "driver"
}
```

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | ç”¨æˆ·æ•°æ®ï¼ˆæˆåŠŸæ—¶è¿”å›ï¼‰ |
| data.id | integer | ç‰©ç†ID |
| data.user_id | string | é€»è¾‘ID |
| data.username | string | ç”¨æˆ·å |
| data.real_name | string | çœŸå®å§“å |
| data.phone | string | æ‰‹æœºå· |
| data.email | string | é‚®ç®± |
| data.role | string | ç”¨æˆ·è§’è‰² |
| data.status | string | è´¦æˆ·çŠ¶æ€ |
| data.create_time | integer | åˆ›å»ºæ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "id": 1,
    "user_id": "USR_2025Q1_A1B2C3",
    "username": "zhangsan",
    "real_name": "å¼ ä¸‰",
    "phone": "13800138000",
    "email": "zhangsan@example.com",
    "role": "driver",
    "status": "active",
    "avatar_url": "",
    "device_count": 0,
    "create_time": 1704067200,
    "update_time": 1704067200
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:
```json
{
  "success": false,
  "message": "ç”¨æˆ·åå·²å­˜åœ¨",
  "data": null
}
```

**é”™è¯¯ç è¯´æ˜**:
- `ç”¨æˆ·åå·²å­˜åœ¨`: ç”¨æˆ·åé‡å¤
- `æ‰‹æœºå·å·²è¢«æ³¨å†Œ`: æ‰‹æœºå·é‡å¤
- `é‚®ç®±å·²è¢«æ³¨å†Œ`: é‚®ç®±é‡å¤
- `ç”¨æˆ·åä¸èƒ½ä¸ºç©º`: å‚æ•°éªŒè¯å¤±è´¥
- `æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®`: æ‰‹æœºå·æ ¼å¼é”™è¯¯

---

### 2. ç”¨æˆ·ç™»å½•

**åŠŸèƒ½ä»‹ç»**: ç”¨æˆ·ç™»å½•è·å–è®¿é—®ä»¤ç‰Œ

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/auth/login`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| username | string | æ˜¯ | ç”¨æˆ·å/æ‰‹æœºå·/é‚®ç®± | "zhangsan" æˆ– "13800138000" |
| password | string | æ˜¯ | å¯†ç  | "password123" |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "username": "zhangsan",
  "password": "password123"
}
```

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | ç™»å½•æ•°æ®ï¼ˆæˆåŠŸæ—¶è¿”å›ï¼‰ |
| data.access_token | string | è®¿é—®ä»¤ç‰Œï¼ˆæœ‰æ•ˆæœŸ1å°æ—¶ï¼‰ |
| data.refresh_token | string | åˆ·æ–°ä»¤ç‰Œï¼ˆæœ‰æ•ˆæœŸ24å°æ—¶ï¼‰ |
| data.user | object | ç”¨æˆ·ä¿¡æ¯ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": 1,
      "user_id": "USR_2025Q1_A1B2C3",
      "username": "zhangsan",
      "real_name": "å¼ ä¸‰",
      "phone": "13800138000",
      "email": "zhangsan@example.com",
      "role": "driver",
      "status": "active"
    }
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:
```json
{
  "success": false,
  "message": "å¯†ç é”™è¯¯",
  "data": null
}
```

**é”™è¯¯ç è¯´æ˜**:
- `ç”¨æˆ·ä¸å­˜åœ¨`: ç”¨æˆ·å/æ‰‹æœºå·/é‚®ç®±ä¸å­˜åœ¨
- `å¯†ç é”™è¯¯`: å¯†ç ä¸æ­£ç¡®
- `è´¦æˆ·å·²è¢«å°ç¦`: è´¦æˆ·çŠ¶æ€ä¸ºbanned
- `è´¦æˆ·æœªæ¿€æ´»`: è´¦æˆ·çŠ¶æ€ä¸ºinactive

---

### 3. ä»¤ç‰ŒéªŒè¯

**åŠŸèƒ½ä»‹ç»**: éªŒè¯JWTè®¿é—®ä»¤ç‰Œæ˜¯å¦æœ‰æ•ˆ

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/auth/validate`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
Authorization: Bearer {access_token}
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| token | string | æ˜¯ | JWTè®¿é—®ä»¤ç‰Œ | "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| valid | boolean | ä»¤ç‰Œæ˜¯å¦æœ‰æ•ˆ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | ä»¤ç‰Œæ•°æ®ï¼ˆæœ‰æ•ˆæ—¶è¿”å›ï¼‰ |
| data.user_id | integer | ç”¨æˆ·ID |
| data.username | string | ç”¨æˆ·å |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "valid": true,
  "message": "ä»¤ç‰Œæœ‰æ•ˆ",
  "data": {
    "user_id": 1,
    "username": "zhangsan"
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:
```json
{
  "valid": false,
  "message": "ä»¤ç‰Œæ— æ•ˆæˆ–å·²è¿‡æœŸ",
  "data": null
}
```

---

### 4. ä»¤ç‰Œåˆ·æ–°

**åŠŸèƒ½ä»‹ç»**: ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œè·å–æ–°çš„è®¿é—®ä»¤ç‰Œ

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/auth/refresh`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| refresh_token | string | æ˜¯ | JWTåˆ·æ–°ä»¤ç‰Œ | "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | æ–°ä»¤ç‰Œæ•°æ® |
| data.access_token | string | æ–°çš„è®¿é—®ä»¤ç‰Œ |
| data.refresh_token | string | æ–°çš„åˆ·æ–°ä»¤ç‰Œ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "ä»¤ç‰Œåˆ·æ–°æˆåŠŸ",
  "data": {
    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:
```json
{
  "success": false,
  "message": "åˆ·æ–°ä»¤ç‰Œæ— æ•ˆ",
  "data": null
}
```

---

### 5. ç”¨æˆ·ç™»å‡º

**åŠŸèƒ½ä»‹ç»**: ç”¨æˆ·ç™»å‡ºï¼ˆç®€åŒ–å®ç°ï¼ŒJWTä»¤ç‰Œè‡ªåŠ¨è¿‡æœŸï¼‰

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/auth/logout`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
Authorization: Bearer {access_token}
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| access_token | string | æ˜¯ | JWTè®¿é—®ä»¤ç‰Œ | "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "ç™»å‡ºæˆåŠŸ"
}
```

**æ³¨æ„**: å½“å‰å®ç°ä¸ºç®€åŒ–ç‰ˆæœ¬ï¼ŒJWTä»¤ç‰Œä¼šåœ¨è¿‡æœŸåè‡ªåŠ¨å¤±æ•ˆï¼Œæœªå®ç°ä»¤ç‰Œé»‘åå•åŠŸèƒ½ã€‚

---

### 6. ä¿®æ”¹å¯†ç 

**åŠŸèƒ½ä»‹ç»**: ä¿®æ”¹ç”¨æˆ·å¯†ç 

**è¯·æ±‚æ–¹å¼**: `PUT`

**è¯·æ±‚è·¯å¾„**: `/auth/password`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
Authorization: Bearer {access_token}
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| user_id | integer | æ˜¯ | ç”¨æˆ·ID | 1 |
| old_password | string | æ˜¯ | æ—§å¯†ç  | "password123" |
| new_password | string | æ˜¯ | æ–°å¯†ç ï¼ˆ6-100å­—ç¬¦ï¼‰ | "newpassword456" |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "user_id": 1,
  "old_password": "password123",
  "new_password": "newpassword456"
}
```

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å¯†ç ä¿®æ”¹æˆåŠŸ"
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:
```json
{
  "success": false,
  "message": "æ—§å¯†ç ä¸æ­£ç¡®"
}
```

**é”™è¯¯ç è¯´æ˜**:
- `ç”¨æˆ·ä¸å­˜åœ¨`: ç”¨æˆ·IDä¸å­˜åœ¨
- `æ—§å¯†ç ä¸æ­£ç¡®`: æ—§å¯†ç éªŒè¯å¤±è´¥
- `æ–°å¯†ç æ ¼å¼ä¸æ­£ç¡®`: æ–°å¯†ç é•¿åº¦ä¸ç¬¦åˆè¦æ±‚

---

### 7. è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

**åŠŸèƒ½ä»‹ç»**: è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„å®Œæ•´ä¿¡æ¯

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/users/profile`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | ç”¨æˆ·æ•°æ®ï¼ˆæˆåŠŸæ—¶è¿”å›ï¼‰ |
| data.id | integer | ç‰©ç†ID |
| data.user_id | string | é€»è¾‘ID |
| data.username | string | ç”¨æˆ·å |
| data.real_name | string | çœŸå®å§“å |
| data.phone | string | æ‰‹æœºå· |
| data.email | string | é‚®ç®± |
| data.avatar_url | string | å¤´åƒURL |
| data.bio | string | ä¸ªäººç®€ä»‹ |
| data.gender | string | æ€§åˆ«(male/female/other/prefer_not_to_say) |
| data.location | string | æ‰€åœ¨åœ° |
| data.role | string | ç”¨æˆ·è§’è‰² |
| data.status | string | è´¦æˆ·çŠ¶æ€ |
| data.device_count | integer | ç»‘å®šè®¾å¤‡æ•° |
| data.create_time | integer | åˆ›å»ºæ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰ |
| data.update_time | integer | æ›´æ–°æ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "id": 7,
    "user_id": "USR_2025Q4_CBNLB0",
    "username": "testuser001",
    "real_name": "æµ‹è¯•ç”¨æˆ·001",
    "phone": "13900000099",
    "email": "test001@example.com",
    "avatar_url": "",
    "bio": "è¿™æ˜¯æˆ‘çš„ä¸ªäººç®€ä»‹",
    "gender": "male",
    "location": "åŒ—äº¬",
    "role": "user",
    "status": "active",
    "device_count": 0,
    "create_time": 1760018775,
    "update_time": 1760018818
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:
```json
{
  "success": false,
  "message": "ä»¤ç‰Œæ— æ•ˆæˆ–å·²è¿‡æœŸ",
  "data": null
}
```

**é”™è¯¯ç è¯´æ˜**:
- `æœªæä¾›è®¤è¯ä»¤ç‰Œ`: Authorizationå¤´ç¼ºå¤±
- `ä»¤ç‰Œæ— æ•ˆæˆ–å·²è¿‡æœŸ`: tokenéªŒè¯å¤±è´¥
- `ç”¨æˆ·ä¸å­˜åœ¨`: ç”¨æˆ·IDä¸å­˜åœ¨

---

### 8. æ›´æ–°ç”¨æˆ·ä¿¡æ¯ **ğŸ”¥ v2.9.0æ”¯æŒusername**

**åŠŸèƒ½ä»‹ç»**: æ›´æ–°å½“å‰ç™»å½•ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯

**è¯·æ±‚æ–¹å¼**: `PUT`

**è¯·æ±‚è·¯å¾„**: `/users/profile`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| username | string | å¦ | **ğŸ†• v2.9.0** ç”¨æˆ·æ˜µç§°ï¼ˆ3-50å­—ç¬¦ï¼Œå­—æ¯æ•°å­—ä¸‹åˆ’çº¿ï¼‰ | "new_username" |
| real_name | string | æ˜¯ | çœŸå®å§“åï¼ˆä¸è¶…è¿‡50å­—ç¬¦ï¼‰ | "å¼ ä¸‰" |
| phone | string | æ˜¯ | æ‰‹æœºå·ï¼ˆ11ä½ä¸­å›½æ‰‹æœºå·ï¼Œå¿…é¡»ä»¥1å¼€å¤´ï¼‰ | "13800138000" |
| email | string | å¦ | é‚®ç®±ï¼ˆç¬¦åˆæ ‡å‡†é‚®ç®±æ ¼å¼ï¼‰ | "zhangsan@example.com" |
| avatar_url | string | å¦ | å¤´åƒURLï¼ˆä»…ç”¨äºè®¾ç½®å¤–éƒ¨URLæˆ–æ¸…ç©ºå¤´åƒï¼Œä¸Šä¼ æ–‡ä»¶è¯·ä½¿ç”¨POST /users/avatarï¼‰ | "https://example.com/avatar.jpg" æˆ– "" |
| bio | string | å¦ | ä¸ªäººç®€ä»‹ï¼ˆä¸è¶…è¿‡500å­—ç¬¦ï¼‰ | "çƒ­çˆ±æ‘„å½±å’Œæ—…è¡Œ" |
| gender | string | å¦ | æ€§åˆ«ï¼ˆmale/female/other/prefer_not_to_sayï¼‰ | "male" |
| location | string | å¦ | æ‰€åœ¨åœ°ï¼ˆä¸è¶…è¿‡100å­—ç¬¦ï¼‰ | "åŒ—äº¬å¸‚æœé˜³åŒº" |

**å‚æ•°è¯´æ˜**:
- `real_name` å’Œ `phone` ä¸ºå¿…å¡«å­—æ®µ
- å…¶ä»–å­—æ®µä¸ºå¯é€‰ï¼Œè‹¥ä¸ä¼ åˆ™ä¿æŒåŸå€¼ä¸å˜
- **ğŸ†• v2.9.0 usernameéªŒè¯è§„åˆ™**ï¼š
  - **æ ¼å¼**: 3-50å­—ç¬¦ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿
  - **å”¯ä¸€æ€§**: å¦‚æœä¿®æ”¹ï¼Œä¼šæ£€æŸ¥æ˜¯å¦å·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨
  - **æ™ºèƒ½æ£€æµ‹**: å¦‚æœæäº¤çš„usernameä¸å½“å‰usernameç›¸åŒï¼Œä¼šè·³è¿‡é‡å¤æ£€æµ‹
- `phone` å¦‚æœä¿®æ”¹ï¼Œä¼šæ£€æŸ¥æ˜¯å¦å·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨
- `email` å¦‚æœä¿®æ”¹ï¼Œä¼šæ£€æŸ¥æ˜¯å¦å·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨
- `avatar_url` ä½¿ç”¨è¯´æ˜ï¼š
  - **ä¸Šä¼ æœ¬åœ°å›¾ç‰‡**: è¯·ä½¿ç”¨ `POST /api/v1/users/avatar` æ¥å£ï¼ˆæ¨èï¼‰
  - **è®¾ç½®å¤–éƒ¨URL**: å¯é€šè¿‡æ­¤å­—æ®µè®¾ç½®ç¬¬ä¸‰æ–¹å›¾åºŠURLï¼ˆå¦‚å¾®ä¿¡ã€QQå¤´åƒï¼‰
  - **æ¸…ç©ºå¤´åƒ**: è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸² `""`
  - **ä¸å»ºè®®**: æ‰‹åŠ¨è®¾ç½®æœ¬åœ°æœåŠ¡å™¨è·¯å¾„
- `gender` åªæ¥å—ä»¥ä¸‹å››ä¸ªå€¼ï¼š`male`ï¼ˆç”·ï¼‰ã€`female`ï¼ˆå¥³ï¼‰ã€`other`ï¼ˆå…¶ä»–ï¼‰ã€`prefer_not_to_say`ï¼ˆä¸æ„¿é€éœ²ï¼‰

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "username": "new_cool_username",
  "real_name": "å¼ ä¸‰",
  "phone": "13800138000",
  "email": "zhangsan@example.com",
  "avatar_url": "https://example.com/avatar.jpg",
  "bio": "çƒ­çˆ±æ‘„å½±å’Œæ—…è¡Œ",
  "gender": "male",
  "location": "åŒ—äº¬å¸‚æœé˜³åŒº"
}
```

**éƒ¨åˆ†æ›´æ–°ç¤ºä¾‹**ï¼ˆåªæ›´æ–°éƒ¨åˆ†å­—æ®µï¼‰:
```json
{
  "real_name": "å¼ ä¸‰",
  "phone": "13800138000",
  "bio": "æ›´æ–°ä¸ªäººç®€ä»‹",
  "gender": "male"
}
```
*è¯´æ˜ï¼šæœªæä¾›çš„å¯é€‰å­—æ®µï¼ˆå¦‚usernameã€emailã€avatar_urlã€locationï¼‰å°†ä¿æŒåŸå€¼*

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | æ›´æ–°åçš„ç”¨æˆ·æ•°æ®ï¼ˆæˆåŠŸæ—¶è¿”å›ï¼‰ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "ç”¨æˆ·ä¿¡æ¯æ›´æ–°æˆåŠŸ",
  "data": {
    "id": 7,
    "user_id": "USR_2025Q4_CBNLB0",
    "username": "testuser001",
    "real_name": "å¼ ä¸‰",
    "phone": "13800138000",
    "email": "zhangsan@example.com",
    "avatar_url": "https://example.com/avatar.jpg",
    "bio": "çƒ­çˆ±æ‘„å½±å’Œæ—…è¡Œ",
    "gender": "male",
    "location": "åŒ—äº¬",
    "role": "user",
    "status": "active",
    "device_count": 0,
    "create_time": 1760018775,
    "update_time": 1760020100
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:
```json
{
  "success": false,
  "message": "é‚®ç®±å·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨",
  "data": null
}
```

**é”™è¯¯ç è¯´æ˜**:
- `æœªæä¾›è®¤è¯ä»¤ç‰Œ`: ç¼ºå°‘Authorizationå¤´
- `ä»¤ç‰Œæ— æ•ˆæˆ–å·²è¿‡æœŸ`: tokenéªŒè¯å¤±è´¥
- `ç”¨æˆ·ä¸å­˜åœ¨`: ç”¨æˆ·IDä¸å­˜åœ¨äºæ•°æ®åº“
- `çœŸå®å§“åä¸èƒ½ä¸ºç©º`: real_nameå‚æ•°ç¼ºå¤±
- `ç”¨æˆ·åæ ¼å¼æ— æ•ˆï¼ˆ3-50å­—ç¬¦ï¼Œå­—æ¯æ•°å­—ä¸‹åˆ’çº¿ï¼‰`: **ğŸ†• v2.9.0** usernameæ ¼å¼ä¸ç¬¦åˆè¦æ±‚
- `ç”¨æˆ·åå·²å­˜åœ¨`: **ğŸ†• v2.9.0** usernameå·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨
- `æ‰‹æœºå·æ ¼å¼æ— æ•ˆ`: æ‰‹æœºå·ä¸ç¬¦åˆ11ä½ä¸­å›½æ‰‹æœºå·æ ¼å¼ï¼ˆå¿…é¡»ä»¥1å¼€å¤´ï¼‰
- `é‚®ç®±æ ¼å¼æ— æ•ˆ`: é‚®ç®±æ ¼å¼ä¸æ­£ç¡®
- `æ‰‹æœºå·å·²è¢«ä½¿ç”¨`: æ‰‹æœºå·å·²è¢«å…¶ä»–ç”¨æˆ·æ³¨å†Œ
- `é‚®ç®±å·²è¢«ä½¿ç”¨`: é‚®ç®±å·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨
- `ä¸ªäººç®€ä»‹ä¸èƒ½è¶…è¿‡500ä¸ªå­—ç¬¦`: bioå­—æ®µé•¿åº¦è¶…é™
- `æ‰€åœ¨åœ°ä¸èƒ½è¶…è¿‡100ä¸ªå­—ç¬¦`: locationå­—æ®µé•¿åº¦è¶…é™
- `æ›´æ–°ç”¨æˆ·ä¿¡æ¯å¤±è´¥`: æ•°æ®åº“æ›´æ–°æ“ä½œå¤±è´¥

**å¸¸è§é”™è¯¯åœºæ™¯**:
1. **å¤´åƒURLè¢«è¯¯åˆ¤ä¸ºæ‰‹æœºå·**:
   - âŒ é”™è¯¯ï¼šå‚æ•°é¡ºåºä¸å¯¹ï¼ˆå·²ä¿®å¤ï¼‰
   - âœ… æ­£ç¡®ï¼šç¡®ä¿æŒ‰ç…§æ–‡æ¡£é¡ºåºä¼ é€’å‚æ•°

2. **bio/gender/locationæ— æ³•æ›´æ–°**:
   - âŒ é”™è¯¯ï¼šä»£ç BUGï¼ˆå·²ä¿®å¤äºv2.1.1ï¼‰
   - âœ… æ­£ç¡®ï¼šç°åœ¨è¿™äº›å­—æ®µå¯ä»¥æ­£å¸¸æ›´æ–°

3. **æ‰‹æœºå·æˆ–é‚®ç®±å·²è¢«ä½¿ç”¨**:
   - ä¿®æ”¹æ—¶ä¼šæ£€æŸ¥å”¯ä¸€æ€§ï¼Œå¦‚æœä¸å…¶ä»–ç”¨æˆ·å†²çªä¼šæŠ¥é”™
   - å¦‚æœä¿®æ”¹ä¸ºå½“å‰ç”¨æˆ·å·²æœ‰çš„å€¼ï¼Œä¸ä¼šæŠ¥é”™

4. **ğŸ†• v2.9.0 usernameç›¸å…³åœºæ™¯**:
   - âœ… **ä¿®æ”¹ä¸ºæ–°username**: æ£€æŸ¥æ ¼å¼å’Œå”¯ä¸€æ€§åæˆåŠŸæ›´æ–°
   - âœ… **ä¿®æ”¹ä¸ºè‡ªå·±å½“å‰çš„username**: æ™ºèƒ½è·³è¿‡é‡å¤æ£€æµ‹ï¼Œç›´æ¥æˆåŠŸ
   - âŒ **usernameæ ¼å¼é”™è¯¯**: è¿‡çŸ­(<3)ã€è¿‡é•¿(>50)ã€åŒ…å«éæ³•å­—ç¬¦ï¼ˆç©ºæ ¼ã€ä¸­æ–‡ç­‰ï¼‰ä¼šè¢«æ‹’ç»
   - âŒ **usernameå·²å­˜åœ¨**: ä¸å…¶ä»–ç”¨æˆ·å†²çªæ—¶ä¼šæŠ¥é”™

---

### 9. è·å–ç”¨æˆ·å…¬å¼€ä¿¡æ¯

**åŠŸèƒ½ä»‹ç»**: è·å–æŒ‡å®šç”¨æˆ·çš„å…¬å¼€ä¿¡æ¯ï¼ˆæ— éœ€è®¤è¯ï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/users/{user_id}`

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| user_id | string | æ˜¯ | ç”¨æˆ·é€»è¾‘IDï¼ˆè·¯å¾„å‚æ•°ï¼‰ | "USR_2025Q4_CBNLB0" |

**è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/v1/users/USR_2025Q4_CBNLB0
```

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | ç”¨æˆ·å…¬å¼€æ•°æ®ï¼ˆæˆåŠŸæ—¶è¿”å›ï¼‰ |
| data.user_id | string | é€»è¾‘ID |
| data.username | string | ç”¨æˆ·å |
| data.real_name | string | çœŸå®å§“å |
| data.avatar_url | string | å¤´åƒURL |
| data.bio | string | ä¸ªäººç®€ä»‹ |
| data.gender | string | æ€§åˆ« |
| data.location | string | æ‰€åœ¨åœ° |
| data.create_time | integer | åˆ›å»ºæ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "user_id": "USR_2025Q4_CBNLB0",
    "username": "testuser001",
    "real_name": "æµ‹è¯•ç”¨æˆ·001",
    "avatar_url": "",
    "bio": "è¿™æ˜¯æˆ‘çš„ä¸ªäººç®€ä»‹",
    "gender": "male",
    "location": "åŒ—äº¬",
    "create_time": 1760018775
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:
```json
{
  "success": false,
  "message": "ç”¨æˆ·ä¸å­˜åœ¨",
  "data": null
}
```

**é”™è¯¯ç è¯´æ˜**:
- `ç”¨æˆ·ä¸å­˜åœ¨`: æŒ‡å®šçš„user_idä¸å­˜åœ¨

**æ³¨æ„äº‹é¡¹**:
- æ­¤æ¥å£æ— éœ€è®¤è¯,ä»»ä½•äººéƒ½å¯ä»¥è®¿é—®
- ä»…è¿”å›å…¬å¼€ä¿¡æ¯,ä¸åŒ…å«æ•æ„Ÿå­—æ®µ(å¦‚æ‰‹æœºå·ã€é‚®ç®±ã€å¯†ç ç­‰)

---

### 10. æ£€æŸ¥ç”¨æˆ·åå¯ç”¨æ€§

**åŠŸèƒ½ä»‹ç»**: æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å¯ç”¨äºæ³¨å†Œï¼ˆæ— éœ€è®¤è¯ï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/users/check-username`

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| username | string | æ˜¯ | å¾…æ£€æŸ¥çš„ç”¨æˆ·åï¼ˆæŸ¥è¯¢å‚æ•°ï¼‰ | "zhangsan" |

**è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/v1/users/check-username?username=zhangsan
```

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | æ£€æŸ¥ç»“æœæ•°æ®ï¼ˆæˆåŠŸæ—¶è¿”å›ï¼‰ |
| data.valid | boolean | æ ¼å¼æ˜¯å¦æœ‰æ•ˆ |
| data.available | boolean | æ˜¯å¦å¯ç”¨ |

**æˆåŠŸå“åº”ç¤ºä¾‹ï¼ˆç”¨æˆ·åå¯ç”¨ï¼‰**:
```json
{
  "success": true,
  "message": "ç”¨æˆ·åå¯ç”¨",
  "data": {
    "valid": true,
    "available": true
  }
}
```

**æˆåŠŸå“åº”ç¤ºä¾‹ï¼ˆç”¨æˆ·åå·²è¢«å ç”¨ï¼‰**:
```json
{
  "success": true,
  "message": "ç”¨æˆ·åå·²è¢«å ç”¨",
  "data": {
    "valid": true,
    "available": false
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹ï¼ˆæ ¼å¼æ— æ•ˆï¼‰**:
```json
{
  "success": false,
  "message": "ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-50ä¸ªå­—ç¬¦ä¹‹é—´",
  "data": {
    "valid": false,
    "available": false
  }
}
```

**é”™è¯¯ç è¯´æ˜**:
- `ç¼ºå°‘usernameå‚æ•°`: æŸ¥è¯¢å‚æ•°ç¼ºå¤±
- `ç”¨æˆ·åä¸èƒ½ä¸ºç©º`: ç”¨æˆ·åä¸ºç©ºå­—ç¬¦ä¸²
- `ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-50ä¸ªå­—ç¬¦ä¹‹é—´`: é•¿åº¦ä¸ç¬¦åˆè¦æ±‚
- `ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿`: æ ¼å¼ä¸æ­£ç¡®

**æ³¨æ„äº‹é¡¹**:
- æ­¤æ¥å£æ— éœ€è®¤è¯,ä»»ä½•äººéƒ½å¯ä»¥è®¿é—®
- ç”¨æˆ·åæ ¼å¼è¦æ±‚:3-50ä¸ªå­—ç¬¦,åªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿
- valid=falseæ—¶,availableå¿…å®šä¸ºfalse

---

### 11. ä¸Šä¼ ç”¨æˆ·å¤´åƒ

**åŠŸèƒ½ä»‹ç»**: ä¸Šä¼ æˆ–ä¿®æ”¹å½“å‰ç”¨æˆ·çš„å¤´åƒå›¾ç‰‡

**ç‰ˆæœ¬**: v2.6.0

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/users/avatar`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
Content-Type: multipart/form-data
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | é™åˆ¶ |
|--------|------|------|------|------|
| avatar | file | æ˜¯ | å¤´åƒå›¾ç‰‡æ–‡ä»¶ | æœ€å¤§5MBï¼Œæ”¯æŒJPEG/PNG/GIF/WebPæ ¼å¼ |

**å›¾ç‰‡å¤„ç†è¯´æ˜**:
- **è‡ªåŠ¨è£å‰ª**: å¦‚æœå›¾ç‰‡ä¸æ˜¯æ­£æ–¹å½¢ï¼Œä¼šè‡ªåŠ¨å±…ä¸­è£å‰ªä¸ºæ­£æ–¹å½¢
- **è‡ªåŠ¨ç¼©æ”¾**: è£å‰ªåçš„å›¾ç‰‡ä¼šç¼©æ”¾åˆ°200x200åƒç´ 
- **è‡ªåŠ¨å‹ç¼©**: è¾“å‡ºä¸ºJPEGæ ¼å¼ï¼Œè´¨é‡80%
- **æ™ºèƒ½æ›¿æ¢**: å¦‚æœç”¨æˆ·å·²æœ‰å¤´åƒï¼Œä¼šè‡ªåŠ¨åˆ é™¤æ—§æ–‡ä»¶
- **äº‹åŠ¡å›æ»š**: æ•°æ®åº“æ›´æ–°å¤±è´¥æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ é™¤æ–°ä¸Šä¼ çš„æ–‡ä»¶

**è¯·æ±‚ç¤ºä¾‹ï¼ˆä½¿ç”¨cURLï¼‰**:
```bash
curl -X POST "http://localhost:8080/api/v1/users/avatar" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIs..." \
  -F "avatar=@/path/to/photo.jpg"
```

**è¯·æ±‚ç¤ºä¾‹ï¼ˆä½¿ç”¨Postman/Apifoxï¼‰**:
1. é€‰æ‹© `POST` æ–¹æ³•
2. URL: `http://localhost:8080/api/v1/users/avatar`
3. Headers: æ·»åŠ  `Authorization: Bearer {token}`
4. Body: é€‰æ‹© `form-data`
5. æ·»åŠ å­—æ®µ: `avatar` (ç±»å‹: File)ï¼Œé€‰æ‹©å›¾ç‰‡æ–‡ä»¶

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | å¤´åƒä¿¡æ¯ï¼ˆæˆåŠŸæ—¶è¿”å›ï¼‰ |
| data.avatar_url | string | å¤´åƒå®Œæ•´URLï¼ˆå¸¦æœåŠ¡å™¨åœ°å€ï¼‰ |
| data.width | int | å›¾ç‰‡å®½åº¦ï¼ˆå›ºå®š200ï¼‰ |
| data.height | int | å›¾ç‰‡é«˜åº¦ï¼ˆå›ºå®š200ï¼‰ |
| data.file_size | int | æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å¤´åƒä¸Šä¼ æˆåŠŸ",
  "data": {
    "avatar_url": "http://43.142.157.145:8080/uploads/avatars/USR_2025Q4_abc123_1729584512.jpg",
    "width": 200,
    "height": 200,
    "file_size": 45678
  },
  "timestamp": 1729584512
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:

1. **æœªæä¾›è®¤è¯ä»¤ç‰Œ**:
```json
{
  "success": false,
  "message": "æœªæä¾›è®¤è¯ä»¤ç‰Œ",
  "data": null,
  "timestamp": 1729584512
}
```

2. **æœªä¸Šä¼ æ–‡ä»¶**:
```json
{
  "success": false,
  "message": "è¯·ä¸Šä¼ å¤´åƒæ–‡ä»¶",
  "data": null,
  "timestamp": 1729584512
}
```

3. **æ–‡ä»¶è¿‡å¤§**:
```json
{
  "success": false,
  "message": "æ–‡ä»¶å¤§å°è¶…è¿‡é™åˆ¶ï¼ˆæœ€å¤§5MBï¼‰",
  "data": null,
  "timestamp": 1729584512
}
```

4. **æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ**:
```json
{
  "success": false,
  "message": "ä¸æ”¯æŒçš„å›¾ç‰‡æ ¼å¼ï¼Œä»…æ”¯æŒJPEGã€PNGã€GIFã€WebP",
  "data": null,
  "timestamp": 1729584512
}
```

5. **å›¾ç‰‡å°ºå¯¸è¶…é™**:
```json
{
  "success": false,
  "message": "å›¾ç‰‡å°ºå¯¸è¶…è¿‡é™åˆ¶ï¼ˆæœ€å¤§10000x10000ï¼‰",
  "data": null,
  "timestamp": 1729584512
}
```

**é”™è¯¯ç è¯´æ˜**:
- `æœªæä¾›è®¤è¯ä»¤ç‰Œ`: Authorizationå¤´ç¼ºå¤±æˆ–æ ¼å¼é”™è¯¯
- `ä»¤ç‰Œæ— æ•ˆæˆ–å·²è¿‡æœŸ`: JWTéªŒè¯å¤±è´¥
- `è¯·ä¸Šä¼ å¤´åƒæ–‡ä»¶`: è¯·æ±‚ä¸­æœªåŒ…å«avatarå­—æ®µ
- `æ–‡ä»¶ä¸ºç©º`: ä¸Šä¼ çš„æ–‡ä»¶å†…å®¹ä¸ºç©º
- `æ–‡ä»¶å¤§å°è¶…è¿‡é™åˆ¶`: æ–‡ä»¶è¶…è¿‡5MB
- `ä¸æ”¯æŒçš„å›¾ç‰‡æ ¼å¼`: æ–‡ä»¶æ ¼å¼ä¸åœ¨ç™½åå•å†…
- `æ— æ³•åŠ è½½å›¾ç‰‡æ–‡ä»¶`: æ–‡ä»¶å·²æŸåæˆ–ä¸æ˜¯æœ‰æ•ˆå›¾ç‰‡
- `å›¾ç‰‡å°ºå¯¸è¶…è¿‡é™åˆ¶`: å›¾ç‰‡å®½åº¦æˆ–é«˜åº¦è¶…è¿‡10000åƒç´ 
- `ç”¨æˆ·ä¸å­˜åœ¨`: ç”¨æˆ·IDæ— æ•ˆï¼ˆç½•è§æƒ…å†µï¼‰
- `æ›´æ–°æ•°æ®åº“å¤±è´¥`: æ•°æ®åº“æ“ä½œå¤±è´¥ï¼ˆå·²è‡ªåŠ¨å›æ»šï¼‰

**æ³¨æ„äº‹é¡¹**:
1. **é¦–æ¬¡ä¸Šä¼ **ï¼šå¦‚æœç”¨æˆ·ä¹‹å‰æ²¡æœ‰å¤´åƒï¼Œç›´æ¥ä¸Šä¼ å³å¯
2. **ä¿®æ”¹å¤´åƒ**ï¼šå†æ¬¡è°ƒç”¨æ­¤æ¥å£ä¼šè‡ªåŠ¨æ›¿æ¢æ—§å¤´åƒï¼ˆæ—§æ–‡ä»¶ä¼šè¢«åˆ é™¤ï¼‰
3. **URLä½¿ç”¨**ï¼šè¿”å›çš„`avatar_url`æ˜¯å®Œæ•´URLï¼Œå¯ç›´æ¥åœ¨å‰ç«¯ä½¿ç”¨
4. **ç›¸å¯¹è·¯å¾„å­˜å‚¨**ï¼šæ•°æ®åº“ä¸­å­˜å‚¨çš„æ˜¯ç›¸å¯¹è·¯å¾„ï¼ˆå¦‚`/uploads/avatars/USR_xxx.jpg`ï¼‰
5. **ä¸PUT /users/profileçš„åŒºåˆ«**ï¼š
   - `POST /users/avatar` - **æ¨è**ï¼šä¸Šä¼ æ–‡ä»¶ï¼Œè‡ªåŠ¨å¤„ç†å›¾ç‰‡
   - `PUT /users/profile` - **ä»…ç”¨äº**ï¼šæ‰‹åŠ¨è®¾ç½®å¤–éƒ¨URLæˆ–æ¸…ç©ºå¤´åƒ

**ä¸æ›´æ–°ç”¨æˆ·ä¿¡æ¯çš„å¯¹æ¯”**:

| æ“ä½œ | æ¥å£ | ä½¿ç”¨åœºæ™¯ | ç¤ºä¾‹ |
|------|------|---------|------|
| **ä¸Šä¼ å¤´åƒæ–‡ä»¶** | `POST /users/avatar` | ç”¨æˆ·ä»æœ¬åœ°é€‰æ‹©å›¾ç‰‡ä¸Šä¼  | æ‰‹æœºç›¸å†Œã€ç”µè„‘æ–‡ä»¶ |
| **è®¾ç½®å¤–éƒ¨URL** | `PUT /users/profile` | ä½¿ç”¨ç¬¬ä¸‰æ–¹å›¾åºŠURL | å¾®ä¿¡å¤´åƒã€QQå¤´åƒ |
| **æ¸…ç©ºå¤´åƒ** | `PUT /users/profile` | ç§»é™¤å½“å‰å¤´åƒ | `avatar_url: ""` |

**æ–‡ä»¶å‘½åè§„åˆ™**:
```
æ ¼å¼: {ç”¨æˆ·é€»è¾‘ID}_{Unixæ—¶é—´æˆ³}.jpg
ç¤ºä¾‹: USR_2025Q4_abc123_1729584512.jpg

è¯´æ˜:
- ç”¨æˆ·é€»è¾‘ID: å¦‚ USR_2025Q4_abc123
- Unixæ—¶é—´æˆ³: å¦‚ 1729584512
- æ‰©å±•å: å›ºå®šä¸º .jpgï¼ˆç»Ÿä¸€è¾“å‡ºæ ¼å¼ï¼‰
```

**å›¾ç‰‡å¤„ç†æµç¨‹**:
```
1. æ¥æ”¶ä¸Šä¼ æ–‡ä»¶ï¼ˆmultipart/form-dataï¼‰
2. ä¿å­˜ä¸ºä¸´æ—¶æ–‡ä»¶ï¼ˆ/tmp/avatar_xxxï¼‰
3. éªŒè¯æ–‡ä»¶æ ¼å¼å’Œå¤§å°
4. åŠ è½½å›¾ç‰‡æ•°æ®ï¼ˆæ”¯æŒJPEG/PNG/GIF/WebPï¼‰
5. å¦‚æœä¸æ˜¯æ­£æ–¹å½¢ï¼Œå±…ä¸­è£å‰ªä¸ºæ­£æ–¹å½¢
6. ç¼©æ”¾åˆ°200x200åƒç´ 
7. å‹ç¼©ä¿å­˜ä¸ºJPEGï¼ˆè´¨é‡80%ï¼‰
8. åˆ é™¤æ—§å¤´åƒæ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
9. æ›´æ–°æ•°æ®åº“avatar_urlå­—æ®µ
10. åˆ é™¤ä¸´æ—¶æ–‡ä»¶
11. è¿”å›æ–°å¤´åƒURL
```

**å¸¸è§é—®é¢˜**:

**Q1: ä¸Šä¼ çš„å›¾ç‰‡ä¼šå˜å½¢å—ï¼Ÿ**
A: ä¸ä¼šã€‚å¦‚æœä¸Šä¼ çš„å›¾ç‰‡ä¸æ˜¯æ­£æ–¹å½¢ï¼ˆå¦‚800x600ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å±…ä¸­è£å‰ªä¸ºæ­£æ–¹å½¢ï¼ˆ600x600ï¼‰ï¼Œç„¶åç¼©æ”¾åˆ°200x200ã€‚

**Q2: æ”¯æŒå“ªäº›å›¾ç‰‡æ ¼å¼ï¼Ÿ**
A: æ”¯æŒJPEGã€PNGã€GIFã€WebPå››ç§æ ¼å¼ä¸Šä¼ ï¼Œä½†æœ€ç»ˆéƒ½ä¼šè½¬æ¢ä¸ºJPEGæ ¼å¼ä¿å­˜ã€‚

**Q3: ä¸ºä»€ä¹ˆè¿”å›çš„æ–‡ä»¶æ¯”åŸå›¾å°å¾ˆå¤šï¼Ÿ**
A: å› ä¸ºè¿›è¡Œäº†ä»¥ä¸‹ä¼˜åŒ–ï¼š
   - ç¼©æ”¾åˆ°200x200ï¼ˆå‡å°‘åƒç´ ï¼‰
   - JPEGå‹ç¼©ï¼ˆè´¨é‡80%ï¼‰
   - ä¸€èˆ¬1MBçš„åŸå›¾å‹ç¼©åçº¦30-50KB

**Q4: å¦‚ä½•åˆ é™¤å¤´åƒï¼Ÿ**
A: è°ƒç”¨ `PUT /api/v1/users/profile` æ¥å£ï¼Œè®¾ç½® `avatar_url: ""`ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ã€‚

**Q5: å¯ä»¥ç›´æ¥è®¾ç½®URLè€Œä¸ä¸Šä¼ æ–‡ä»¶å—ï¼Ÿ**
A: å¯ä»¥ã€‚ä½¿ç”¨ `PUT /api/v1/users/profile` æ¥å£ï¼Œè®¾ç½® `avatar_url: "https://example.com/avatar.jpg"`ã€‚

---

## å¸–å­ç®¡ç†API

> **ğŸ†• v2.0.0 æ–°å¢**: æ”¯æŒå¤šå›¾ç‰‡å¸–å­ï¼ˆ1-9å¼ å›¾ç‰‡ï¼‰

### 1. åˆ›å»ºå¸–å­

**åŠŸèƒ½ä»‹ç»**: åˆ›å»ºåŒ…å«1-9å¼ å›¾ç‰‡çš„å¸–å­

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/posts`

**æ”¯æŒçš„Content-Type**:
- âœ… `multipart/form-data` - é€‚ç”¨äºWebæµè§ˆå™¨ã€åŸç”Ÿåº”ç”¨çš„æ–‡ä»¶ä¸Šä¼ 
- âœ… `application/json` - é€‚ç”¨äºAPIè°ƒç”¨ã€Base64å›¾ç‰‡ä¸Šä¼  **ğŸ†• v2.4.1**

---

#### æ ¼å¼1: multipart/form-dataï¼ˆæ¨èç”¨äºæ–‡ä»¶ä¸Šä¼ ï¼‰

**è¯·æ±‚å¤´**:
```
Content-Type: multipart/form-data
Authorization: Bearer <access_token>
```

**è¯·æ±‚å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| title | string | æ˜¯ | å¸–å­æ ‡é¢˜ï¼ˆ1-255å­—ç¬¦ï¼‰ |
| description | string | å¦ | å¸–å­é…æ–‡ï¼ˆæœ€å¤š1000å­—ç¬¦ï¼‰ |
| imageFiles | file[] | æ˜¯ | å›¾ç‰‡æ–‡ä»¶æ•°ç»„ï¼ˆ1-9å¼ ï¼Œæ¯å¼ æœ€å¤§5MBï¼‰ |
| tags | string[] | å¦ | æ ‡ç­¾æ•°ç»„ï¼ˆæœ€å¤š5ä¸ªï¼‰ |

**è¯·æ±‚ç¤ºä¾‹ï¼ˆcurlï¼‰**:
```bash
curl -X POST "http://localhost:8080/api/v1/posts" \
  -H "Authorization: Bearer <token>" \
  -F "title=ç¾å¥½çš„ä¸€å¤©" \
  -F "description=ä»Šå¤©å¤©æ°”çœŸå¥½" \
  -F "tags=é£æ™¯" \
  -F "tags=æ—…è¡Œ" \
  -F "imageFiles=@photo1.jpg" \
  -F "imageFiles=@photo2.jpg" \
  -F "imageFiles=@photo3.jpg"
```

---

#### æ ¼å¼2: application/jsonï¼ˆé€‚ç”¨äºBase64å›¾ç‰‡ï¼‰ **ğŸ†• v2.4.1**

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
Authorization: Bearer <access_token>
```

**è¯·æ±‚å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| title | string | æ˜¯ | å¸–å­æ ‡é¢˜ï¼ˆ1-255å­—ç¬¦ï¼‰ |
| description | string | å¦ | å¸–å­é…æ–‡ï¼ˆæœ€å¤š1000å­—ç¬¦ï¼‰ |
| images | object[] | æ˜¯ | å›¾ç‰‡æ•°ç»„ï¼ˆ1-9å¼ ï¼‰ |
| images[].filename | string | å¦ | æ–‡ä»¶åï¼ˆé»˜è®¤: image.jpgï¼‰ |
| images[].content_type | string | å¦ | MIMEç±»å‹ï¼ˆé»˜è®¤: image/jpegï¼‰ |
| images[].data | string | æ˜¯ | Base64ç¼–ç çš„å›¾ç‰‡æ•°æ® |
| tags | string[] | å¦ | æ ‡ç­¾æ•°ç»„ï¼ˆæœ€å¤š5ä¸ªï¼‰ |

**Base64æ•°æ®æ ¼å¼**:
- æ”¯æŒData URIæ ¼å¼: `data:image/jpeg;base64,/9j/4AAQSkZJRg...`
- æ”¯æŒçº¯Base64æ ¼å¼: `/9j/4AAQSkZJRg...`

**è¯·æ±‚ç¤ºä¾‹ï¼ˆJSONï¼‰**:
```json
{
  "title": "ç¾å¥½çš„ä¸€å¤©",
  "description": "ä»Šå¤©å¤©æ°”çœŸå¥½ï¼Œæ‹äº†å‡ å¼ ç…§ç‰‡åˆ†äº«ç»™å¤§å®¶",
  "tags": ["é£æ™¯", "æ—…è¡Œ", "æ‘„å½±"],
  "images": [
    {
      "filename": "photo1.jpg",
      "content_type": "image/jpeg",
      "data": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD..."
    },
    {
      "filename": "photo2.png",
      "content_type": "image/png",
      "data": "iVBORw0KGgoAAAANSUhEUgAA..."
    }
  ]
}
```

---

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.post_id | string | å¸–å­ä¸šåŠ¡ID |
| data.user_id | integer | å‘å¸ƒç”¨æˆ·ID |
| data.title | string | å¸–å­æ ‡é¢˜ |
| data.description | string | å¸–å­é…æ–‡ |
| data.image_count | integer | å›¾ç‰‡æ•°é‡ |
| data.like_count | integer | ç‚¹èµæ•° |
| data.favorite_count | integer | æ”¶è—æ•° |
| data.view_count | integer | æµè§ˆæ•° |
| data.status | string | å®¡æ ¸çŠ¶æ€ï¼ˆPENDING/APPROVED/REJECTEDï¼‰ |
| data.create_time | integer | åˆ›å»ºæ—¶é—´ï¼ˆUnixæ—¶é—´æˆ³ï¼‰ |
| data.update_time | integer | æ›´æ–°æ—¶é—´ï¼ˆUnixæ—¶é—´æˆ³ï¼‰ |
| data.images | array | å›¾ç‰‡æ•°ç»„ |
| data.images[].image_id | string | å›¾ç‰‡ä¸šåŠ¡ID |
| data.images[].post_id | integer | æ‰€å±å¸–å­ç‰©ç†ID |
| data.images[].display_order | integer | æ˜¾ç¤ºé¡ºåºï¼ˆ1-9ï¼‰ |
| data.images[].file_url | string | åŸå›¾URLè·¯å¾„ |
| data.images[].thumbnail_url | string | ç¼©ç•¥å›¾URLè·¯å¾„ |
| data.images[].file_size | integer | æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ |
| data.images[].width | integer | å›¾ç‰‡å®½åº¦ï¼ˆåƒç´ ï¼‰ |
| data.images[].height | integer | å›¾ç‰‡é«˜åº¦ï¼ˆåƒç´ ï¼‰ |
| data.images[].mime_type | string | MIMEç±»å‹ |
| data.images[].create_time | integer | åˆ›å»ºæ—¶é—´ï¼ˆUnixæ—¶é—´æˆ³ï¼‰ |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å¸–å­åˆ›å»ºæˆåŠŸ",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "user_id": 1,
    "title": "ç¾å¥½çš„ä¸€å¤©",
    "description": "ä»Šå¤©å¤©æ°”çœŸå¥½ï¼Œæ‹äº†å‡ å¼ ç…§ç‰‡åˆ†äº«ç»™å¤§å®¶",
    "image_count": 3,
    "like_count": 0,
    "favorite_count": 0,
    "view_count": 0,
    "status": "APPROVED",
    "create_time": 1728360600,
    "update_time": 1728360600,
    "images": [
      {
        "image_id": "IMG_2025Q4_XYZ001",
        "post_id": 1,
        "display_order": 1,
        "file_url": "http://43.142.157.145:8080/uploads/images/IMG_2025Q4_XYZ001.jpg",
        "thumbnail_url": "http://43.142.157.145:8080/uploads/thumbnails/IMG_2025Q4_XYZ001_thumb.jpg",
        "file_size": 1024000,
        "width": 1920,
        "height": 1080,
        "mime_type": "image/jpeg",
        "create_time": 1728360600
      },
      {
        "image_id": "IMG_2025Q4_XYZ002",
        "post_id": 1,
        "display_order": 2,
        "file_url": "http://43.142.157.145:8080/uploads/images/IMG_2025Q4_XYZ002.jpg",
        "thumbnail_url": "http://43.142.157.145:8080/uploads/thumbnails/IMG_2025Q4_XYZ002_thumb.jpg",
        "file_size": 856000,
        "width": 1920,
        "height": 1080,
        "mime_type": "image/jpeg",
        "create_time": 1728360600
      },
      {
        "image_id": "IMG_2025Q4_XYZ003",
        "post_id": 1,
        "display_order": 3,
        "file_url": "http://43.142.157.145:8080/uploads/images/IMG_2025Q4_XYZ003.jpg",
        "thumbnail_url": "http://43.142.157.145:8080/uploads/thumbnails/IMG_2025Q4_XYZ003_thumb.jpg",
        "file_size": 920000,
        "width": 1920,
        "height": 1080,
        "mime_type": "image/jpeg",
        "create_time": 1728360600
      }
    ]
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `400 Bad Request`: å‚æ•°é”™è¯¯ï¼ˆæ ‡é¢˜ä¸ºç©ºã€å›¾ç‰‡æ•°é‡ä¸ç¬¦åˆè¦æ±‚ç­‰ï¼‰
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 2. è·å–å¸–å­è¯¦æƒ…

**åŠŸèƒ½ä»‹ç»**: è·å–å¸–å­çš„å®Œæ•´ä¿¡æ¯ï¼ˆåŒ…å«æ‰€æœ‰å›¾ç‰‡ï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id`

**è¯·æ±‚å¤´**:
```
æ— éœ€è®¤è¯
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | å¸–å­æ•°æ®å¯¹è±¡ï¼ˆåŒ…å«å®Œæ•´çš„imagesæ•°ç»„ï¼‰ |

**data.postå­—æ®µè¯´æ˜**:
| å­—æ®µå | ç±»å‹ | è¯´æ˜ | ç‰ˆæœ¬ |
|--------|------|------|------|
| post_id | string | å¸–å­ä¸šåŠ¡ID | v2.0.0 |
| user_id | string | å‘å¸–ç”¨æˆ·é€»è¾‘ID | v2.0.0 |
| username | string | å‘å¸–ç”¨æˆ·æ˜µç§° | ğŸ†• v2.5.1 |
| title | string | å¸–å­æ ‡é¢˜ | v2.0.0 |
| description | string | å¸–å­é…æ–‡ | v2.0.0 |
| image_count | int | å›¾ç‰‡æ•°é‡ | v2.0.0 |
| like_count | int | ç‚¹èµæ•° | v2.0.0 |
| favorite_count | int | æ”¶è—æ•° | v2.0.0 |
| view_count | int | æµè§ˆæ•° | v2.0.0 |
| status | string | å®¡æ ¸çŠ¶æ€ | v2.0.0 |
| create_time | int64 | åˆ›å»ºæ—¶é—´æˆ³ | v2.0.0 |
| update_time | int64 | æ›´æ–°æ—¶é—´æˆ³ | v2.0.0 |
| images | array | å›¾ç‰‡åˆ—è¡¨ | v2.0.0 |

**è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "post": {
      "post_id": "POST_2025Q4_ABC123",
      "user_id": "USR_2025Q4_DEF456",
      "username": "alice_photo",
      "title": "ç¾å¥½çš„ä¸€å¤©",
      "description": "ä»Šå¤©å¤©æ°”çœŸå¥½ï¼Œæ‹äº†å‡ å¼ ç…§ç‰‡åˆ†äº«ç»™å¤§å®¶",
      "image_count": 3,
      "like_count": 10,
      "favorite_count": 5,
      "view_count": 100,
      "status": "APPROVED",
      "create_time": 1728360600,
      "update_time": 1728360600,
      "images": [
        {
          "image_id": "IMG_2025Q4_XYZ001",
          "display_order": 1,
          "file_url": "http://43.142.157.145:8080/uploads/images/IMG_2025Q4_XYZ001.jpg",
          "thumbnail_url": "http://43.142.157.145:8080/uploads/thumbnails/IMG_2025Q4_XYZ001_thumb.jpg",
          "file_size": 1024000,
          "width": 1920,
          "height": 1080,
          "mime_type": "image/jpeg",
          "create_time": 1728360600
        }
      ]
    }
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç **:
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 3. æ›´æ–°å¸–å­

**åŠŸèƒ½ä»‹ç»**: æ›´æ–°å¸–å­çš„æ ‡é¢˜å’Œé…æ–‡ï¼ˆåªæœ‰ä½œè€…å¯ä»¥æ›´æ–°ï¼‰

**è¯·æ±‚æ–¹å¼**: `PUT`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
Authorization: Bearer <access_token>
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| title | string | æ˜¯ | æ–°æ ‡é¢˜ï¼ˆ1-255å­—ç¬¦ï¼‰ |
| description | string | å¦ | æ–°é…æ–‡ï¼ˆæœ€å¤š1000å­—ç¬¦ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "title": "æ›´æ–°åçš„æ ‡é¢˜",
  "description": "æ›´æ–°åçš„é…æ–‡"
}
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |

**è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å¸–å­æ›´æ–°æˆåŠŸ",
  "timestamp": 1696752600
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `403 Forbidden`: æ— æƒé™ï¼ˆä¸æ˜¯ä½œè€…ï¼‰
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `400 Bad Request`: å‚æ•°é”™è¯¯
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 4. åˆ é™¤å¸–å­

**åŠŸèƒ½ä»‹ç»**: åˆ é™¤å¸–å­åŠå…¶æ‰€æœ‰å›¾ç‰‡ï¼ˆåªæœ‰ä½œè€…å¯ä»¥åˆ é™¤ï¼‰

**è¯·æ±‚æ–¹å¼**: `DELETE`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer <access_token>
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |

**è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å¸–å­åˆ é™¤æˆåŠŸ",
  "timestamp": 1696752600
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `403 Forbidden`: æ— æƒé™ï¼ˆä¸æ˜¯ä½œè€…ï¼‰
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 5. è·å–Feedæµ

**åŠŸèƒ½ä»‹ç»**: è·å–æœ€æ–°å¸–å­åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/posts`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer <access_token>  (å¯é€‰)
```

**è®¤è¯è¯´æ˜**:
- **æ¸¸å®¢æ¨¡å¼**: ä¸æä¾›Tokenæˆ–Tokenæ— æ•ˆæ—¶ï¼Œè‡ªåŠ¨é™çº§ä¸ºæ¸¸å®¢æ¨¡å¼ï¼Œ`has_liked`å’Œ`has_favorited`å­—æ®µè¿”å›`false`
- **ç™»å½•æ¨¡å¼**: æä¾›æœ‰æ•ˆTokenæ—¶ï¼Œè¿”å›å½“å‰ç”¨æˆ·å¯¹æ¯ä¸ªå¸–å­çš„çœŸå®äº’åŠ¨çŠ¶æ€

**æŸ¥è¯¢å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | int | å¦ | é¡µç ï¼ˆé»˜è®¤1ï¼‰ |
| page_size | int | å¦ | æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼Œæœ€å¤§100ï¼‰ |

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.posts | array | å¸–å­åˆ—è¡¨ï¼ˆåŒ…å«imagesã€authorã€äº’åŠ¨çŠ¶æ€ï¼‰ |
| data.posts[].author | object | **æ–°å¢** å¸–å­ä½œè€…ä¿¡æ¯ |
| data.posts[].author.user_id | string | **æ–°å¢** ä½œè€…é€»è¾‘ç”¨æˆ·ID (å¦‚"USR_2025Q4_ABC123") |
| data.posts[].author.username | string | **æ–°å¢** ä½œè€…ç”¨æˆ·å |
| data.posts[].author.avatar_url | string | **æ–°å¢** ä½œè€…å¤´åƒURL (å®Œæ•´URL) |
| data.posts[].has_liked | boolean | **æ–°å¢** å½“å‰ç”¨æˆ·æ˜¯å¦å·²ç‚¹èµï¼ˆæ¸¸å®¢å›ºå®šè¿”å›falseï¼‰ |
| data.posts[].has_favorited | boolean | **æ–°å¢** å½“å‰ç”¨æˆ·æ˜¯å¦å·²æ”¶è—ï¼ˆæ¸¸å®¢å›ºå®šè¿”å›falseï¼‰ |
| data.total | integer | æ€»å¸–å­æ•° |
| data.page | integer | å½“å‰é¡µç  |
| data.page_size | integer | æ¯é¡µæ•°é‡ |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**è¿”å›ç¤ºä¾‹**:

**æ¸¸å®¢æ¨¡å¼ï¼ˆæ— Tokenï¼‰**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "posts": [
      {
        "post_id": "POST_2025Q4_ABC123",
        "user_id": 1,
        "title": "ç¾å¥½çš„ä¸€å¤©",
        "description": "ä»Šå¤©å¤©æ°”çœŸå¥½",
        "image_count": 3,
        "like_count": 10,
        "favorite_count": 5,
        "view_count": 100,
        "status": "APPROVED",
        "create_time": 1728360600,
        "update_time": 1728360600,
        "author": {
          "user_id": "USR_2025Q4_ABC123",
          "username": "alice",
          "avatar_url": "http://43.142.157.145:8080/uploads/avatars/alice.jpg"
        },
        "has_liked": false,
        "has_favorited": false,
        "images": [
          {
            "image_id": "IMG_2025Q4_XYZ001",
            "post_id": 1,
            "display_order": 1,
            "file_url": "http://43.142.157.145:8080/uploads/images/IMG_2025Q4_XYZ001.jpg",
            "thumbnail_url": "http://43.142.157.145:8080/uploads/thumbnails/IMG_2025Q4_XYZ001_thumb.jpg",
            "file_size": 1024000,
            "width": 1920,
            "height": 1080,
            "mime_type": "image/jpeg",
            "create_time": 1728360600
          }
        ]
      }
    ],
    "total": 100,
    "page": 1,
    "page_size": 20
  },
  "timestamp": 1728360600
}
```

**ç™»å½•æ¨¡å¼ï¼ˆå¸¦Tokenï¼‰**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "posts": [
      {
        "post_id": "POST_2025Q4_ABC123",
        "user_id": 1,
        "title": "ç¾å¥½çš„ä¸€å¤©",
        "description": "ä»Šå¤©å¤©æ°”çœŸå¥½",
        "image_count": 3,
        "like_count": 10,
        "favorite_count": 5,
        "view_count": 100,
        "status": "APPROVED",
        "create_time": 1728360600,
        "update_time": 1728360600,
        "author": {
          "user_id": "USR_2025Q4_ABC123",
          "username": "alice",
          "avatar_url": "http://43.142.157.145:8080/uploads/avatars/alice.jpg"
        },
        "has_liked": true,
        "has_favorited": false,
        "images": [
          {
            "image_id": "IMG_2025Q4_XYZ001",
            "post_id": 1,
            "display_order": 1,
            "file_url": "http://43.142.157.145:8080/uploads/images/IMG_2025Q4_XYZ001.jpg",
            "thumbnail_url": "http://43.142.157.145:8080/uploads/thumbnails/IMG_2025Q4_XYZ001_thumb.jpg",
            "file_size": 1024000,
            "width": 1920,
            "height": 1080,
            "mime_type": "image/jpeg",
            "create_time": 1728360600
          }
        ]
      }
    ],
    "total": 100,
    "page": 1,
    "page_size": 20
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç **:
- `400 Bad Request`: å‚æ•°é”™è¯¯
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 6. è·å–ç”¨æˆ·å¸–å­åˆ—è¡¨

**åŠŸèƒ½ä»‹ç»**: è·å–æŒ‡å®šç”¨æˆ·çš„æ‰€æœ‰å¸–å­ï¼ˆåˆ†é¡µï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/users/:user_id/posts`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer <access_token>  (å¯é€‰)
```

**è®¤è¯è¯´æ˜**:
- **æ¸¸å®¢æ¨¡å¼**: ä¸æä¾›Tokenæˆ–Tokenæ— æ•ˆæ—¶ï¼Œè‡ªåŠ¨é™çº§ä¸ºæ¸¸å®¢æ¨¡å¼ï¼Œ`has_liked`å’Œ`has_favorited`å­—æ®µè¿”å›`false`
- **ç™»å½•æ¨¡å¼**: æä¾›æœ‰æ•ˆTokenæ—¶ï¼Œè¿”å›å½“å‰ç”¨æˆ·å¯¹æ¯ä¸ªå¸–å­çš„çœŸå®äº’åŠ¨çŠ¶æ€

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| user_id | string/int | æ˜¯ | ç”¨æˆ·ID(æ”¯æŒé€»è¾‘IDæˆ–ç‰©ç†ID) | "USR_2025Q4_ABC123" æˆ– "7" |

**æŸ¥è¯¢å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| page | int | å¦ | é¡µç ï¼ˆé»˜è®¤1ï¼‰ | 1 |
| page_size | int | å¦ | æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼Œæœ€å¤§100ï¼‰ | 20 |

**å‚æ•°è¯´æ˜**:
- `user_id`: 
  - âœ… **æ¨è**: ä½¿ç”¨é€»è¾‘ID (å¦‚`USR_2025Q4_ABC123`)
  - âš ï¸ **å…¼å®¹**: ä¹Ÿæ”¯æŒç‰©ç†ID (å¦‚`7`),ä½†ä¸æ¨è
  - ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«å‚æ•°ç±»å‹å¹¶è¿›è¡Œç›¸åº”å¤„ç†

**è¯·æ±‚ç¤ºä¾‹**:
```
ç¤ºä¾‹1: ä½¿ç”¨é€»è¾‘ID (æ¨è)
GET /api/v1/users/USR_2025Q4_ABC123/posts?page=1&page_size=10

ç¤ºä¾‹2: ä½¿ç”¨ç‰©ç†ID (å…¼å®¹)
GET /api/v1/users/7/posts?page=1&page_size=10
```

**è¿”å›å‚æ•°**: åŒ"è·å–Feedæµ"ï¼ˆåŒ…å«authorã€has_likedã€has_favoritedå­—æ®µï¼‰

**é”™è¯¯ç **:
- `400 Bad Request`: å‚æ•°é”™è¯¯
- `404 Not Found`: ç”¨æˆ·ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 7. æ·»åŠ å›¾ç‰‡åˆ°å¸–å­

**åŠŸèƒ½ä»‹ç»**: å‘ç°æœ‰å¸–å­æ·»åŠ å›¾ç‰‡ï¼ˆæœ€å¤š9å¼ ï¼‰

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id/images`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
Authorization: Bearer <access_token>
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| imageFile | string | æ˜¯ | å›¾ç‰‡æ–‡ä»¶è·¯å¾„ |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "imageFile": "/tmp/upload_new123.jpg"
}
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |

**è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å›¾ç‰‡æ·»åŠ æˆåŠŸ",
  "timestamp": 1696752600
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `403 Forbidden`: æ— æƒé™ï¼ˆä¸æ˜¯ä½œè€…ï¼‰
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `400 Bad Request`: å›¾ç‰‡æ•°é‡å·²è¾¾ä¸Šé™ï¼ˆ9å¼ ï¼‰
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 8. ä»å¸–å­åˆ é™¤å›¾ç‰‡

**åŠŸèƒ½ä»‹ç»**: ä»å¸–å­ä¸­åˆ é™¤æŒ‡å®šå›¾ç‰‡ï¼ˆè‡³å°‘ä¿ç•™1å¼ ï¼‰

**è¯·æ±‚æ–¹å¼**: `DELETE`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id/images/:image_id`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer <access_token>
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |
| image_id | string | æ˜¯ | å›¾ç‰‡ä¸šåŠ¡ID |

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |

**è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å›¾ç‰‡åˆ é™¤æˆåŠŸ",
  "timestamp": 1696752600
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `403 Forbidden`: æ— æƒé™ï¼ˆä¸æ˜¯ä½œè€…ï¼‰
- `404 Not Found`: å¸–å­æˆ–å›¾ç‰‡ä¸å­˜åœ¨
- `400 Bad Request`: ä¸èƒ½åˆ é™¤æœ€åä¸€å¼ å›¾ç‰‡
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 9. è°ƒæ•´å›¾ç‰‡é¡ºåº

**åŠŸèƒ½ä»‹ç»**: è°ƒæ•´å¸–å­ä¸­å›¾ç‰‡çš„æ˜¾ç¤ºé¡ºåº

**è¯·æ±‚æ–¹å¼**: `PUT`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id/images/order`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
Authorization: Bearer <access_token>
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| imageIds | array | æ˜¯ | å›¾ç‰‡IDæ•°ç»„ï¼ˆæŒ‰æ–°é¡ºåºæ’åˆ—ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "imageIds": [
    "IMG_2025Q4_XYZ003",
    "IMG_2025Q4_XYZ001",
    "IMG_2025Q4_XYZ002"
  ]
}
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |

**è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å›¾ç‰‡é¡ºåºè°ƒæ•´æˆåŠŸ",
  "timestamp": 1696752600
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `403 Forbidden`: æ— æƒé™ï¼ˆä¸æ˜¯ä½œè€…ï¼‰
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `400 Bad Request`: å›¾ç‰‡IDæ•°é‡ä¸åŒ¹é…æˆ–åŒ…å«æ— æ•ˆID
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

## ç‚¹èµç›¸å…³API

> **ğŸ†• v2.2.0 æ–°å¢**: æ”¯æŒå¸–å­ç‚¹èµåŠŸèƒ½

### 1. ç‚¹èµå¸–å­

**åŠŸèƒ½ä»‹ç»**: ä¸ºå¸–å­ç‚¹èµ

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/api/v1/posts/:post_id/like`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.post_id | string | å¸–å­ID |
| data.like_count | integer | ç‚¹èµæ€»æ•° |
| data.has_liked | boolean | å½“å‰ç”¨æˆ·æ˜¯å¦å·²ç‚¹èµ |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "ç‚¹èµæˆåŠŸ",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "like_count": 11,
    "has_liked": true
  },
  "timestamp": 1728360600
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**ï¼ˆå·²ç‚¹èµï¼‰:
```json
{
  "success": false,
  "message": "æ‚¨å·²ç»ç‚¹èµè¿‡è¯¥å¸–å­",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "like_count": 10,
    "has_liked": true
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `400 Bad Request`: å·²ç»ç‚¹èµè¿‡è¯¥å¸–å­
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 2. å–æ¶ˆç‚¹èµ

**åŠŸèƒ½ä»‹ç»**: å–æ¶ˆå¯¹å¸–å­çš„ç‚¹èµ

**è¯·æ±‚æ–¹å¼**: `DELETE`

**è¯·æ±‚è·¯å¾„**: `/api/v1/posts/:post_id/like`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.post_id | string | å¸–å­ID |
| data.like_count | integer | ç‚¹èµæ€»æ•° |
| data.has_liked | boolean | å½“å‰ç”¨æˆ·æ˜¯å¦å·²ç‚¹èµ |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å–æ¶ˆç‚¹èµæˆåŠŸ",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "like_count": 9,
    "has_liked": false
  },
  "timestamp": 1728360600
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**ï¼ˆæœªç‚¹èµï¼‰:
```json
{
  "success": false,
  "message": "æ‚¨å°šæœªç‚¹èµè¯¥å¸–å­",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "like_count": 10,
    "has_liked": false
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `400 Bad Request`: å°šæœªç‚¹èµè¯¥å¸–å­
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 3. æŸ¥è¯¢ç‚¹èµçŠ¶æ€

**åŠŸèƒ½ä»‹ç»**: æŸ¥è¯¢å½“å‰ç”¨æˆ·å¯¹æŒ‡å®šå¸–å­çš„ç‚¹èµçŠ¶æ€

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/api/v1/posts/:post_id/like/status`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.post_id | string | å¸–å­ID |
| data.has_liked | boolean | å½“å‰ç”¨æˆ·æ˜¯å¦å·²ç‚¹èµ |
| data.like_count | integer | å¸–å­æ€»ç‚¹èµæ•° |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "has_liked": true,
    "like_count": 10
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

## æ”¶è—ç›¸å…³API

> **ğŸ†• v2.2.0 æ–°å¢**: æ”¯æŒå¸–å­æ”¶è—åŠŸèƒ½

### 1. æ”¶è—å¸–å­

**åŠŸèƒ½ä»‹ç»**: æ”¶è—å¸–å­

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/api/v1/posts/:post_id/favorite`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.post_id | string | å¸–å­ID |
| data.favorite_count | integer | æ”¶è—æ€»æ•° |
| data.has_favorited | boolean | å½“å‰ç”¨æˆ·æ˜¯å¦å·²æ”¶è— |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æ”¶è—æˆåŠŸ",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "favorite_count": 6,
    "has_favorited": true
  },
  "timestamp": 1728360600
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**ï¼ˆå·²æ”¶è—ï¼‰:
```json
{
  "success": false,
  "message": "æ‚¨å·²ç»æ”¶è—è¿‡è¯¥å¸–å­",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "favorite_count": 5,
    "has_favorited": true
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `400 Bad Request`: å·²ç»æ”¶è—è¿‡è¯¥å¸–å­
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 2. å–æ¶ˆæ”¶è—

**åŠŸèƒ½ä»‹ç»**: å–æ¶ˆæ”¶è—å¸–å­

**è¯·æ±‚æ–¹å¼**: `DELETE`

**è¯·æ±‚è·¯å¾„**: `/api/v1/posts/:post_id/favorite`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.post_id | string | å¸–å­ID |
| data.favorite_count | integer | æ”¶è—æ€»æ•° |
| data.has_favorited | boolean | å½“å‰ç”¨æˆ·æ˜¯å¦å·²æ”¶è— |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å–æ¶ˆæ”¶è—æˆåŠŸ",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "favorite_count": 4,
    "has_favorited": false
  },
  "timestamp": 1728360600
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**ï¼ˆæœªæ”¶è—ï¼‰:
```json
{
  "success": false,
  "message": "æ‚¨å°šæœªæ”¶è—è¯¥å¸–å­",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "favorite_count": 5,
    "has_favorited": false
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `400 Bad Request`: å°šæœªæ”¶è—è¯¥å¸–å­
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 3. æŸ¥è¯¢æ”¶è—çŠ¶æ€

**åŠŸèƒ½ä»‹ç»**: æŸ¥è¯¢å½“å‰ç”¨æˆ·å¯¹æŒ‡å®šå¸–å­çš„æ”¶è—çŠ¶æ€

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/api/v1/posts/:post_id/favorite/status`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.post_id | string | å¸–å­ID |
| data.has_favorited | boolean | å½“å‰ç”¨æˆ·æ˜¯å¦å·²æ”¶è— |
| data.favorite_count | integer | å¸–å­æ€»æ”¶è—æ•° |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "has_favorited": true,
    "favorite_count": 5
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 4. è·å–ç”¨æˆ·æ”¶è—åˆ—è¡¨

**åŠŸèƒ½ä»‹ç»**: è·å–å½“å‰ç”¨æˆ·çš„æ”¶è—å¸–å­åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰

**ç‰ˆæœ¬**: v2.7.0 **ğŸ”¥ æ–°å¢æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–**

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/api/v1/my/favorites`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}  (å¿…éœ€)
```

**è®¤è¯è¯´æ˜**:
- **å¿…éœ€è®¤è¯**: å¿…é¡»æä¾›æœ‰æ•ˆTokenï¼Œæ— Tokenæˆ–Tokenæ— æ•ˆè¿”å›401é”™è¯¯
- **ä¸æ”¯æŒæ¸¸å®¢**: æ”¶è—åˆ—è¡¨ä»…å¯¹ç™»å½•ç”¨æˆ·å¯è§ï¼Œä¸æ”¯æŒæ¸¸å®¢è®¿é—®

**æŸ¥è¯¢å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | integer | å¦ | é¡µç ï¼ˆé»˜è®¤1ï¼‰ |
| page_size | integer | å¦ | æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼Œæœ€å¤§100ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/v1/my/favorites?page=1&page_size=20
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.posts | array | æ”¶è—çš„å¸–å­åˆ—è¡¨ï¼ˆåŒ…å«å®Œæ•´å›¾ç‰‡ä¿¡æ¯ï¼‰ |
| data.posts[].author | object | **ğŸ†• v2.7.0** å¸–å­ä½œè€…ä¿¡æ¯ |
| data.posts[].author.user_id | string | **ğŸ†• v2.7.0** ä½œè€…é€»è¾‘ç”¨æˆ·ID |
| data.posts[].author.username | string | **ğŸ†• v2.7.0** ä½œè€…ç”¨æˆ·å |
| data.posts[].author.avatar_url | string | **ğŸ†• v2.7.0** ä½œè€…å¤´åƒURLï¼ˆå®Œæ•´URLï¼‰ |
| data.posts[].has_liked | boolean | **ğŸ†• v2.7.0** å½“å‰ç”¨æˆ·æ˜¯å¦å·²ç‚¹èµ |
| data.posts[].has_favorited | boolean | **ğŸ†• v2.7.0** å½“å‰ç”¨æˆ·æ˜¯å¦å·²æ”¶è—ï¼ˆå›ºå®šä¸ºtrueï¼‰ |
| data.total | integer | æ€»æ”¶è—æ•° |
| data.page | integer | å½“å‰é¡µç  |
| data.page_size | integer | æ¯é¡µæ•°é‡ |
| data.total_pages | integer | æ€»é¡µæ•° |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "posts": [
      {
        "post_id": "POST_2025Q4_ABC123",
        "user_id": "USR_2025Q4_DEF456",
        "title": "ç¾å¥½çš„ä¸€å¤©",
        "description": "ä»Šå¤©å¤©æ°”çœŸå¥½",
        "image_count": 3,
        "like_count": 10,
        "favorite_count": 5,
        "view_count": 100,
        "status": "APPROVED",
        "create_time": 1728360600,
        "update_time": 1728360600,
        "cover_image_url": "http://43.142.157.145:8080/uploads/thumbnails/IMG_xxx_thumb.jpg",
        "author": {
          "user_id": "USR_2025Q4_DEF456",
          "username": "alice",
          "avatar_url": "http://43.142.157.145:8080/uploads/avatars/alice.jpg"
        },
        "has_liked": true,
        "has_favorited": true,
        "images": [
          {
            "image_id": "IMG_2025Q4_XYZ001",
            "post_id": 1,
            "display_order": 1,
            "file_url": "http://43.142.157.145:8080/uploads/images/IMG_2025Q4_XYZ001.jpg",
            "thumbnail_url": "http://43.142.157.145:8080/uploads/thumbnails/IMG_2025Q4_XYZ001_thumb.jpg",
            "file_size": 1024000,
            "width": 1920,
            "height": 1080,
            "mime_type": "image/jpeg",
            "create_time": 1728360600
          }
        ]
      }
    ],
    "total": 15,
    "page": 1,
    "page_size": 20,
    "total_pages": 1
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `400 Bad Request`: å‚æ•°é”™è¯¯
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

**æ€§èƒ½ä¼˜åŒ–** (v2.7.0):
- âœ… æ‰¹é‡æŸ¥è¯¢ä½œè€…ä¿¡æ¯ï¼šä½¿ç”¨SQL INä¸€æ¬¡æŸ¥è¯¢æ‰€æœ‰ä½œè€…
- âœ… æ‰¹é‡æŸ¥è¯¢ç‚¹èµçŠ¶æ€ï¼šä½¿ç”¨SQL INä¸€æ¬¡æŸ¥è¯¢æ‰€æœ‰ç‚¹èµçŠ¶æ€
- âœ… æŸ¥è¯¢æ¬¡æ•°ä¼˜åŒ–ï¼š20æ¡è®°å½•ä»41æ¬¡æŸ¥è¯¢é™è‡³3æ¬¡æŸ¥è¯¢ï¼ˆâ¬‡ï¸92.7%ï¼‰
- âœ… å“åº”æ—¶é—´ä¼˜åŒ–ï¼šP99å“åº”æ—¶é—´ < 100ms

**æ³¨æ„äº‹é¡¹**:
- `has_favorited`å­—æ®µå›ºå®šä¸º`true`ï¼Œå› ä¸ºè¿™æ˜¯æ”¶è—åˆ—è¡¨
- `has_liked`å­—æ®µåæ˜ å½“å‰ç”¨æˆ·å¯¹è¯¥å¸–å­çš„çœŸå®ç‚¹èµçŠ¶æ€
- `author`å­—æ®µå§‹ç»ˆå­˜åœ¨ï¼Œå³ä½¿ä½œè€…ä¿¡æ¯ç¼ºå¤±ï¼ˆé™çº§ä¸º"Unknown"ï¼‰

---

## åº”ç”¨å†…åˆ†äº«API

> **ğŸ†• v2.10.0 æ–°å¢**: æ”¯æŒåº”ç”¨å†…åˆ†äº«åŠŸèƒ½ï¼Œç”¨æˆ·å¯å°†å¸–å­åˆ†äº«ç»™äº’å…³å¥½å‹

### 1. åˆ›å»ºåº”ç”¨å†…åˆ†äº«

**åŠŸèƒ½ä»‹ç»**: å°†å¸–å­åˆ†äº«ç»™äº’ç›¸å…³æ³¨çš„å¥½å‹ï¼Œæ”¯æŒæ·»åŠ åˆ†äº«é™„è¨€

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/shares/posts`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡IDï¼ˆå¦‚"POST_2025Q4_ABC123"ï¼‰ |
| receiver_id | string | æ˜¯ | æ¥æ”¶è€…ä¸šåŠ¡IDï¼ˆå¦‚"USR_2025Q4_XYZ789"ï¼‰ |
| share_message | string | å¦ | åˆ†äº«é™„è¨€ï¼ˆæœ€å¤š500å­—ç¬¦ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "post_id": "POST_2025Q4_PtkL9z",
  "receiver_id": "USR_2025Q4_Z35Gd6",
  "share_message": "è¿™ä¸ªå¸–å­å¤ªæ£’äº†,æ¨èç»™ä½ !"
}
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.share_id | string | åˆ†äº«IDï¼ˆæ ¼å¼ï¼šSHR_2025Q4_XXXXXXï¼‰ |
| data.create_time | integer | åˆ›å»ºæ—¶é—´æˆ³ |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "åˆ†äº«æˆåŠŸ",
  "data": {
    "share_id": "SHR_2025Q4_OJNUSL",
    "create_time": 1761139752
  },
  "timestamp": 1761139752
}
```

**é”™è¯¯å“åº”ç¤ºä¾‹**:
```json
{
  "success": false,
  "message": "åªèƒ½åˆ†äº«ç»™äº’ç›¸å…³æ³¨çš„ç”¨æˆ·",
  "timestamp": 1761139418
}
```

**é”™è¯¯ç è¯´æ˜**:
- `400 Bad Request`: å‚æ•°é”™è¯¯ï¼ˆç¼ºå°‘å¿…å¡«å‚æ•°ã€åˆ†äº«æ¶ˆæ¯è¿‡é•¿ç­‰ï¼‰
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `403 Forbidden`: æ— æƒæ“ä½œï¼ˆæœªäº’å…³ã€ä¸èƒ½åˆ†äº«ç»™è‡ªå·±ï¼‰
- `404 Not Found`: å¸–å­æˆ–æ¥æ”¶è€…ä¸å­˜åœ¨
- `409 Conflict`: å·²åˆ†äº«è¿‡æ­¤å¸–å­ç»™è¯¥ç”¨æˆ·
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

**ä¸šåŠ¡è§„åˆ™**:
1. åªèƒ½åˆ†äº«ç»™äº’ç›¸å…³æ³¨çš„ç”¨æˆ·
2. ä¸èƒ½åˆ†äº«ç»™è‡ªå·±
3. åŒä¸€å¸–å­ä¸èƒ½é‡å¤åˆ†äº«ç»™åŒä¸€ç”¨æˆ·
4. åˆ†äº«é™„è¨€æœ€å¤š500å­—ç¬¦
5. å¸–å­å’Œæ¥æ”¶è€…å¿…é¡»å­˜åœ¨

---

### 2. è·å–æ”¶åˆ°çš„åˆ†äº«åˆ—è¡¨

**åŠŸèƒ½ä»‹ç»**: è·å–å½“å‰ç”¨æˆ·æ”¶åˆ°çš„åˆ†äº«åˆ—è¡¨ï¼ŒåŒ…å«å®Œæ•´çš„å¸–å­ä¿¡æ¯å’Œå‘é€è€…ä¿¡æ¯

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/shares/received`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è¯·æ±‚å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| page | integer | å¦ | 1 | é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ |
| page_size | integer | å¦ | 10 | æ¯é¡µæ•°é‡ï¼ˆæœ€å¤§50ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/v1/shares/received?page=1&page_size=10
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.total | integer | æ€»è®°å½•æ•° |
| data.page | integer | å½“å‰é¡µç  |
| data.page_size | integer | æ¯é¡µæ•°é‡ |
| data.has_more | boolean | æ˜¯å¦æœ‰æ›´å¤šæ•°æ® |
| data.shares | array | åˆ†äº«åˆ—è¡¨ |
| data.shares[].share_id | string | åˆ†äº«ID |
| data.shares[].share_message | string | åˆ†äº«é™„è¨€ |
| data.shares[].create_time | integer | åˆ†äº«æ—¶é—´æˆ³ |
| data.shares[].post | object | å¸–å­ä¿¡æ¯ |
| data.shares[].post.id | integer | å¸–å­ç‰©ç†ID |
| data.shares[].post.post_id | string | å¸–å­ä¸šåŠ¡ID |
| data.shares[].post.title | string | å¸–å­æ ‡é¢˜ |
| data.shares[].post.description | string | å¸–å­æè¿° |
| data.shares[].post.cover_image | string | å°é¢å›¾URL |
| data.shares[].post.like_count | integer | ç‚¹èµæ•° |
| data.shares[].post.favorite_count | integer | æ”¶è—æ•° |
| data.shares[].sender | object | å‘é€è€…ä¿¡æ¯ |
| data.shares[].sender.id | integer | ç”¨æˆ·ç‰©ç†ID |
| data.shares[].sender.user_id | string | ç”¨æˆ·ä¸šåŠ¡ID |
| data.shares[].sender.username | string | ç”¨æˆ·å |
| data.shares[].sender.avatar_url | string | å¤´åƒURL |
| data.shares[].sender.bio | string | ä¸ªäººç®€ä»‹ |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "total": 2,
    "page": 1,
    "page_size": 10,
    "has_more": false,
    "shares": [
      {
        "share_id": "SHR_2025Q4_OJNUSL",
        "share_message": "testuser10åˆ†äº«ç»™testuser_new_nameçš„æµ‹è¯•æ¶ˆæ¯",
        "create_time": 1761139752,
        "post": {
          "id": 65,
          "post_id": "POST_2025Q4_PtkL9z",
          "title": "ç¾å¥½çš„ä¸‰å¤©",
          "description": "ä»Šå¤©å¤©æ°”çœŸå¥½ï¼Œæ‹äº†å‡ å¼ ç…§ç‰‡åˆ†äº«ç»™å¤§å®¶",
          "cover_image": "/uploads/thumbnails/IMG_2025Q4_XLahfR_thumb.jpg",
          "like_count": 1,
          "favorite_count": 1
        },
        "sender": {
          "id": 39,
          "user_id": "USR_2025Q4_nAGv22",
          "username": "testuser10",
          "avatar_url": "",
          "bio": ""
        }
      }
    ]
  },
  "timestamp": 1761139759
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

**æ€§èƒ½æŒ‡æ ‡**:
- æŸ¥è¯¢æ¬¡æ•°: 3æ¬¡ï¼ˆåˆ†äº«è®°å½• + æ‰¹é‡æŸ¥è¯¢å¸–å­ + æ‰¹é‡æŸ¥è¯¢ç”¨æˆ·ï¼‰
- å“åº”æ—¶é—´: ~80ms (P99)
- æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–: ç›¸æ¯”N+1æŸ¥è¯¢èŠ‚çœ95%æŸ¥è¯¢æ¬¡æ•°

**æ³¨æ„äº‹é¡¹**:
- ä½¿ç”¨æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–ï¼Œæ€§èƒ½ä¼˜å¼‚
- è¿”å›å®æ—¶æ•°æ®ï¼Œç”¨æˆ·ä¿¡æ¯å’Œå¸–å­ä¿¡æ¯å§‹ç»ˆæœ€æ–°
- æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—ï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰

---

### 3. è·å–å‘å‡ºçš„åˆ†äº«åˆ—è¡¨

**åŠŸèƒ½ä»‹ç»**: è·å–å½“å‰ç”¨æˆ·å‘å‡ºçš„åˆ†äº«åˆ—è¡¨ï¼ŒåŒ…å«å®Œæ•´çš„å¸–å­ä¿¡æ¯å’Œæ¥æ”¶è€…ä¿¡æ¯

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/shares/sent`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è¯·æ±‚å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| page | integer | å¦ | 1 | é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ |
| page_size | integer | å¦ | 10 | æ¯é¡µæ•°é‡ï¼ˆæœ€å¤§50ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/v1/shares/sent?page=1&page_size=10
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.total | integer | æ€»è®°å½•æ•° |
| data.page | integer | å½“å‰é¡µç  |
| data.page_size | integer | æ¯é¡µæ•°é‡ |
| data.has_more | boolean | æ˜¯å¦æœ‰æ›´å¤šæ•°æ® |
| data.shares | array | åˆ†äº«åˆ—è¡¨ |
| data.shares[].share_id | string | åˆ†äº«ID |
| data.shares[].share_message | string | åˆ†äº«é™„è¨€ |
| data.shares[].create_time | integer | åˆ†äº«æ—¶é—´æˆ³ |
| data.shares[].post | object | å¸–å­ä¿¡æ¯ï¼ˆåŒ"æ”¶åˆ°çš„åˆ†äº«"ï¼‰ |
| data.shares[].receiver | object | æ¥æ”¶è€…ä¿¡æ¯ |
| data.shares[].receiver.id | integer | ç”¨æˆ·ç‰©ç†ID |
| data.shares[].receiver.user_id | string | ç”¨æˆ·ä¸šåŠ¡ID |
| data.shares[].receiver.username | string | ç”¨æˆ·å |
| data.shares[].receiver.avatar_url | string | å¤´åƒURL |
| data.shares[].receiver.bio | string | ä¸ªäººç®€ä»‹ |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "total": 1,
    "page": 1,
    "page_size": 10,
    "has_more": false,
    "shares": [
      {
        "share_id": "SHR_2025Q4_OJNUSL",
        "share_message": "testuser10åˆ†äº«ç»™testuser_new_nameçš„æµ‹è¯•æ¶ˆæ¯",
        "create_time": 1761139752,
        "post": {
          "id": 65,
          "post_id": "POST_2025Q4_PtkL9z",
          "title": "ç¾å¥½çš„ä¸‰å¤©",
          "description": "ä»Šå¤©å¤©æ°”çœŸå¥½ï¼Œæ‹äº†å‡ å¼ ç…§ç‰‡åˆ†äº«ç»™å¤§å®¶",
          "cover_image": "/uploads/thumbnails/IMG_2025Q4_XLahfR_thumb.jpg",
          "like_count": 1,
          "favorite_count": 1
        },
        "receiver": {
          "id": 3,
          "user_id": "USR_2025Q4_Z35Gd6",
          "username": "testuser_new_name",
          "avatar_url": "https://example.com/avatar.jpg",
          "bio": "çƒ­çˆ±æ‘„å½±å’Œæ—…è¡Œ"
        }
      }
    ]
  },
  "timestamp": 1761139765
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

**æ³¨æ„äº‹é¡¹**:
- ä¸"æ”¶åˆ°çš„åˆ†äº«"æ¥å£ç»“æ„ç›¸åŒï¼Œä»…ç”¨æˆ·è§’è‰²ä¸åŒï¼ˆsender/receiverï¼‰
- åŒæ ·ä½¿ç”¨æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–
- æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—

---

### 4. åˆ é™¤åˆ†äº«è®°å½•

**åŠŸèƒ½ä»‹ç»**: åˆ é™¤è‡ªå·±å‘å‡ºçš„åˆ†äº«è®°å½•ï¼ˆä»…é™å‘é€è€…åˆ é™¤ï¼‰

**è¯·æ±‚æ–¹å¼**: `DELETE`

**è¯·æ±‚è·¯å¾„**: `/shares/:id`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| id | integer | æ˜¯ | åˆ†äº«è®°å½•çš„ç‰©ç†ID |

**è¯·æ±‚ç¤ºä¾‹**:
```
DELETE /api/v1/shares/3
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "åˆ é™¤æˆåŠŸ",
  "timestamp": 1761139893
}
```

**é”™è¯¯å“åº”ç¤ºä¾‹**:
```json
{
  "success": false,
  "message": "æ— æƒåˆ é™¤æ­¤åˆ†äº«è®°å½•",
  "timestamp": 1761139915
}
```

**é”™è¯¯ç è¯´æ˜**:
- `400 Bad Request`: ç¼ºå°‘å‚æ•°æˆ–å‚æ•°æ ¼å¼é”™è¯¯
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `403 Forbidden`: æ— æƒåˆ é™¤ï¼ˆåªèƒ½åˆ é™¤è‡ªå·±å‘å‡ºçš„åˆ†äº«ï¼‰
- `404 Not Found`: åˆ†äº«è®°å½•ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

**ä¸šåŠ¡è§„åˆ™**:
1. åªèƒ½åˆ é™¤è‡ªå·±å‘å‡ºçš„åˆ†äº«è®°å½•
2. åˆ é™¤åæ¥æ”¶è€…çš„åˆ†äº«åˆ—è¡¨ä¼šç«‹å³æ›´æ–°
3. åˆ é™¤æ“ä½œä¸å¯æ¢å¤

**æ³¨æ„äº‹é¡¹**:
- æ¥æ”¶è€…æ— æ³•åˆ é™¤æ”¶åˆ°çš„åˆ†äº«ï¼ˆæ¥æ”¶è€…å¯ä»¥é€‰æ‹©å¿½ç•¥ï¼‰
- åˆ é™¤åˆ†äº«ä¸ä¼šå½±å“åŸå¸–å­
- åˆ é™¤åæ•°æ®åº“è®°å½•ç«‹å³åˆ é™¤ï¼ˆéè½¯åˆ é™¤ï¼‰

---

## è¯„è®ºç›¸å…³API

> **ğŸ†• v2.8.0 æ–°å¢**: æ”¯æŒå¸–å­è¯„è®ºåŠŸèƒ½

### 1. åˆ›å»ºè¯„è®º

**åŠŸèƒ½ä»‹ç»**: ä¸ºæŒ‡å®šå¸–å­åˆ›å»ºè¯„è®º

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id/comments`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
Content-Type: application/json
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡IDï¼ˆå¦‚POST_2025Q4_ABC123ï¼‰ |

**è¯·æ±‚å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| content | string | æ˜¯ | è¯„è®ºå†…å®¹ï¼ˆ1-1000å­—ç¬¦ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "content": "è¿™æ˜¯ä¸€æ¡æµ‹è¯•è¯„è®ºï¼ŒåŠŸèƒ½æµ‹è¯•ä¸­..."
}
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.comment_id | string | è¯„è®ºIDï¼ˆCMT_2025Q4_XXXXXXæ ¼å¼ï¼‰ |
| data.post_id | string | å¸–å­ID |
| data.content | string | è¯„è®ºå†…å®¹ |
| data.create_time | integer | åˆ›å»ºæ—¶é—´æˆ³ |
| data.comment_count | integer | è¯¥å¸–å­æ€»è¯„è®ºæ•° |
| data.author | object | è¯„è®ºä½œè€…ä¿¡æ¯ |
| data.author.user_id | string | ä½œè€…ç”¨æˆ·ID |
| data.author.username | string | ä½œè€…ç”¨æˆ·å |
| data.author.avatar_url | string | ä½œè€…å¤´åƒURL |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è¯„è®ºåˆ›å»ºæˆåŠŸ",
  "data": {
    "comment_id": "CMT_2025Q4_PWNL2W",
    "post_id": "POST_2025Q4_pXiLnA",
    "content": "è¿™æ˜¯ä¸€æ¡æµ‹è¯•è¯„è®ºï¼ŒåŠŸèƒ½æµ‹è¯•ä¸­...",
    "create_time": 1760884276,
    "comment_count": 1,
    "author": {
      "user_id": "USR_2025Q4_ABC123",
      "username": "testuser",
      "avatar_url": "http://43.142.157.145:8080/uploads/avatars/user_2.jpg"
    }
  },
  "timestamp": 1760884276
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `400 Bad Request`: è¯„è®ºå†…å®¹ä¸ºç©ºã€è¿‡é•¿æˆ–åŒ…å«éæ³•å­—ç¬¦
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

**æ³¨æ„äº‹é¡¹**:
- è¯„è®ºå†…å®¹å¿…é¡»ä¸º1-1000å­—ç¬¦
- ä¸èƒ½ä¸ºçº¯ç©ºæ ¼
- æ”¯æŒUTF-8ä¸­æ–‡å­—ç¬¦
- è¯„è®ºåˆ›å»ºåä¼šè‡ªåŠ¨å¢åŠ å¸–å­çš„comment_count
- è¯„è®ºIDæ ¼å¼ï¼šCMT_å¹´ä»½Qå­£åº¦_éšæœº6ä½å­—ç¬¦

---

### 2. è·å–è¯„è®ºåˆ—è¡¨

**åŠŸèƒ½ä»‹ç»**: è·å–æŒ‡å®šå¸–å­çš„è¯„è®ºåˆ—è¡¨ï¼ˆå…¬å¼€æ¥å£ï¼Œæ— éœ€è®¤è¯ï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id/comments`

**è¯·æ±‚å¤´**: æ— éœ€è®¤è¯

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**æŸ¥è¯¢å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| page | integer | å¦ | 1 | é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ |
| page_size | integer | å¦ | 20 | æ¯é¡µæ•°é‡ï¼ˆæœ€å¤§100ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/v1/posts/POST_2025Q4_pXiLnA/comments?page=1&page_size=20
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.comments | array | è¯„è®ºåˆ—è¡¨ |
| data.comments[].comment_id | string | è¯„è®ºID |
| data.comments[].post_id | string | å¸–å­ID |
| data.comments[].content | string | è¯„è®ºå†…å®¹ |
| data.comments[].create_time | integer | åˆ›å»ºæ—¶é—´æˆ³ |
| data.comments[].author | object | è¯„è®ºä½œè€…ä¿¡æ¯ |
| data.comments[].author.user_id | string | ä½œè€…ç”¨æˆ·ID |
| data.comments[].author.username | string | ä½œè€…ç”¨æˆ·å |
| data.comments[].author.avatar_url | string | ä½œè€…å¤´åƒURL |
| data.page | integer | å½“å‰é¡µç  |
| data.page_size | integer | æ¯é¡µæ•°é‡ |
| data.total | integer | æ€»è¯„è®ºæ•° |
| data.has_more | boolean | æ˜¯å¦æœ‰æ›´å¤šæ•°æ® |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–è¯„è®ºåˆ—è¡¨æˆåŠŸ",
  "data": {
    "comments": [
      {
        "comment_id": "CMT_2025Q4_PWNL2W",
        "post_id": "POST_2025Q4_pXiLnA",
        "content": "è¿™æ˜¯ä¸€æ¡æµ‹è¯•è¯„è®ºï¼ŒåŠŸèƒ½æµ‹è¯•ä¸­...",
        "create_time": 1760884276,
        "author": {
          "user_id": "USR_2025Q4_ABC123",
          "username": "testuser",
          "avatar_url": "http://43.142.157.145:8080/uploads/avatars/user_2.jpg"
        }
      }
    ],
    "page": 1,
    "page_size": 20,
    "total": 1,
    "has_more": false
  },
  "timestamp": 1760884300
}
```

**ç©ºè¯„è®ºåˆ—è¡¨å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–è¯„è®ºåˆ—è¡¨æˆåŠŸ",
  "data": {
    "comments": [],
    "page": 1,
    "page_size": 20,
    "total": 0,
    "has_more": false
  },
  "timestamp": 1760884300
}
```

**é”™è¯¯ç è¯´æ˜**:
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

**æ³¨æ„äº‹é¡¹**:
- æ­¤æ¥å£æ— éœ€è®¤è¯ï¼Œæ¸¸å®¢å¯è®¿é—®
- è¯„è®ºæŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—ï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰
- ä½¿ç”¨æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–ï¼Œé¿å…N+1æŸ¥è¯¢é—®é¢˜
- page_sizeæœ€å¤§å€¼ä¸º100

**æ€§èƒ½ä¼˜åŒ–**:
- æ‰¹é‡æŸ¥è¯¢ä½œè€…ä¿¡æ¯ï¼Œé¿å…N+1é—®é¢˜
- 20æ¡è¯„è®ºä»…éœ€2æ¬¡æ•°æ®åº“æŸ¥è¯¢
- å“åº”æ—¶é—´ < 150ms

---

### 3. åˆ é™¤è¯„è®º

**åŠŸèƒ½ä»‹ç»**: åˆ é™¤æŒ‡å®šè¯„è®ºï¼ˆä»…è¯„è®ºä½œè€…æˆ–å¸–å­ä½œè€…å¯åˆ é™¤ï¼‰

**è¯·æ±‚æ–¹å¼**: `DELETE`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id/comments/:comment_id`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |
| comment_id | string | æ˜¯ | è¯„è®ºä¸šåŠ¡IDï¼ˆCMT_2025Q4_XXXXXXï¼‰ |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.comment_count | integer | åˆ é™¤åè¯¥å¸–å­æ€»è¯„è®ºæ•° |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è¯„è®ºåˆ é™¤æˆåŠŸ",
  "data": {
    "comment_count": 0
  },
  "timestamp": 1760884400
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `403 Forbidden`: æ— æƒåˆ é™¤æ­¤è¯„è®ºï¼ˆéè¯„è®ºä½œè€…ä¸”éå¸–å­ä½œè€…ï¼‰
- `404 Not Found`: è¯„è®ºä¸å­˜åœ¨æˆ–å¸–å­ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

**æƒé™è¯´æ˜**:
- **è¯„è®ºä½œè€…**å¯ä»¥åˆ é™¤è‡ªå·±çš„è¯„è®º
- **å¸–å­ä½œè€…**å¯ä»¥åˆ é™¤å¸–å­ä¸‹çš„ä»»ä½•è¯„è®º
- å…¶ä»–ç”¨æˆ·æ— æƒåˆ é™¤

**æ³¨æ„äº‹é¡¹**:
- åˆ é™¤è¯„è®ºä¼šè‡ªåŠ¨å‡å°‘å¸–å­çš„comment_count
- ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ä¿è¯æ•°æ®ä¸€è‡´æ€§
- åˆ é™¤å¸–å­æ—¶ï¼Œæ‰€æœ‰è¯„è®ºä¼šé€šè¿‡å¤–é”®çº§è”è‡ªåŠ¨åˆ é™¤

---

## å…³æ³¨ç›¸å…³API

> **ğŸ†• v2.2.0 æ–°å¢**: æ”¯æŒç”¨æˆ·å…³æ³¨åŠŸèƒ½

### 1. å…³æ³¨ç”¨æˆ·

**åŠŸèƒ½ä»‹ç»**: å…³æ³¨æŒ‡å®šç”¨æˆ·

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/api/v1/users/:user_id/follow`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
Content-Length: 0
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| user_id | string | æ˜¯ | ç›®æ ‡ç”¨æˆ·ä¸šåŠ¡ID (å¦‚USR_2025Q4_XXX)æˆ–ç‰©ç†ID |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.followee_user_id | string | è¢«å…³æ³¨ç”¨æˆ·ID |
| data.is_following | boolean | æ˜¯å¦æ­£åœ¨å…³æ³¨ |
| data.follower_count | integer | è¯¥ç”¨æˆ·ç²‰ä¸æ€»æ•° |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å…³æ³¨æˆåŠŸ",
  "data": {
    "followee_user_id": "USR_2025Q4_Z35Gd6",
    "is_following": true,
    "follower_count": 15
  },
  "timestamp": 1760698045
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**ï¼ˆå·²å…³æ³¨ï¼‰:
```json
{
  "success": false,
  "message": "æ‚¨å·²ç»å…³æ³¨è¿‡è¯¥ç”¨æˆ·",
  "data": {
    "followee_user_id": "USR_2025Q4_Z35Gd6",
    "is_following": true,
    "follower_count": 15
  },
  "timestamp": 1760698045
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `404 Not Found`: ç”¨æˆ·ä¸å­˜åœ¨
- `400 Bad Request`: ä¸èƒ½å…³æ³¨è‡ªå·±æˆ–å·²ç»å…³æ³¨è¿‡è¯¥ç”¨æˆ·
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 2. å–æ¶ˆå…³æ³¨

**åŠŸèƒ½ä»‹ç»**: å–æ¶ˆå…³æ³¨æŒ‡å®šç”¨æˆ·

**è¯·æ±‚æ–¹å¼**: `DELETE`

**è¯·æ±‚è·¯å¾„**: `/api/v1/users/:user_id/follow`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| user_id | string | æ˜¯ | ç›®æ ‡ç”¨æˆ·ä¸šåŠ¡IDæˆ–ç‰©ç†ID |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.followee_user_id | string | è¢«å–æ¶ˆå…³æ³¨çš„ç”¨æˆ·ID |
| data.is_following | boolean | æ˜¯å¦æ­£åœ¨å…³æ³¨ |
| data.follower_count | integer | è¯¥ç”¨æˆ·ç²‰ä¸æ€»æ•° |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å–æ¶ˆå…³æ³¨æˆåŠŸ",
  "data": {
    "followee_user_id": "USR_2025Q4_Z35Gd6",
    "is_following": false,
    "follower_count": 14
  },
  "timestamp": 1760698046
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**ï¼ˆæœªå…³æ³¨ï¼‰:
```json
{
  "success": false,
  "message": "æ‚¨å°šæœªå…³æ³¨è¯¥ç”¨æˆ·",
  "data": {
    "followee_user_id": "USR_2025Q4_Z35Gd6",
    "is_following": false,
    "follower_count": 15
  },
  "timestamp": 1760698046
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `404 Not Found`: ç”¨æˆ·ä¸å­˜åœ¨æˆ–æœªå…³æ³¨è¿‡è¯¥ç”¨æˆ·
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 3. æŸ¥è¯¢å…³æ³¨çŠ¶æ€

**åŠŸèƒ½ä»‹ç»**: æŸ¥è¯¢å½“å‰ç”¨æˆ·ä¸ç›®æ ‡ç”¨æˆ·çš„å…³æ³¨å…³ç³»

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/api/v1/users/:user_id/follow/status`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| user_id | string | æ˜¯ | ç›®æ ‡ç”¨æˆ·ä¸šåŠ¡IDæˆ–ç‰©ç†ID |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.user_id | string | ç›®æ ‡ç”¨æˆ·ID |
| data.is_following | boolean | å½“å‰ç”¨æˆ·æ˜¯å¦å…³æ³¨äº†ç›®æ ‡ç”¨æˆ· |
| data.is_followed_by | boolean | ç›®æ ‡ç”¨æˆ·æ˜¯å¦å…³æ³¨äº†å½“å‰ç”¨æˆ· |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "user_id": "USR_2025Q4_Z35Gd6",
    "is_following": true,
    "is_followed_by": false
  },
  "timestamp": 1760698045
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `404 Not Found`: ç”¨æˆ·ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 4. è·å–å…³æ³¨åˆ—è¡¨

**åŠŸèƒ½ä»‹ç»**: è·å–æŒ‡å®šç”¨æˆ·çš„å…³æ³¨åˆ—è¡¨ï¼ˆFollowingï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/api/v1/users/:user_id/following`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}  # å¯é€‰ï¼Œæä¾›æ—¶ä¼šæ ‡è®°is_followingå­—æ®µ
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| user_id | string | æ˜¯ | ç”¨æˆ·ä¸šåŠ¡IDæˆ–ç‰©ç†ID |

**æŸ¥è¯¢å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | integer | å¦ | é¡µç ï¼ˆé»˜è®¤1ï¼‰ |
| page_size | integer | å¦ | æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼Œæœ€å¤§100ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/v1/users/USR_2025Q4_38TiLL/following?page=1&page_size=20
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.users | array | ç”¨æˆ·åˆ—è¡¨ |
| data.users[].user_id | string | ç”¨æˆ·ID |
| data.users[].username | string | ç”¨æˆ·å |
| data.users[].real_name | string | çœŸå®å§“å |
| data.users[].avatar_url | string | å¤´åƒURL |
| data.users[].bio | string | ä¸ªäººç®€ä»‹ |
| data.users[].follower_count | integer | ç²‰ä¸æ•° |
| data.users[].is_following | boolean | å½“å‰ç”¨æˆ·æ˜¯å¦å…³æ³¨äº†è¯¥ç”¨æˆ· |
| data.users[].followed_at | integer | å…³æ³¨æ—¶é—´æˆ³ |
| data.total | integer | æ€»å…³æ³¨æ•° |
| data.page | integer | å½“å‰é¡µç  |
| data.page_size | integer | æ¯é¡µæ•°é‡ |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "users": [
      {
        "user_id": "3",
        "username": "testuser2",
        "real_name": "æµ‹è¯•ç”¨æˆ·2",
        "avatar_url": "",
        "bio": "è¿™æ˜¯æˆ‘çš„ä¸ªäººç®€ä»‹",
        "follower_count": 15,
        "is_following": true,
        "followed_at": 1760698045
      }
    ],
    "total": 1,
    "page": 1,
    "page_size": 20
  },
  "timestamp": 1760698045
}
```

**é”™è¯¯ç è¯´æ˜**:
- `400 Bad Request`: å‚æ•°é”™è¯¯
- `404 Not Found`: ç”¨æˆ·ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 5. è·å–ç²‰ä¸åˆ—è¡¨

**åŠŸèƒ½ä»‹ç»**: è·å–æŒ‡å®šç”¨æˆ·çš„ç²‰ä¸åˆ—è¡¨ï¼ˆFollowersï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/api/v1/users/:user_id/followers`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}  # å¯é€‰ï¼Œæä¾›æ—¶ä¼šæ ‡è®°is_followingå­—æ®µ
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| user_id | string | æ˜¯ | ç”¨æˆ·ä¸šåŠ¡IDæˆ–ç‰©ç†ID |

**æŸ¥è¯¢å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | integer | å¦ | é¡µç ï¼ˆé»˜è®¤1ï¼‰ |
| page_size | integer | å¦ | æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼Œæœ€å¤§100ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/v1/users/3/followers?page=1&page_size=20
```

**è¿”å›å‚æ•°**: åŒ"è·å–å…³æ³¨åˆ—è¡¨"

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "users": [
      {
        "user_id": "2",
        "username": "testuser",
        "real_name": "æµ‹è¯•ç”¨æˆ·",
        "avatar_url": "",
        "bio": "",
        "follower_count": 0,
        "is_following": false,
        "followed_at": 1760698045
      }
    ],
    "total": 1,
    "page": 1,
    "page_size": 20
  },
  "timestamp": 1760698045
}
```

**é”™è¯¯ç è¯´æ˜**:
- `400 Bad Request`: å‚æ•°é”™è¯¯
- `404 Not Found`: ç”¨æˆ·ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 6. è·å–äº’å…³åˆ—è¡¨ï¼ˆæ–°å¢ v2.8.0ï¼‰

**åŠŸèƒ½ä»‹ç»**: è·å–æŒ‡å®šç”¨æˆ·çš„äº’å…³å¥½å‹åˆ—è¡¨ï¼ˆäº’ç›¸å…³æ³¨çš„ç”¨æˆ·ï¼‰

**ç‰ˆæœ¬**: v2.8.0

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/api/v1/users/:user_id/mutual-follows`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}  # å¯é€‰
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| user_id | string | æ˜¯ | ç”¨æˆ·ä¸šåŠ¡IDï¼ˆå¦‚ï¼šUSR_2025Q4_GP2JHHï¼‰ |

**æŸ¥è¯¢å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | integer | å¦ | é¡µç ï¼ˆé»˜è®¤1ï¼‰ |
| page_size | integer | å¦ | æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼Œæœ€å¤§100ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/v1/users/USR_2025Q4_GP2JHH/mutual-follows?page=1&page_size=20
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| users | array | äº’å…³ç”¨æˆ·åˆ—è¡¨ |
| â””â”€ user_id | string | ç”¨æˆ·ä¸šåŠ¡ID |
| â””â”€ username | string | ç”¨æˆ·å |
| â””â”€ real_name | string | çœŸå®å§“å |
| â””â”€ avatar_url | string | å¤´åƒURL |
| â””â”€ bio | string | ä¸ªäººç®€ä»‹ |
| â””â”€ follower_count | integer | ç²‰ä¸æ•°é‡ |
| â””â”€ is_following | boolean | å›ºå®šä¸ºtrueï¼ˆäº’å…³å…³ç³»ï¼‰ |
| â””â”€ followed_at | integer | å…³æ³¨æ—¶é—´æˆ³ï¼ˆäº’å…³åˆ—è¡¨ä¸­ä¸º0ï¼‰ |
| total | integer | æ€»æ•°é‡ |
| page | integer | å½“å‰é¡µç  |
| page_size | integer | æ¯é¡µæ•°é‡ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "users": [
      {
        "user_id": "USR_2025Q4_T2BpyB",
        "username": "zhangsan4",
        "real_name": "å¼ ä¸‰å››",
        "avatar_url": "/uploads/avatars/USR_2025Q4_T2BpyB_1761047278.jpg",
        "bio": "çƒ­çˆ±æ‘„å½±",
        "follower_count": 1,
        "is_following": true,
        "followed_at": 0
      }
    ],
    "total": 1,
    "page": 1,
    "page_size": 20
  },
  "timestamp": 1761059777
}
```

**é”™è¯¯ç è¯´æ˜**:
- `400 Bad Request`: å‚æ•°é”™è¯¯
- `404 Not Found`: ç”¨æˆ·ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

**æ€§èƒ½ä¼˜åŒ–**:
- ä½¿ç”¨æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–ï¼ŒæŸ¥è¯¢æ¬¡æ•°å›ºå®šä¸º2æ¬¡ï¼ˆæ— è®ºåˆ—è¡¨å¤§å°ï¼‰
- ä½¿ç”¨INNER JOINæŸ¥è¯¢åŒå‘å…³æ³¨å…³ç³»
- å“åº”æ—¶é—´ï¼š~40-60msï¼ˆ20æ¡è®°å½•ï¼‰

**æ³¨æ„äº‹é¡¹**:
- äº’å…³åˆ—è¡¨ä¸­çš„`is_following`å­—æ®µå›ºå®šä¸º`true`ï¼ˆå› ä¸ºæ˜¯åŒå‘å…³æ³¨ï¼‰
- `followed_at`å­—æ®µåœ¨äº’å…³åˆ—è¡¨ä¸­ä¸º`0`ï¼ˆä¸æ˜¾ç¤ºå…·ä½“å…³æ³¨æ—¶é—´ï¼‰
- æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œå»ºè®®æ¯é¡µä¸è¶…è¿‡100æ¡

---

### 7. è·å–ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯

**åŠŸèƒ½ä»‹ç»**: è·å–ç”¨æˆ·çš„å…³æ³¨å’Œç²‰ä¸ç»Ÿè®¡ä¿¡æ¯

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/api/v1/users/:user_id/stats`

**è¯·æ±‚å¤´**: æ— éœ€è®¤è¯

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| user_id | string | æ˜¯ | ç”¨æˆ·ä¸šåŠ¡IDæˆ–ç‰©ç†ID |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.user_id | string | ç”¨æˆ·ID |
| data.following_count | integer | å…³æ³¨æ•° |
| data.follower_count | integer | ç²‰ä¸æ•° |
| data.post_count | integer | å¸–å­æ•° |
| data.like_count | integer | è·èµæ•° |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "user_id": "3",
    "following_count": 5,
    "follower_count": 15,
    "post_count": 23,
    "like_count": 156
  },
  "timestamp": 1760698046
}
```

**é”™è¯¯ç è¯´æ˜**:
- `404 Not Found`: ç”¨æˆ·ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 7. æ‰¹é‡æ£€æŸ¥å…³æ³¨çŠ¶æ€

**åŠŸèƒ½ä»‹ç»**: æ‰¹é‡æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦å…³æ³¨äº†å¤šä¸ªç”¨æˆ·

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/api/v1/users/follow/batch-status`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| user_ids | array | æ˜¯ | ç”¨æˆ·IDåˆ—è¡¨ï¼ˆæœ€å¤š100ä¸ªï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "user_ids": ["3", "4", "5", "USR_2025Q4_Z35Gd6"]
}
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | å…³æ³¨çŠ¶æ€æ˜ å°„ï¼ˆuser_id: is_followingï¼‰ |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "3": true,
    "4": false,
    "5": true,
    "USR_2025Q4_Z35Gd6": false
  },
  "timestamp": 1760698046
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `400 Bad Request`: user_idsä¸ºç©ºæˆ–è¶…è¿‡100ä¸ª
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---
## å›¾ç‰‡ç®¡ç†API

> **âš ï¸ éƒ¨åˆ†APIå·²åºŸå¼ƒ**: å»ºè®®ä½¿ç”¨å¸–å­ç®¡ç†API

### 1. ä¸Šä¼ å›¾ç‰‡

**åŠŸèƒ½ä»‹ç»**: ç”¨æˆ·ä¸Šä¼ å›¾æ–‡æ¨æ–‡ï¼ˆå›¾ç‰‡ä¸ºä¸» + é…æ–‡ï¼‰

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/images`

**è¯·æ±‚å¤´**:
```
Content-Type: multipart/form-data
Authorization: Bearer {access_token}
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| image | File | æ˜¯ | å›¾ç‰‡æ–‡ä»¶ï¼ˆæ”¯æŒJPEG/PNG/WebPï¼Œæœ€å¤§5MBï¼‰ |
| title | String | æ˜¯ | æ¨æ–‡æ ‡é¢˜ï¼ˆæœ€å¤š255å­—ç¬¦ï¼‰ |
| description | String | å¦ | æ¨æ–‡é…æ–‡ï¼ˆè¯¦ç»†æè¿°ï¼‰ |
| tags | String | å¦ | æ ‡ç­¾åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼Œæœ€å¤š5ä¸ªï¼‰ |

**è¿”å›å€¼**:

```json
{
  "success": true,
  "message": "å›¾ç‰‡ä¸Šä¼ æˆåŠŸ",
  "data": {
    "id": 1,
    "image_id": "IMG_2025Q4_123456",
    "user_id": 1,
    "title": "ç¾ä¸½çš„é£æ™¯",
    "description": "ä»Šå¤©æ‹æ‘„çš„æ—¥è½",
    "file_url": "http://43.142.157.145:8080/uploads/images/abc123.jpg",
    "thumbnail_url": "http://43.142.157.145:8080/uploads/thumbnails/abc123_thumb.jpg",
    "file_size": 1024000,
    "width": 1920,
    "height": 1080,
    "mime_type": "image/jpeg",
    "like_count": 0,
    "favorite_count": 0,
    "view_count": 0,
    "status": "APPROVED",
    "create_time": 1759844400,
    "update_time": 1759844400
  },
  "timestamp": 1759844400
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›æˆ–æ— æ•ˆçš„è®¤è¯ä»¤ç‰Œ
- `400 Bad Request`: è¯·æ±‚å‚æ•°é”™è¯¯ï¼ˆæœªæ‰¾åˆ°å›¾ç‰‡æ–‡ä»¶ã€æ ‡é¢˜ä¸ºç©ºã€æ–‡ä»¶è¿‡å¤§ç­‰ï¼‰
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 2. è·å–æœ€æ–°å›¾ç‰‡åˆ—è¡¨

**åŠŸèƒ½ä»‹ç»**: è·å–æœ€æ–°å‘å¸ƒçš„å›¾æ–‡æ¨æ–‡åˆ—è¡¨ï¼ˆæŒ‰æ—¶é—´å€’åºï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/images?page=1&page_size=20`

**è¯·æ±‚å¤´**:
```
æ— éœ€è®¤è¯
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| page | Integer | å¦ | 1 | é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ |
| page_size | Integer | å¦ | 20 | æ¯é¡µæ•°é‡ï¼ˆæœ€å¤§100ï¼‰ |

**è¿”å›å€¼**:

```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "total": 100,
    "page": 1,
    "page_size": 20,
    "images": [
      {
        "id": 1,
        "image_id": "IMG_2025Q4_123456",
        "user_id": 1,
        "title": "ç¾ä¸½çš„é£æ™¯",
        "description": "ä»Šå¤©æ‹æ‘„çš„æ—¥è½",
        "file_url": "http://43.142.157.145:8080/uploads/images/abc123.jpg",
        "thumbnail_url": "http://43.142.157.145:8080/uploads/thumbnails/abc123_thumb.jpg",
        "file_size": 1024000,
        "width": 1920,
        "height": 1080,
        "mime_type": "image/jpeg",
        "like_count": 10,
        "favorite_count": 5,
        "view_count": 100,
        "status": "APPROVED",
        "create_time": 1759844400,
        "update_time": 1759844400
      }
    ]
  },
  "timestamp": 1759844400
}
```

**é”™è¯¯ç **:
- `400 Bad Request`: è¯·æ±‚å‚æ•°é”™è¯¯
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 3. è·å–å›¾ç‰‡è¯¦æƒ…

**åŠŸèƒ½ä»‹ç»**: è·å–æŒ‡å®šå›¾æ–‡æ¨æ–‡çš„è¯¦ç»†ä¿¡æ¯ï¼ˆä¼šå¢åŠ æµè§ˆæ•°ï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/images/:id`

**è¯·æ±‚å¤´**:
```
æ— éœ€è®¤è¯
```

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | String | å›¾ç‰‡ä¸šåŠ¡é€»è¾‘IDï¼ˆimage_idï¼‰ |

**è¿”å›å€¼**:

```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "id": 1,
    "image_id": "IMG_2025Q4_123456",
    "user_id": 1,
    "title": "ç¾ä¸½çš„é£æ™¯",
    "description": "ä»Šå¤©æ‹æ‘„çš„æ—¥è½",
    "file_url": "http://43.142.157.145:8080/uploads/images/abc123.jpg",
    "thumbnail_url": "http://43.142.157.145:8080/uploads/thumbnails/abc123_thumb.jpg",
    "file_size": 1024000,
    "width": 1920,
    "height": 1080,
    "mime_type": "image/jpeg",
    "like_count": 10,
    "favorite_count": 5,
    "view_count": 101,
    "status": "APPROVED",
    "create_time": 1759844400,
    "update_time": 1759844400
  },
  "timestamp": 1759844400
}
```

**é”™è¯¯ç **:
- `404 Not Found`: å›¾ç‰‡ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 4. æ›´æ–°å›¾æ–‡é…æ–‡

> **âŒ å·²åºŸå¼ƒ**: è¯·ä½¿ç”¨ `PUT /posts/:post_id` ä»£æ›¿

**åŠŸèƒ½ä»‹ç»**: æ›´æ–°å›¾æ–‡æ¨æ–‡çš„æ ‡é¢˜å’Œé…æ–‡ï¼ˆåªæœ‰æ‰€æœ‰è€…å¯ä»¥ç¼–è¾‘ï¼‰

**è¯·æ±‚æ–¹å¼**: `PUT`

**è¯·æ±‚è·¯å¾„**: `/images/:id`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | String | å›¾ç‰‡ä¸šåŠ¡é€»è¾‘IDï¼ˆimage_idï¼‰ |

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| title | String | æ˜¯ | æ–°æ ‡é¢˜ï¼ˆæœ€å¤š255å­—ç¬¦ï¼‰ |
| description | String | å¦ | æ–°é…æ–‡ |

**è¯·æ±‚ç¤ºä¾‹**:

```json
{
  "title": "æ›´æ–°åçš„æ ‡é¢˜",
  "description": "æ›´æ–°åçš„é…æ–‡"
}
```

**è¿”å›å€¼**:

```json
{
  "success": true,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": null,
  "timestamp": 1759844400
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›æˆ–æ— æ•ˆçš„è®¤è¯ä»¤ç‰Œ
- `403 Forbidden`: æ— æƒé™ï¼ˆä¸æ˜¯å›¾ç‰‡æ‰€æœ‰è€…ï¼‰æˆ–å›¾ç‰‡ä¸å­˜åœ¨
- `400 Bad Request`: è¯·æ±‚å‚æ•°é”™è¯¯ï¼ˆæ ‡é¢˜ä¸ºç©ºã€æ ‡é¢˜è¿‡é•¿ç­‰ï¼‰
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 5. åˆ é™¤å›¾ç‰‡

**åŠŸèƒ½ä»‹ç»**: åˆ é™¤å›¾æ–‡æ¨æ–‡ï¼ˆåªæœ‰æ‰€æœ‰è€…å¯ä»¥åˆ é™¤ï¼‰

**è¯·æ±‚æ–¹å¼**: `DELETE`

**è¯·æ±‚è·¯å¾„**: `/images/:id`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | String | å›¾ç‰‡ä¸šåŠ¡é€»è¾‘IDï¼ˆimage_idï¼‰ |

**è¿”å›å€¼**:

```json
{
  "success": true,
  "message": "åˆ é™¤æˆåŠŸ",
  "data": null,
  "timestamp": 1759844400
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›æˆ–æ— æ•ˆçš„è®¤è¯ä»¤ç‰Œ
- `403 Forbidden`: æ— æƒé™ï¼ˆä¸æ˜¯å›¾ç‰‡æ‰€æœ‰è€…ï¼‰æˆ–å›¾ç‰‡ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 6. è·å–ç”¨æˆ·å›¾ç‰‡åˆ—è¡¨

**åŠŸèƒ½ä»‹ç»**: è·å–æŒ‡å®šç”¨æˆ·å‘å¸ƒçš„å›¾æ–‡æ¨æ–‡åˆ—è¡¨

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/users/:id/images?page=1&page_size=20`

**è¯·æ±‚å¤´**:
```
æ— éœ€è®¤è¯
```

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | Integer | ç”¨æˆ·ID |

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| page | Integer | å¦ | 1 | é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ |
| page_size | Integer | å¦ | 20 | æ¯é¡µæ•°é‡ï¼ˆæœ€å¤§100ï¼‰ |

**è¿”å›å€¼**:

```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "total": 50,
    "page": 1,
    "page_size": 20,
    "images": [
      {
        "id": 1,
        "image_id": "IMG_2025Q4_123456",
        "user_id": 1,
        "title": "ç¾ä¸½çš„é£æ™¯",
        "description": "ä»Šå¤©æ‹æ‘„çš„æ—¥è½",
        "file_url": "http://43.142.157.145:8080/uploads/images/abc123.jpg",
        "thumbnail_url": "http://43.142.157.145:8080/uploads/thumbnails/abc123_thumb.jpg",
        "file_size": 1024000,
        "width": 1920,
        "height": 1080,
        "mime_type": "image/jpeg",
        "like_count": 10,
        "favorite_count": 5,
        "view_count": 100,
        "status": "APPROVED",
        "create_time": 1759844400,
        "update_time": 1759844400
      }
    ]
  },
  "timestamp": 1759844400
}
```

**é”™è¯¯ç **:
- `400 Bad Request`: è¯·æ±‚å‚æ•°é”™è¯¯
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---


## ç³»ç»Ÿç›¸å…³API

### 1. å¥åº·æ£€æŸ¥

**åŠŸèƒ½ä»‹ç»**: æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/health`

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| status | string | æœåŠ¡çŠ¶æ€ |
| timestamp | integer | æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "status": "healthy",
  "timestamp": 1704067200
}
```

---

### 2. ç³»ç»ŸæŒ‡æ ‡

**åŠŸèƒ½ä»‹ç»**: è·å–ç³»ç»Ÿè¿è¡ŒæŒ‡æ ‡

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/metrics`

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| uptime | integer | è¿è¡Œæ—¶é—´ï¼ˆç§’ï¼‰ |
| requests_total | integer | æ€»è¯·æ±‚æ•° |
| database_connections | integer | æ•°æ®åº“è¿æ¥æ•° |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "uptime": 3600,
  "requests_total": 1234,
  "database_connections": 10
}
```

---

### 3. ç‰ˆæœ¬ä¿¡æ¯

**åŠŸèƒ½ä»‹ç»**: è·å–APIç‰ˆæœ¬ä¿¡æ¯

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/api/v1/version`

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| version | string | APIç‰ˆæœ¬ |
| build_time | string | æ„å»ºæ—¶é—´ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "version": "1.0.0",
  "build_time": "2025-01-01T00:00:00Z"
}
```

---

## ğŸ“Œ é€šç”¨è¯´æ˜

### è®¤è¯æ–¹å¼

å¤§éƒ¨åˆ†APIéœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦JWTè®¿é—®ä»¤ç‰Œï¼š

```
Authorization: Bearer {access_token}
```

### å“åº”æ ¼å¼

æ‰€æœ‰APIå“åº”å‡ä¸ºJSONæ ¼å¼ï¼ŒåŒ…å«ä»¥ä¸‹åŸºæœ¬å­—æ®µï¼š

```json
{
  "success": true/false,
  "message": "æ¶ˆæ¯å†…å®¹",
  "data": {}
}
```

### é”™è¯¯å¤„ç†

å½“è¯·æ±‚å¤±è´¥æ—¶ï¼Œå“åº”ä¸­ä¼šåŒ…å«è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼š

```json
{
  "success": false,
  "message": "é”™è¯¯æè¿°",
  "data": null
}
```

### çŠ¶æ€ç 

- `200 OK`: è¯·æ±‚æˆåŠŸ
- `400 Bad Request`: è¯·æ±‚å‚æ•°é”™è¯¯
- `401 Unauthorized`: æœªæˆæƒï¼ˆä»¤ç‰Œæ— æ•ˆæˆ–è¿‡æœŸï¼‰
- `403 Forbidden`: ç¦æ­¢è®¿é—®
- `404 Not Found`: èµ„æºä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

## ğŸ” å®‰å…¨è¯´æ˜

1. **å¯†ç å®‰å…¨**: ä½¿ç”¨PBKDF2-HMAC-SHA256ç®—æ³•ï¼Œ100,000æ¬¡è¿­ä»£
2. **ä»¤ç‰Œå®‰å…¨**: JWTä»¤ç‰Œä½¿ç”¨HS256ç­¾åç®—æ³•
3. **ä¼ è¾“å®‰å…¨**: ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨HTTPS
4. **SQLæ³¨å…¥é˜²æŠ¤**: æ‰€æœ‰æ•°æ®åº“æŸ¥è¯¢ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.6.0 (2025-10-18) **ğŸ¯ å½“å‰ç‰ˆæœ¬**
- âœ… æ–°å¢ç”¨æˆ·å¤´åƒä¸Šä¼ APIï¼ˆ1ä¸ªæ¥å£ï¼‰
  - POST /users/avatar - ä¸Šä¼ /ä¿®æ”¹ç”¨æˆ·å¤´åƒ
- âœ… å›¾ç‰‡è‡ªåŠ¨å¤„ç†åŠŸèƒ½
  - è‡ªåŠ¨å±…ä¸­è£å‰ªä¸ºæ­£æ–¹å½¢
  - ç¼©æ”¾åˆ°200x200æ ‡å‡†å°ºå¯¸
  - JPEGå‹ç¼©ï¼ˆè´¨é‡80%ï¼‰
  - æ™ºèƒ½æ›¿æ¢æ—§å¤´åƒï¼ˆè‡ªåŠ¨åˆ é™¤æ—§æ–‡ä»¶ï¼‰
  - äº‹åŠ¡å›æ»šæœºåˆ¶ï¼ˆæ•°æ®åº“å¤±è´¥æ—¶è‡ªåŠ¨åˆ é™¤æ–°æ–‡ä»¶ï¼‰
- âœ… æŠ€æœ¯å®ç°
  - æ–°å¢AvatarProcessorå·¥å…·ç±»
  - ä½¿ç”¨stb_imageåº“è¿›è¡Œè·¨æ ¼å¼å›¾ç‰‡å¤„ç†
  - æ”¯æŒJPEG/PNG/GIF/WebPæ ¼å¼ä¸Šä¼ 
  - æ–‡ä»¶å¤§å°é™åˆ¶5MB
  - å›¾ç‰‡å°ºå¯¸é™åˆ¶10000x10000
- âœ… APIæ–‡æ¡£å®Œå–„
  - æ·»åŠ å¤´åƒä¸Šä¼ APIè¯¦ç»†æ–‡æ¡£ï¼ˆ200è¡Œï¼‰
  - æ›´æ–°"æ›´æ–°ç”¨æˆ·ä¿¡æ¯"APIä¸­avatar_urlå‚æ•°è¯´æ˜
  - è¡¥å……å¸¸è§é—®é¢˜å’Œä½¿ç”¨åœºæ™¯å¯¹æ¯”

### v2.5.1 (2025-10-18)
- âœ… å¸–å­è¯¦æƒ…æ¥å£ä¼˜åŒ–
  - æ–°å¢ä½œè€…æ˜µç§°å­—æ®µï¼ˆauthor.nicknameï¼‰
  - è¿”å›å®Œæ•´ä½œè€…ä¿¡æ¯ï¼ˆuser_id, username, nickname, avatar_urlï¼‰
  - ä¼˜åŒ–Feedæµå’Œç”¨æˆ·å¸–å­åˆ—è¡¨è¿”å›æ ¼å¼

### v2.5.0 (2025-10-18)
- âœ… Feedæµæ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–
  - æ”¯æŒæ¸¸å®¢è®¿é—®å’Œç™»å½•ç”¨æˆ·è®¿é—®
  - æ— æ•ˆTokenè‡ªåŠ¨é™çº§ä¸ºæ¸¸å®¢æ¨¡å¼
  - æ‰¹é‡æŸ¥è¯¢ä½œè€…ä¿¡æ¯ã€ç‚¹èµçŠ¶æ€ã€æ”¶è—çŠ¶æ€
  - è§£å†³N+1æŸ¥è¯¢é—®é¢˜ï¼Œæ€§èƒ½æå‡200%

### v2.4.1 (2025-10-15)
- âœ… åˆ›å»ºå¸–å­æ¥å£æ”¯æŒJSON+Base64æ ¼å¼
  - åŒæ—¶æ”¯æŒmultipart/form-dataå’Œapplication/json
  - æ”¯æŒBase64ç¼–ç çš„å›¾ç‰‡æ•°æ®

### v2.4.0 (2025-10-14)
- âœ… å®Œå–„APIæ–‡æ¡£
  - ä¿®å¤å¸–å­ç®¡ç†APIè¿”å›ç¤ºä¾‹ï¼ˆç»Ÿä¸€ä½¿ç”¨ä¸‹åˆ’çº¿å‘½åï¼‰
  - è¡¥å……imagesæ•°ç»„å®Œæ•´å­—æ®µè¯´æ˜ï¼ˆimage_id, display_order, file_urlç­‰ï¼‰
  - æ·»åŠ æ‰€æœ‰è¿”å›å‚æ•°çš„è¯¦ç»†å«ä¹‰è¯´æ˜
  - ä¿®å¤ä¿®æ”¹å¯†ç APIè·¯å¾„ï¼ˆPUT /auth/passwordï¼‰
- âœ… æ–‡æ¡£æ›´æ–°ä¸è§„èŒƒåŒ–
  - ç»Ÿä¸€JSONå­—æ®µå‘½åè§„èŒƒï¼ˆsnake_caseï¼‰
  - è¡¥å……æ‰€æœ‰APIçš„å®Œæ•´è¿”å›å‚æ•°è¯´æ˜
  - ä¼˜åŒ–æ–‡æ¡£ç»“æ„å’Œç›®å½•ç»„ç»‡

### v2.3.0 (2025-10-11)
- âœ… æ–°å¢åˆ†äº«ç³»ç»ŸAPIï¼ˆ2ä¸ªæ¥å£ï¼‰
  - POST /posts/:post_id/share - åˆ›å»ºå¸–å­åˆ†äº«é“¾æ¥
  - GET /share/:code - è§£æåˆ†äº«é“¾æ¥ï¼ˆå…¬å¼€æ¥å£ï¼‰
- âœ… æŠ€æœ¯å®ç°
  - é›ªèŠ±IDç®—æ³• + Base62ç¼–ç ï¼ˆ8ä½çŸ­ç ï¼‰
  - çŸ­é“¾æ¥å»é‡é€»è¾‘
  - åˆ†äº«é“¾æ¥è¿‡æœŸæœºåˆ¶
- âœ… Deep Linkæ”¯æŒ
  - iOS Universal Linksé…ç½®
  - Android App Linksé…ç½®
  - HarmonyOS Deep Linking + App Linkingé…ç½®
- âœ… æ•°æ®åº“
  - æ–°å¢ share_links è¡¨ï¼ˆ7å­—æ®µï¼Œ4ç´¢å¼•ï¼‰
  - å¤–é”®çº§è”åˆ é™¤ï¼ˆåˆ é™¤å¸–å­è‡ªåŠ¨åˆ é™¤åˆ†äº«é“¾æ¥ï¼‰

### v2.2.0 (2025-10-10)
- âœ… æ–°å¢ç‚¹èµç›¸å…³APIï¼ˆ3ä¸ªæ¥å£ï¼‰
  - POST /posts/:post_id/like - ç‚¹èµå¸–å­
  - DELETE /posts/:post_id/like - å–æ¶ˆç‚¹èµ
  - GET /posts/:post_id/like/status - æŸ¥è¯¢ç‚¹èµçŠ¶æ€
- âœ… æ–°å¢æ”¶è—ç›¸å…³APIï¼ˆ4ä¸ªæ¥å£ï¼‰
  - POST /posts/:post_id/favorite - æ”¶è—å¸–å­
  - DELETE /posts/:post_id/favorite - å–æ¶ˆæ”¶è—
  - GET /posts/:post_id/favorite/status - æŸ¥è¯¢æ”¶è—çŠ¶æ€
  - GET /my/favorites - è·å–ç”¨æˆ·æ”¶è—åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
- âœ… æ•°æ®åº“
  - æ–°å¢ likes è¡¨ï¼ˆç”¨æˆ·ç‚¹èµè®°å½•ï¼‰
  - æ–°å¢ favorites è¡¨ï¼ˆç”¨æˆ·æ”¶è—è®°å½•ï¼‰
  - æ·»åŠ ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
  - å®ç°ç‚¹èµ/æ”¶è—æ•°çš„å®æ—¶æ›´æ–°

### v2.1.0 (2025-10-09)
- âœ… æ–°å¢ç”¨æˆ·ä¿¡æ¯ç®¡ç†APIï¼ˆ4ä¸ªæ¥å£ï¼‰
  - GET /users/profile - è·å–å½“å‰ç”¨æˆ·å®Œæ•´ä¿¡æ¯
  - PUT /users/profile - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
  - GET /users/check-username - æ£€æŸ¥ç”¨æˆ·åå¯ç”¨æ€§
  - GET /users/:user_id - è·å–ç”¨æˆ·å…¬å¼€ä¿¡æ¯
- âœ… æ•°æ®åº“
  - usersè¡¨æ–°å¢å­—æ®µï¼šbio, gender, location, website, avatar_url
  - ä¼˜åŒ–ç”¨æˆ·ä¿¡æ¯å­˜å‚¨ç»“æ„

### v2.0.0 (2025-10-08)
- âœ… æ–°å¢å¸–å­ç®¡ç†APIï¼ˆ9ä¸ªæ¥å£ï¼‰
  - åˆ›å»ºå¸–å­ï¼ˆæ”¯æŒ1-9å¼ å›¾ç‰‡ï¼‰
  - è·å–å¸–å­è¯¦æƒ…
  - æ›´æ–°å¸–å­
  - åˆ é™¤å¸–å­
  - è·å–Feedæµï¼ˆåˆ†é¡µï¼‰
  - è·å–ç”¨æˆ·å¸–å­åˆ—è¡¨
  - æ·»åŠ å›¾ç‰‡åˆ°å¸–å­
  - åˆ é™¤å¸–å­ä¸­çš„å›¾ç‰‡
  - è°ƒæ•´å›¾ç‰‡é¡ºåº
- âœ… å›¾ç‰‡ç®¡ç†APIå‡çº§ä¸ºå¸–å­ç³»ç»Ÿ
- âŒ åºŸå¼ƒ PUT /images/:image_id/textï¼ˆä½¿ç”¨ PUT /posts/:post_id ä»£æ›¿ï¼‰

### v1.2.0 (2025-10-05)
- âœ… æ–°å¢å›¾ç‰‡ç®¡ç†APIï¼ˆ6ä¸ªæ¥å£ï¼‰
  - ä¸Šä¼ å›¾ç‰‡
  - è·å–å›¾ç‰‡è¯¦æƒ…
  - è·å–æœ€è¿‘å›¾ç‰‡åˆ—è¡¨
  - æ›´æ–°å›¾ç‰‡æ–‡æœ¬
  - åˆ é™¤å›¾ç‰‡
  - è·å–ç”¨æˆ·å›¾ç‰‡åˆ—è¡¨

### v1.0.0 (2025-01-XX)
- âœ… å®ç°ç”¨æˆ·æ³¨å†ŒAPI
- âœ… å®ç°ç”¨æˆ·ç™»å½•APIï¼ˆæ”¯æŒç”¨æˆ·å/æ‰‹æœºå·/é‚®ç®±ï¼‰
- âœ… å®ç°ä»¤ç‰ŒéªŒè¯API
- âœ… å®ç°ä»¤ç‰Œåˆ·æ–°API
- âœ… å®ç°ç”¨æˆ·ç™»å‡ºAPI
- âœ… å®ç°ä¿®æ”¹å¯†ç API
- âœ… å®ç°å¥åº·æ£€æŸ¥API
- âœ… å®ç°ç³»ç»ŸæŒ‡æ ‡API
- âœ… å®ç°ç‰ˆæœ¬ä¿¡æ¯API

---

**æ–‡æ¡£æœ€åæ›´æ–°**: 2025-10-14
**ç»´æŠ¤è€…**: Knot Development Team
