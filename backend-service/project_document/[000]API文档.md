# Knot å›¾ç‰‡åˆ†äº«ç³»ç»Ÿ API æ–‡æ¡£

**é¡¹ç›®åç§°**: Knot - Image Sharing Service
**ç‰ˆæœ¬**: v2.4.0
**æ›´æ–°æ—¶é—´**: 2025-10-14
**åŸºç¡€URL**: `http://localhost:8080/api/v1`/`http://8.138.115.164:8080/api/v1`
**éƒ¨ç½²æœåŠ¡å™¨ip**ï¼š8.138.115.164

---

## ğŸ”” é‡è¦è¯´æ˜

### å›¾ç‰‡URLè‡ªåŠ¨å‰ç¼€ï¼ˆv2.4.0æ–°å¢ï¼‰

**æ‰€æœ‰è¿”å›çš„å›¾ç‰‡è·¯å¾„å·²è‡ªåŠ¨æ·»åŠ æœåŠ¡å™¨URLå‰ç¼€**ï¼Œå®¢æˆ·ç«¯å¯ç›´æ¥ä½¿ç”¨è¿”å›çš„å®Œæ•´URLè®¿é—®å›¾ç‰‡ã€‚

**å½±å“å­—æ®µ**ï¼š
- `file_url` - åŸå›¾URL
- `thumbnail_url` - ç¼©ç•¥å›¾URL
- `cover_image_url` - å°é¢å›¾URL
- `avatar_url` - ç”¨æˆ·å¤´åƒURL

**è¿”å›æ ¼å¼**ï¼š
```json
{
  "file_url": "http://8.138.115.164:8080/uploads/images/IMG_2025Q4_xxx.jpg",
  "thumbnail_url": "http://8.138.115.164:8080/uploads/thumbnails/IMG_2025Q4_xxx_thumb.jpg"
}
```

**é…ç½®è¯´æ˜**ï¼š
- ç”Ÿäº§ç¯å¢ƒï¼šè‡ªåŠ¨ä½¿ç”¨ `http://8.138.115.164:8080` ä½œä¸ºå‰ç¼€
- å¼€å‘ç¯å¢ƒï¼šå¯åœ¨ `config.json` ä¸­é…ç½® `server.base_url` è‡ªå®šä¹‰å‰ç¼€
- ç›¸å¯¹è·¯å¾„æ¨¡å¼ï¼šè®¾ç½® `server.base_url: ""` è¿”å›ç›¸å¯¹è·¯å¾„ï¼ˆç”¨äºæœ¬åœ°å¼€å‘ï¼‰

---

## ğŸ“‹ ç›®å½•

1. [è®¤è¯ç›¸å…³API](#è®¤è¯ç›¸å…³api)
   - [ç”¨æˆ·æ³¨å†Œ](#1-ç”¨æˆ·æ³¨å†Œ)
   - [ç”¨æˆ·ç™»å½•](#2-ç”¨æˆ·ç™»å½•)
   - [ä»¤ç‰ŒéªŒè¯](#3-ä»¤ç‰ŒéªŒè¯)
   - [ä»¤ç‰Œåˆ·æ–°](#4-ä»¤ç‰Œåˆ·æ–°)
   - [ç”¨æˆ·ç™»å‡º](#5-ç”¨æˆ·ç™»å‡º)
   - [ä¿®æ”¹å¯†ç ](#6-ä¿®æ”¹å¯†ç )
   - [è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯](#7-è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯) **ğŸ†• v2.1.0**
   - [æ›´æ–°ç”¨æˆ·ä¿¡æ¯](#8-æ›´æ–°ç”¨æˆ·ä¿¡æ¯) **ğŸ†• v2.1.0**
   - [è·å–ç”¨æˆ·å…¬å¼€ä¿¡æ¯](#9-è·å–ç”¨æˆ·å…¬å¼€ä¿¡æ¯) **ğŸ†• v2.1.0**
   - [æ£€æŸ¥ç”¨æˆ·åå¯ç”¨æ€§](#10-æ£€æŸ¥ç”¨æˆ·åå¯ç”¨æ€§) **ğŸ†• v2.1.0**

2. [å¸–å­ç®¡ç†API](#å¸–å­ç®¡ç†api) **ğŸ†• v2.0.0**
   - [åˆ›å»ºå¸–å­](#1-åˆ›å»ºå¸–å­)
   - [è·å–å¸–å­è¯¦æƒ…](#2-è·å–å¸–å­è¯¦æƒ…)
   - [æ›´æ–°å¸–å­](#3-æ›´æ–°å¸–å­)
   - [åˆ é™¤å¸–å­](#4-åˆ é™¤å¸–å­)
   - [è·å–Feedæµ](#5-è·å–feedæµ)
   - [è·å–ç”¨æˆ·å¸–å­åˆ—è¡¨](#6-è·å–ç”¨æˆ·å¸–å­åˆ—è¡¨)
   - [æ·»åŠ å›¾ç‰‡åˆ°å¸–å­](#7-æ·»åŠ å›¾ç‰‡åˆ°å¸–å­)
   - [ä»å¸–å­åˆ é™¤å›¾ç‰‡](#8-ä»å¸–å­åˆ é™¤å›¾ç‰‡)
   - [è°ƒæ•´å›¾ç‰‡é¡ºåº](#9-è°ƒæ•´å›¾ç‰‡é¡ºåº)

3. [ç‚¹èµç›¸å…³API](#ç‚¹èµç›¸å…³api) **ğŸ†• v2.2.0**
   - [ç‚¹èµå¸–å­](#1-ç‚¹èµå¸–å­)
   - [å–æ¶ˆç‚¹èµ](#2-å–æ¶ˆç‚¹èµ)
   - [æŸ¥è¯¢ç‚¹èµçŠ¶æ€](#3-æŸ¥è¯¢ç‚¹èµçŠ¶æ€)

4. [æ”¶è—ç›¸å…³API](#æ”¶è—ç›¸å…³api) **ğŸ†• v2.2.0**
   - [æ”¶è—å¸–å­](#1-æ”¶è—å¸–å­)
   - [å–æ¶ˆæ”¶è—](#2-å–æ¶ˆæ”¶è—)
   - [æŸ¥è¯¢æ”¶è—çŠ¶æ€](#3-æŸ¥è¯¢æ”¶è—çŠ¶æ€)
   - [è·å–ç”¨æˆ·æ”¶è—åˆ—è¡¨](#4-è·å–ç”¨æˆ·æ”¶è—åˆ—è¡¨)

5. [åˆ†äº«ç›¸å…³API](#åˆ†äº«ç›¸å…³api) **ğŸ†• v2.3.0**
   - [åˆ›å»ºå¸–å­åˆ†äº«é“¾æ¥](#1-åˆ›å»ºå¸–å­åˆ†äº«é“¾æ¥)
   - [è§£æåˆ†äº«é“¾æ¥](#2-è§£æåˆ†äº«é“¾æ¥)

6. [å›¾ç‰‡ç®¡ç†API](#å›¾ç‰‡ç®¡ç†api) **âš ï¸ éƒ¨åˆ†å·²åºŸå¼ƒ**
   - [ä¸Šä¼ å›¾ç‰‡](#1-ä¸Šä¼ å›¾ç‰‡) âœ… å¯ç”¨ï¼ˆå†…éƒ¨è°ƒç”¨Post APIï¼‰
   - [è·å–æœ€æ–°å›¾ç‰‡åˆ—è¡¨](#2-è·å–æœ€æ–°å›¾ç‰‡åˆ—è¡¨) âœ… å¯ç”¨
   - [è·å–å›¾ç‰‡è¯¦æƒ…](#3-è·å–å›¾ç‰‡è¯¦æƒ…) âœ… å¯ç”¨
   - [æ›´æ–°å›¾æ–‡é…æ–‡](#4-æ›´æ–°å›¾æ–‡é…æ–‡) âŒ å·²åºŸå¼ƒï¼ˆä½¿ç”¨Post APIï¼‰
   - [åˆ é™¤å›¾ç‰‡](#5-åˆ é™¤å›¾ç‰‡) âœ… å¯ç”¨
   - [è·å–ç”¨æˆ·å›¾ç‰‡åˆ—è¡¨](#6-è·å–ç”¨æˆ·å›¾ç‰‡åˆ—è¡¨) âœ… å¯ç”¨

7. [ç³»ç»Ÿç›¸å…³API](#ç³»ç»Ÿç›¸å…³api)
   - [å¥åº·æ£€æŸ¥](#1-å¥åº·æ£€æŸ¥)
   - [ç³»ç»ŸæŒ‡æ ‡](#2-ç³»ç»ŸæŒ‡æ ‡)
   - [ç‰ˆæœ¬ä¿¡æ¯](#3-ç‰ˆæœ¬ä¿¡æ¯)

---

## è®¤è¯ç›¸å…³API

### 1. ç”¨æˆ·æ³¨å†Œ

**åŠŸèƒ½ä»‹ç»**: æ³¨å†Œæ–°ç”¨æˆ·è´¦å·

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/auth/register`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| username | string | æ˜¯ | ç”¨æˆ·åï¼ˆ3-50å­—ç¬¦ï¼Œå­—æ¯æ•°å­—ä¸‹åˆ’çº¿ï¼‰ | "zhangsan" |
| password | string | æ˜¯ | å¯†ç ï¼ˆ6-100å­—ç¬¦ï¼‰ | "password123" |
| real_name | string | æ˜¯ | çœŸå®å§“åï¼ˆä¸è¶…è¿‡50å­—ç¬¦ï¼‰ | "å¼ ä¸‰" |
| phone | string | æ˜¯ | æ‰‹æœºå·ï¼ˆ11ä½ä¸­å›½æ‰‹æœºå·ï¼‰ | "13800138000" |
| email | string | å¦ | é‚®ç®±ï¼ˆå¯é€‰ï¼‰ | "zhangsan@example.com" |
| role | string | å¦ | ç”¨æˆ·è§’è‰²ï¼ˆowner/driver/bothï¼Œé»˜è®¤driverï¼‰ | "driver" |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "username": "zhangsan",
  "password": "password123",
  "real_name": "å¼ ä¸‰",
  "phone": "13800138000",
  "email": "zhangsan@example.com",
  "role": "driver"
}
```

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | ç”¨æˆ·æ•°æ®ï¼ˆæˆåŠŸæ—¶è¿”å›ï¼‰ |
| data.id | integer | ç‰©ç†ID |
| data.user_id | string | é€»è¾‘ID |
| data.username | string | ç”¨æˆ·å |
| data.real_name | string | çœŸå®å§“å |
| data.phone | string | æ‰‹æœºå· |
| data.email | string | é‚®ç®± |
| data.role | string | ç”¨æˆ·è§’è‰² |
| data.status | string | è´¦æˆ·çŠ¶æ€ |
| data.create_time | integer | åˆ›å»ºæ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "id": 1,
    "user_id": "USR_2025Q1_A1B2C3",
    "username": "zhangsan",
    "real_name": "å¼ ä¸‰",
    "phone": "13800138000",
    "email": "zhangsan@example.com",
    "role": "driver",
    "status": "active",
    "avatar_url": "",
    "device_count": 0,
    "create_time": 1704067200,
    "update_time": 1704067200
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:
```json
{
  "success": false,
  "message": "ç”¨æˆ·åå·²å­˜åœ¨",
  "data": null
}
```

**é”™è¯¯ç è¯´æ˜**:
- `ç”¨æˆ·åå·²å­˜åœ¨`: ç”¨æˆ·åé‡å¤
- `æ‰‹æœºå·å·²è¢«æ³¨å†Œ`: æ‰‹æœºå·é‡å¤
- `é‚®ç®±å·²è¢«æ³¨å†Œ`: é‚®ç®±é‡å¤
- `ç”¨æˆ·åä¸èƒ½ä¸ºç©º`: å‚æ•°éªŒè¯å¤±è´¥
- `æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®`: æ‰‹æœºå·æ ¼å¼é”™è¯¯

---

### 2. ç”¨æˆ·ç™»å½•

**åŠŸèƒ½ä»‹ç»**: ç”¨æˆ·ç™»å½•è·å–è®¿é—®ä»¤ç‰Œ

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/auth/login`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| username | string | æ˜¯ | ç”¨æˆ·å/æ‰‹æœºå·/é‚®ç®± | "zhangsan" æˆ– "13800138000" |
| password | string | æ˜¯ | å¯†ç  | "password123" |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "username": "zhangsan",
  "password": "password123"
}
```

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | ç™»å½•æ•°æ®ï¼ˆæˆåŠŸæ—¶è¿”å›ï¼‰ |
| data.access_token | string | è®¿é—®ä»¤ç‰Œï¼ˆæœ‰æ•ˆæœŸ1å°æ—¶ï¼‰ |
| data.refresh_token | string | åˆ·æ–°ä»¤ç‰Œï¼ˆæœ‰æ•ˆæœŸ24å°æ—¶ï¼‰ |
| data.user | object | ç”¨æˆ·ä¿¡æ¯ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": 1,
      "user_id": "USR_2025Q1_A1B2C3",
      "username": "zhangsan",
      "real_name": "å¼ ä¸‰",
      "phone": "13800138000",
      "email": "zhangsan@example.com",
      "role": "driver",
      "status": "active"
    }
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:
```json
{
  "success": false,
  "message": "å¯†ç é”™è¯¯",
  "data": null
}
```

**é”™è¯¯ç è¯´æ˜**:
- `ç”¨æˆ·ä¸å­˜åœ¨`: ç”¨æˆ·å/æ‰‹æœºå·/é‚®ç®±ä¸å­˜åœ¨
- `å¯†ç é”™è¯¯`: å¯†ç ä¸æ­£ç¡®
- `è´¦æˆ·å·²è¢«å°ç¦`: è´¦æˆ·çŠ¶æ€ä¸ºbanned
- `è´¦æˆ·æœªæ¿€æ´»`: è´¦æˆ·çŠ¶æ€ä¸ºinactive

---

### 3. ä»¤ç‰ŒéªŒè¯

**åŠŸèƒ½ä»‹ç»**: éªŒè¯JWTè®¿é—®ä»¤ç‰Œæ˜¯å¦æœ‰æ•ˆ

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/auth/validate`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
Authorization: Bearer {access_token}
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| token | string | æ˜¯ | JWTè®¿é—®ä»¤ç‰Œ | "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| valid | boolean | ä»¤ç‰Œæ˜¯å¦æœ‰æ•ˆ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | ä»¤ç‰Œæ•°æ®ï¼ˆæœ‰æ•ˆæ—¶è¿”å›ï¼‰ |
| data.user_id | integer | ç”¨æˆ·ID |
| data.username | string | ç”¨æˆ·å |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "valid": true,
  "message": "ä»¤ç‰Œæœ‰æ•ˆ",
  "data": {
    "user_id": 1,
    "username": "zhangsan"
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:
```json
{
  "valid": false,
  "message": "ä»¤ç‰Œæ— æ•ˆæˆ–å·²è¿‡æœŸ",
  "data": null
}
```

---

### 4. ä»¤ç‰Œåˆ·æ–°

**åŠŸèƒ½ä»‹ç»**: ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œè·å–æ–°çš„è®¿é—®ä»¤ç‰Œ

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/auth/refresh`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| refresh_token | string | æ˜¯ | JWTåˆ·æ–°ä»¤ç‰Œ | "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | æ–°ä»¤ç‰Œæ•°æ® |
| data.access_token | string | æ–°çš„è®¿é—®ä»¤ç‰Œ |
| data.refresh_token | string | æ–°çš„åˆ·æ–°ä»¤ç‰Œ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "ä»¤ç‰Œåˆ·æ–°æˆåŠŸ",
  "data": {
    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:
```json
{
  "success": false,
  "message": "åˆ·æ–°ä»¤ç‰Œæ— æ•ˆ",
  "data": null
}
```

---

### 5. ç”¨æˆ·ç™»å‡º

**åŠŸèƒ½ä»‹ç»**: ç”¨æˆ·ç™»å‡ºï¼ˆç®€åŒ–å®ç°ï¼ŒJWTä»¤ç‰Œè‡ªåŠ¨è¿‡æœŸï¼‰

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/auth/logout`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
Authorization: Bearer {access_token}
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| access_token | string | æ˜¯ | JWTè®¿é—®ä»¤ç‰Œ | "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "ç™»å‡ºæˆåŠŸ"
}
```

**æ³¨æ„**: å½“å‰å®ç°ä¸ºç®€åŒ–ç‰ˆæœ¬ï¼ŒJWTä»¤ç‰Œä¼šåœ¨è¿‡æœŸåè‡ªåŠ¨å¤±æ•ˆï¼Œæœªå®ç°ä»¤ç‰Œé»‘åå•åŠŸèƒ½ã€‚

---

### 6. ä¿®æ”¹å¯†ç 

**åŠŸèƒ½ä»‹ç»**: ä¿®æ”¹ç”¨æˆ·å¯†ç 

**è¯·æ±‚æ–¹å¼**: `PUT`

**è¯·æ±‚è·¯å¾„**: `/auth/password`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
Authorization: Bearer {access_token}
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| user_id | integer | æ˜¯ | ç”¨æˆ·ID | 1 |
| old_password | string | æ˜¯ | æ—§å¯†ç  | "password123" |
| new_password | string | æ˜¯ | æ–°å¯†ç ï¼ˆ6-100å­—ç¬¦ï¼‰ | "newpassword456" |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "user_id": 1,
  "old_password": "password123",
  "new_password": "newpassword456"
}
```

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å¯†ç ä¿®æ”¹æˆåŠŸ"
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:
```json
{
  "success": false,
  "message": "æ—§å¯†ç ä¸æ­£ç¡®"
}
```

**é”™è¯¯ç è¯´æ˜**:
- `ç”¨æˆ·ä¸å­˜åœ¨`: ç”¨æˆ·IDä¸å­˜åœ¨
- `æ—§å¯†ç ä¸æ­£ç¡®`: æ—§å¯†ç éªŒè¯å¤±è´¥
- `æ–°å¯†ç æ ¼å¼ä¸æ­£ç¡®`: æ–°å¯†ç é•¿åº¦ä¸ç¬¦åˆè¦æ±‚

---

### 7. è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

**åŠŸèƒ½ä»‹ç»**: è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„å®Œæ•´ä¿¡æ¯

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/users/profile`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | ç”¨æˆ·æ•°æ®ï¼ˆæˆåŠŸæ—¶è¿”å›ï¼‰ |
| data.id | integer | ç‰©ç†ID |
| data.user_id | string | é€»è¾‘ID |
| data.username | string | ç”¨æˆ·å |
| data.real_name | string | çœŸå®å§“å |
| data.phone | string | æ‰‹æœºå· |
| data.email | string | é‚®ç®± |
| data.avatar_url | string | å¤´åƒURL |
| data.bio | string | ä¸ªäººç®€ä»‹ |
| data.gender | string | æ€§åˆ«(male/female/other/prefer_not_to_say) |
| data.location | string | æ‰€åœ¨åœ° |
| data.role | string | ç”¨æˆ·è§’è‰² |
| data.status | string | è´¦æˆ·çŠ¶æ€ |
| data.device_count | integer | ç»‘å®šè®¾å¤‡æ•° |
| data.create_time | integer | åˆ›å»ºæ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰ |
| data.update_time | integer | æ›´æ–°æ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "id": 7,
    "user_id": "USR_2025Q4_CBNLB0",
    "username": "testuser001",
    "real_name": "æµ‹è¯•ç”¨æˆ·001",
    "phone": "13900000099",
    "email": "test001@example.com",
    "avatar_url": "",
    "bio": "è¿™æ˜¯æˆ‘çš„ä¸ªäººç®€ä»‹",
    "gender": "male",
    "location": "åŒ—äº¬",
    "role": "user",
    "status": "active",
    "device_count": 0,
    "create_time": 1760018775,
    "update_time": 1760018818
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:
```json
{
  "success": false,
  "message": "ä»¤ç‰Œæ— æ•ˆæˆ–å·²è¿‡æœŸ",
  "data": null
}
```

**é”™è¯¯ç è¯´æ˜**:
- `æœªæä¾›è®¤è¯ä»¤ç‰Œ`: Authorizationå¤´ç¼ºå¤±
- `ä»¤ç‰Œæ— æ•ˆæˆ–å·²è¿‡æœŸ`: tokenéªŒè¯å¤±è´¥
- `ç”¨æˆ·ä¸å­˜åœ¨`: ç”¨æˆ·IDä¸å­˜åœ¨

---

### 8. æ›´æ–°ç”¨æˆ·ä¿¡æ¯

**åŠŸèƒ½ä»‹ç»**: æ›´æ–°å½“å‰ç™»å½•ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯

**è¯·æ±‚æ–¹å¼**: `PUT`

**è¯·æ±‚è·¯å¾„**: `/users/profile`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| real_name | string | æ˜¯ | çœŸå®å§“åï¼ˆä¸è¶…è¿‡50å­—ç¬¦ï¼‰ | "å¼ ä¸‰" |
| email | string | å¦ | é‚®ç®± | "zhangsan@example.com" |
| avatar_url | string | å¦ | å¤´åƒURL | "https://example.com/avatar.jpg" |
| phone | string | æ˜¯ | æ‰‹æœºå·ï¼ˆ11ä½ä¸­å›½æ‰‹æœºå·ï¼‰ | "13800138000" |
| bio | string | å¦ | ä¸ªäººç®€ä»‹ï¼ˆä¸è¶…è¿‡500å­—ç¬¦ï¼‰ | "çƒ­çˆ±æ‘„å½±å’Œæ—…è¡Œ" |
| gender | string | å¦ | æ€§åˆ«ï¼ˆmale/female/other/prefer_not_to_sayï¼‰ | "male" |
| location | string | å¦ | æ‰€åœ¨åœ°ï¼ˆä¸è¶…è¿‡100å­—ç¬¦ï¼‰ | "åŒ—äº¬" |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "real_name": "å¼ ä¸‰",
  "email": "zhangsan@example.com",
  "avatar_url": "https://example.com/avatar.jpg",
  "phone": "13800138000",
  "bio": "çƒ­çˆ±æ‘„å½±å’Œæ—…è¡Œ",
  "gender": "male",
  "location": "åŒ—äº¬"
}
```

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | æ›´æ–°åçš„ç”¨æˆ·æ•°æ®ï¼ˆæˆåŠŸæ—¶è¿”å›ï¼‰ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "ç”¨æˆ·ä¿¡æ¯æ›´æ–°æˆåŠŸ",
  "data": {
    "id": 7,
    "user_id": "USR_2025Q4_CBNLB0",
    "username": "testuser001",
    "real_name": "å¼ ä¸‰",
    "phone": "13800138000",
    "email": "zhangsan@example.com",
    "avatar_url": "https://example.com/avatar.jpg",
    "bio": "çƒ­çˆ±æ‘„å½±å’Œæ—…è¡Œ",
    "gender": "male",
    "location": "åŒ—äº¬",
    "role": "user",
    "status": "active",
    "device_count": 0,
    "create_time": 1760018775,
    "update_time": 1760020100
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:
```json
{
  "success": false,
  "message": "é‚®ç®±å·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨",
  "data": null
}
```

**é”™è¯¯ç è¯´æ˜**:
- `ä»¤ç‰Œæ— æ•ˆæˆ–å·²è¿‡æœŸ`: tokenéªŒè¯å¤±è´¥
- `çœŸå®å§“åä¸èƒ½ä¸ºç©º`: å‚æ•°éªŒè¯å¤±è´¥
- `æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®`: æ‰‹æœºå·æ ¼å¼é”™è¯¯
- `é‚®ç®±å·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨`: é‚®ç®±å”¯ä¸€æ€§çº¦æŸå†²çª
- `æ‰‹æœºå·å·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨`: æ‰‹æœºå·å”¯ä¸€æ€§çº¦æŸå†²çª
- `æ€§åˆ«å€¼æ— æ•ˆ`: genderå‚æ•°ä¸åœ¨å…è®¸èŒƒå›´å†…
- `ä¸ªäººç®€ä»‹ä¸èƒ½è¶…è¿‡500ä¸ªå­—ç¬¦`: bioå­—æ®µé•¿åº¦è¶…é™

---

### 9. è·å–ç”¨æˆ·å…¬å¼€ä¿¡æ¯

**åŠŸèƒ½ä»‹ç»**: è·å–æŒ‡å®šç”¨æˆ·çš„å…¬å¼€ä¿¡æ¯ï¼ˆæ— éœ€è®¤è¯ï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/users/{user_id}`

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| user_id | string | æ˜¯ | ç”¨æˆ·é€»è¾‘IDï¼ˆè·¯å¾„å‚æ•°ï¼‰ | "USR_2025Q4_CBNLB0" |

**è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/v1/users/USR_2025Q4_CBNLB0
```

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | ç”¨æˆ·å…¬å¼€æ•°æ®ï¼ˆæˆåŠŸæ—¶è¿”å›ï¼‰ |
| data.user_id | string | é€»è¾‘ID |
| data.username | string | ç”¨æˆ·å |
| data.real_name | string | çœŸå®å§“å |
| data.avatar_url | string | å¤´åƒURL |
| data.bio | string | ä¸ªäººç®€ä»‹ |
| data.gender | string | æ€§åˆ« |
| data.location | string | æ‰€åœ¨åœ° |
| data.create_time | integer | åˆ›å»ºæ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "user_id": "USR_2025Q4_CBNLB0",
    "username": "testuser001",
    "real_name": "æµ‹è¯•ç”¨æˆ·001",
    "avatar_url": "",
    "bio": "è¿™æ˜¯æˆ‘çš„ä¸ªäººç®€ä»‹",
    "gender": "male",
    "location": "åŒ—äº¬",
    "create_time": 1760018775
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:
```json
{
  "success": false,
  "message": "ç”¨æˆ·ä¸å­˜åœ¨",
  "data": null
}
```

**é”™è¯¯ç è¯´æ˜**:
- `ç”¨æˆ·ä¸å­˜åœ¨`: æŒ‡å®šçš„user_idä¸å­˜åœ¨

**æ³¨æ„äº‹é¡¹**:
- æ­¤æ¥å£æ— éœ€è®¤è¯,ä»»ä½•äººéƒ½å¯ä»¥è®¿é—®
- ä»…è¿”å›å…¬å¼€ä¿¡æ¯,ä¸åŒ…å«æ•æ„Ÿå­—æ®µ(å¦‚æ‰‹æœºå·ã€é‚®ç®±ã€å¯†ç ç­‰)

---

### 10. æ£€æŸ¥ç”¨æˆ·åå¯ç”¨æ€§

**åŠŸèƒ½ä»‹ç»**: æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å¯ç”¨äºæ³¨å†Œï¼ˆæ— éœ€è®¤è¯ï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/users/check-username`

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| username | string | æ˜¯ | å¾…æ£€æŸ¥çš„ç”¨æˆ·åï¼ˆæŸ¥è¯¢å‚æ•°ï¼‰ | "zhangsan" |

**è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/v1/users/check-username?username=zhangsan
```

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | æ£€æŸ¥ç»“æœæ•°æ®ï¼ˆæˆåŠŸæ—¶è¿”å›ï¼‰ |
| data.valid | boolean | æ ¼å¼æ˜¯å¦æœ‰æ•ˆ |
| data.available | boolean | æ˜¯å¦å¯ç”¨ |

**æˆåŠŸå“åº”ç¤ºä¾‹ï¼ˆç”¨æˆ·åå¯ç”¨ï¼‰**:
```json
{
  "success": true,
  "message": "ç”¨æˆ·åå¯ç”¨",
  "data": {
    "valid": true,
    "available": true
  }
}
```

**æˆåŠŸå“åº”ç¤ºä¾‹ï¼ˆç”¨æˆ·åå·²è¢«å ç”¨ï¼‰**:
```json
{
  "success": true,
  "message": "ç”¨æˆ·åå·²è¢«å ç”¨",
  "data": {
    "valid": true,
    "available": false
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹ï¼ˆæ ¼å¼æ— æ•ˆï¼‰**:
```json
{
  "success": false,
  "message": "ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-50ä¸ªå­—ç¬¦ä¹‹é—´",
  "data": {
    "valid": false,
    "available": false
  }
}
```

**é”™è¯¯ç è¯´æ˜**:
- `ç¼ºå°‘usernameå‚æ•°`: æŸ¥è¯¢å‚æ•°ç¼ºå¤±
- `ç”¨æˆ·åä¸èƒ½ä¸ºç©º`: ç”¨æˆ·åä¸ºç©ºå­—ç¬¦ä¸²
- `ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-50ä¸ªå­—ç¬¦ä¹‹é—´`: é•¿åº¦ä¸ç¬¦åˆè¦æ±‚
- `ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿`: æ ¼å¼ä¸æ­£ç¡®

**æ³¨æ„äº‹é¡¹**:
- æ­¤æ¥å£æ— éœ€è®¤è¯,ä»»ä½•äººéƒ½å¯ä»¥è®¿é—®
- ç”¨æˆ·åæ ¼å¼è¦æ±‚:3-50ä¸ªå­—ç¬¦,åªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿
- valid=falseæ—¶,availableå¿…å®šä¸ºfalse

---

## å¸–å­ç®¡ç†API

> **ğŸ†• v2.0.0 æ–°å¢**: æ”¯æŒå¤šå›¾ç‰‡å¸–å­ï¼ˆ1-9å¼ å›¾ç‰‡ï¼‰

### 1. åˆ›å»ºå¸–å­

**åŠŸèƒ½ä»‹ç»**: åˆ›å»ºåŒ…å«1-9å¼ å›¾ç‰‡çš„å¸–å­

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/posts`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
Authorization: Bearer <access_token>
```

**è¯·æ±‚å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| title | string | æ˜¯ | å¸–å­æ ‡é¢˜ï¼ˆ1-255å­—ç¬¦ï¼‰ |
| description | string | å¦ | å¸–å­é…æ–‡ï¼ˆæœ€å¤š1000å­—ç¬¦ï¼‰ |
| imageFiles | array | æ˜¯ | å›¾ç‰‡æ–‡ä»¶è·¯å¾„æ•°ç»„ï¼ˆ1-9å¼ ï¼‰ |
| tags | array | å¦ | æ ‡ç­¾æ•°ç»„ï¼ˆæœ€å¤š5ä¸ªï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "title": "ç¾å¥½çš„ä¸€å¤©",
  "description": "ä»Šå¤©å¤©æ°”çœŸå¥½ï¼Œæ‹äº†å‡ å¼ ç…§ç‰‡åˆ†äº«ç»™å¤§å®¶",
  "imageFiles": [
    "/tmp/upload_abc123.jpg",
    "/tmp/upload_def456.jpg",
    "/tmp/upload_ghi789.jpg"
  ],
  "tags": ["é£æ™¯", "æ—…è¡Œ", "æ‘„å½±"]
}
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.post_id | string | å¸–å­ä¸šåŠ¡ID |
| data.user_id | integer | å‘å¸ƒç”¨æˆ·ID |
| data.title | string | å¸–å­æ ‡é¢˜ |
| data.description | string | å¸–å­é…æ–‡ |
| data.image_count | integer | å›¾ç‰‡æ•°é‡ |
| data.like_count | integer | ç‚¹èµæ•° |
| data.favorite_count | integer | æ”¶è—æ•° |
| data.view_count | integer | æµè§ˆæ•° |
| data.status | string | å®¡æ ¸çŠ¶æ€ï¼ˆPENDING/APPROVED/REJECTEDï¼‰ |
| data.create_time | integer | åˆ›å»ºæ—¶é—´ï¼ˆUnixæ—¶é—´æˆ³ï¼‰ |
| data.update_time | integer | æ›´æ–°æ—¶é—´ï¼ˆUnixæ—¶é—´æˆ³ï¼‰ |
| data.images | array | å›¾ç‰‡æ•°ç»„ |
| data.images[].image_id | string | å›¾ç‰‡ä¸šåŠ¡ID |
| data.images[].post_id | integer | æ‰€å±å¸–å­ç‰©ç†ID |
| data.images[].display_order | integer | æ˜¾ç¤ºé¡ºåºï¼ˆ1-9ï¼‰ |
| data.images[].file_url | string | åŸå›¾URLè·¯å¾„ |
| data.images[].thumbnail_url | string | ç¼©ç•¥å›¾URLè·¯å¾„ |
| data.images[].file_size | integer | æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ |
| data.images[].width | integer | å›¾ç‰‡å®½åº¦ï¼ˆåƒç´ ï¼‰ |
| data.images[].height | integer | å›¾ç‰‡é«˜åº¦ï¼ˆåƒç´ ï¼‰ |
| data.images[].mime_type | string | MIMEç±»å‹ |
| data.images[].create_time | integer | åˆ›å»ºæ—¶é—´ï¼ˆUnixæ—¶é—´æˆ³ï¼‰ |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å¸–å­åˆ›å»ºæˆåŠŸ",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "user_id": 1,
    "title": "ç¾å¥½çš„ä¸€å¤©",
    "description": "ä»Šå¤©å¤©æ°”çœŸå¥½ï¼Œæ‹äº†å‡ å¼ ç…§ç‰‡åˆ†äº«ç»™å¤§å®¶",
    "image_count": 3,
    "like_count": 0,
    "favorite_count": 0,
    "view_count": 0,
    "status": "APPROVED",
    "create_time": 1728360600,
    "update_time": 1728360600,
    "images": [
      {
        "image_id": "IMG_2025Q4_XYZ001",
        "post_id": 1,
        "display_order": 1,
        "file_url": "http://8.138.115.164:8080/uploads/images/IMG_2025Q4_XYZ001.jpg",
        "thumbnail_url": "http://8.138.115.164:8080/uploads/thumbnails/IMG_2025Q4_XYZ001_thumb.jpg",
        "file_size": 1024000,
        "width": 1920,
        "height": 1080,
        "mime_type": "image/jpeg",
        "create_time": 1728360600
      },
      {
        "image_id": "IMG_2025Q4_XYZ002",
        "post_id": 1,
        "display_order": 2,
        "file_url": "http://8.138.115.164:8080/uploads/images/IMG_2025Q4_XYZ002.jpg",
        "thumbnail_url": "http://8.138.115.164:8080/uploads/thumbnails/IMG_2025Q4_XYZ002_thumb.jpg",
        "file_size": 856000,
        "width": 1920,
        "height": 1080,
        "mime_type": "image/jpeg",
        "create_time": 1728360600
      },
      {
        "image_id": "IMG_2025Q4_XYZ003",
        "post_id": 1,
        "display_order": 3,
        "file_url": "http://8.138.115.164:8080/uploads/images/IMG_2025Q4_XYZ003.jpg",
        "thumbnail_url": "http://8.138.115.164:8080/uploads/thumbnails/IMG_2025Q4_XYZ003_thumb.jpg",
        "file_size": 920000,
        "width": 1920,
        "height": 1080,
        "mime_type": "image/jpeg",
        "create_time": 1728360600
      }
    ]
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `400 Bad Request`: å‚æ•°é”™è¯¯ï¼ˆæ ‡é¢˜ä¸ºç©ºã€å›¾ç‰‡æ•°é‡ä¸ç¬¦åˆè¦æ±‚ç­‰ï¼‰
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 2. è·å–å¸–å­è¯¦æƒ…

**åŠŸèƒ½ä»‹ç»**: è·å–å¸–å­çš„å®Œæ•´ä¿¡æ¯ï¼ˆåŒ…å«æ‰€æœ‰å›¾ç‰‡ï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id`

**è¯·æ±‚å¤´**:
```
æ— éœ€è®¤è¯
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data | object | å¸–å­æ•°æ®å¯¹è±¡ï¼ˆåŒ…å«å®Œæ•´çš„imagesæ•°ç»„ï¼‰ |

**è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "user_id": 1,
    "title": "ç¾å¥½çš„ä¸€å¤©",
    "description": "ä»Šå¤©å¤©æ°”çœŸå¥½ï¼Œæ‹äº†å‡ å¼ ç…§ç‰‡åˆ†äº«ç»™å¤§å®¶",
    "image_count": 3,
    "like_count": 10,
    "favorite_count": 5,
    "view_count": 100,
    "status": "APPROVED",
    "create_time": 1728360600,
    "update_time": 1728360600,
    "images": [
      {
        "image_id": "IMG_2025Q4_XYZ001",
        "post_id": 1,
        "display_order": 1,
        "file_url": "http://8.138.115.164:8080/uploads/images/IMG_2025Q4_XYZ001.jpg",
        "thumbnail_url": "http://8.138.115.164:8080/uploads/thumbnails/IMG_2025Q4_XYZ001_thumb.jpg",
        "file_size": 1024000,
        "width": 1920,
        "height": 1080,
        "mime_type": "image/jpeg",
        "create_time": 1728360600
      }
    ]
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç **:
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 3. æ›´æ–°å¸–å­

**åŠŸèƒ½ä»‹ç»**: æ›´æ–°å¸–å­çš„æ ‡é¢˜å’Œé…æ–‡ï¼ˆåªæœ‰ä½œè€…å¯ä»¥æ›´æ–°ï¼‰

**è¯·æ±‚æ–¹å¼**: `PUT`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
Authorization: Bearer <access_token>
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| title | string | æ˜¯ | æ–°æ ‡é¢˜ï¼ˆ1-255å­—ç¬¦ï¼‰ |
| description | string | å¦ | æ–°é…æ–‡ï¼ˆæœ€å¤š1000å­—ç¬¦ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "title": "æ›´æ–°åçš„æ ‡é¢˜",
  "description": "æ›´æ–°åçš„é…æ–‡"
}
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |

**è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å¸–å­æ›´æ–°æˆåŠŸ",
  "timestamp": 1696752600
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `403 Forbidden`: æ— æƒé™ï¼ˆä¸æ˜¯ä½œè€…ï¼‰
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `400 Bad Request`: å‚æ•°é”™è¯¯
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 4. åˆ é™¤å¸–å­

**åŠŸèƒ½ä»‹ç»**: åˆ é™¤å¸–å­åŠå…¶æ‰€æœ‰å›¾ç‰‡ï¼ˆåªæœ‰ä½œè€…å¯ä»¥åˆ é™¤ï¼‰

**è¯·æ±‚æ–¹å¼**: `DELETE`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer <access_token>
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |

**è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å¸–å­åˆ é™¤æˆåŠŸ",
  "timestamp": 1696752600
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `403 Forbidden`: æ— æƒé™ï¼ˆä¸æ˜¯ä½œè€…ï¼‰
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 5. è·å–Feedæµ

**åŠŸèƒ½ä»‹ç»**: è·å–æœ€æ–°å¸–å­åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/posts`

**è¯·æ±‚å¤´**:
```
æ— éœ€è®¤è¯
```

**æŸ¥è¯¢å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | int | å¦ | é¡µç ï¼ˆé»˜è®¤1ï¼‰ |
| pageSize | int | å¦ | æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼Œæœ€å¤§100ï¼‰ |

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.posts | array | å¸–å­åˆ—è¡¨ï¼ˆåŒ…å«imagesæ•°ç»„ï¼‰ |
| data.total | integer | æ€»å¸–å­æ•° |
| data.page | integer | å½“å‰é¡µç  |
| data.page_size | integer | æ¯é¡µæ•°é‡ |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "posts": [
      {
        "post_id": "POST_2025Q4_ABC123",
        "user_id": 1,
        "title": "ç¾å¥½çš„ä¸€å¤©",
        "description": "ä»Šå¤©å¤©æ°”çœŸå¥½",
        "image_count": 3,
        "like_count": 10,
        "favorite_count": 5,
        "view_count": 100,
        "status": "APPROVED",
        "create_time": 1728360600,
        "update_time": 1728360600,
        "images": [
          {
            "image_id": "IMG_2025Q4_XYZ001",
            "post_id": 1,
            "display_order": 1,
            "file_url": "http://8.138.115.164:8080/uploads/images/IMG_2025Q4_XYZ001.jpg",
            "thumbnail_url": "http://8.138.115.164:8080/uploads/thumbnails/IMG_2025Q4_XYZ001_thumb.jpg",
            "file_size": 1024000,
            "width": 1920,
            "height": 1080,
            "mime_type": "image/jpeg",
            "create_time": 1728360600
          }
        ]
      }
    ],
    "total": 100,
    "page": 1,
    "page_size": 20
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç **:
- `400 Bad Request`: å‚æ•°é”™è¯¯
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 6. è·å–ç”¨æˆ·å¸–å­åˆ—è¡¨

**åŠŸèƒ½ä»‹ç»**: è·å–æŒ‡å®šç”¨æˆ·çš„æ‰€æœ‰å¸–å­ï¼ˆåˆ†é¡µï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/users/:user_id/posts`

**è¯·æ±‚å¤´**:
```
æ— éœ€è®¤è¯
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| user_id | int | æ˜¯ | ç”¨æˆ·ID |

**æŸ¥è¯¢å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | int | å¦ | é¡µç ï¼ˆé»˜è®¤1ï¼‰ |
| pageSize | int | å¦ | æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼Œæœ€å¤§100ï¼‰ |

**è¿”å›å‚æ•°**: åŒ"è·å–Feedæµ"

**é”™è¯¯ç **:
- `400 Bad Request`: å‚æ•°é”™è¯¯
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 7. æ·»åŠ å›¾ç‰‡åˆ°å¸–å­

**åŠŸèƒ½ä»‹ç»**: å‘ç°æœ‰å¸–å­æ·»åŠ å›¾ç‰‡ï¼ˆæœ€å¤š9å¼ ï¼‰

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id/images`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
Authorization: Bearer <access_token>
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| imageFile | string | æ˜¯ | å›¾ç‰‡æ–‡ä»¶è·¯å¾„ |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "imageFile": "/tmp/upload_new123.jpg"
}
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |

**è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å›¾ç‰‡æ·»åŠ æˆåŠŸ",
  "timestamp": 1696752600
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `403 Forbidden`: æ— æƒé™ï¼ˆä¸æ˜¯ä½œè€…ï¼‰
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `400 Bad Request`: å›¾ç‰‡æ•°é‡å·²è¾¾ä¸Šé™ï¼ˆ9å¼ ï¼‰
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 8. ä»å¸–å­åˆ é™¤å›¾ç‰‡

**åŠŸèƒ½ä»‹ç»**: ä»å¸–å­ä¸­åˆ é™¤æŒ‡å®šå›¾ç‰‡ï¼ˆè‡³å°‘ä¿ç•™1å¼ ï¼‰

**è¯·æ±‚æ–¹å¼**: `DELETE`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id/images/:image_id`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer <access_token>
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |
| image_id | string | æ˜¯ | å›¾ç‰‡ä¸šåŠ¡ID |

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |

**è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å›¾ç‰‡åˆ é™¤æˆåŠŸ",
  "timestamp": 1696752600
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `403 Forbidden`: æ— æƒé™ï¼ˆä¸æ˜¯ä½œè€…ï¼‰
- `404 Not Found`: å¸–å­æˆ–å›¾ç‰‡ä¸å­˜åœ¨
- `400 Bad Request`: ä¸èƒ½åˆ é™¤æœ€åä¸€å¼ å›¾ç‰‡
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 9. è°ƒæ•´å›¾ç‰‡é¡ºåº

**åŠŸèƒ½ä»‹ç»**: è°ƒæ•´å¸–å­ä¸­å›¾ç‰‡çš„æ˜¾ç¤ºé¡ºåº

**è¯·æ±‚æ–¹å¼**: `PUT`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id/images/order`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
Authorization: Bearer <access_token>
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| imageIds | array | æ˜¯ | å›¾ç‰‡IDæ•°ç»„ï¼ˆæŒ‰æ–°é¡ºåºæ’åˆ—ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```json
{
  "imageIds": [
    "IMG_2025Q4_XYZ003",
    "IMG_2025Q4_XYZ001",
    "IMG_2025Q4_XYZ002"
  ]
}
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |

**è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å›¾ç‰‡é¡ºåºè°ƒæ•´æˆåŠŸ",
  "timestamp": 1696752600
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `403 Forbidden`: æ— æƒé™ï¼ˆä¸æ˜¯ä½œè€…ï¼‰
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `400 Bad Request`: å›¾ç‰‡IDæ•°é‡ä¸åŒ¹é…æˆ–åŒ…å«æ— æ•ˆID
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

## ç‚¹èµç›¸å…³API

> **ğŸ†• v2.2.0 æ–°å¢**: æ”¯æŒå¸–å­ç‚¹èµåŠŸèƒ½

### 1. ç‚¹èµå¸–å­

**åŠŸèƒ½ä»‹ç»**: ä¸ºå¸–å­ç‚¹èµ

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id/like`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.post_id | string | å¸–å­ID |
| data.like_count | integer | ç‚¹èµæ€»æ•° |
| data.has_liked | boolean | å½“å‰ç”¨æˆ·æ˜¯å¦å·²ç‚¹èµ |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "ç‚¹èµæˆåŠŸ",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "like_count": 11,
    "has_liked": true
  },
  "timestamp": 1728360600
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**ï¼ˆå·²ç‚¹èµï¼‰:
```json
{
  "success": false,
  "message": "æ‚¨å·²ç»ç‚¹èµè¿‡è¯¥å¸–å­",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "like_count": 10,
    "has_liked": true
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `400 Bad Request`: å·²ç»ç‚¹èµè¿‡è¯¥å¸–å­
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 2. å–æ¶ˆç‚¹èµ

**åŠŸèƒ½ä»‹ç»**: å–æ¶ˆå¯¹å¸–å­çš„ç‚¹èµ

**è¯·æ±‚æ–¹å¼**: `DELETE`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id/like`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.post_id | string | å¸–å­ID |
| data.like_count | integer | ç‚¹èµæ€»æ•° |
| data.has_liked | boolean | å½“å‰ç”¨æˆ·æ˜¯å¦å·²ç‚¹èµ |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å–æ¶ˆç‚¹èµæˆåŠŸ",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "like_count": 9,
    "has_liked": false
  },
  "timestamp": 1728360600
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**ï¼ˆæœªç‚¹èµï¼‰:
```json
{
  "success": false,
  "message": "æ‚¨å°šæœªç‚¹èµè¯¥å¸–å­",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "like_count": 10,
    "has_liked": false
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `400 Bad Request`: å°šæœªç‚¹èµè¯¥å¸–å­
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 3. æŸ¥è¯¢ç‚¹èµçŠ¶æ€

**åŠŸèƒ½ä»‹ç»**: æŸ¥è¯¢å½“å‰ç”¨æˆ·å¯¹æŒ‡å®šå¸–å­çš„ç‚¹èµçŠ¶æ€

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id/like/status`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.post_id | string | å¸–å­ID |
| data.has_liked | boolean | å½“å‰ç”¨æˆ·æ˜¯å¦å·²ç‚¹èµ |
| data.like_count | integer | å¸–å­æ€»ç‚¹èµæ•° |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "has_liked": true,
    "like_count": 10
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

## æ”¶è—ç›¸å…³API

> **ğŸ†• v2.2.0 æ–°å¢**: æ”¯æŒå¸–å­æ”¶è—åŠŸèƒ½

### 1. æ”¶è—å¸–å­

**åŠŸèƒ½ä»‹ç»**: æ”¶è—å¸–å­

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id/favorite`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.post_id | string | å¸–å­ID |
| data.favorite_count | integer | æ”¶è—æ€»æ•° |
| data.has_favorited | boolean | å½“å‰ç”¨æˆ·æ˜¯å¦å·²æ”¶è— |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æ”¶è—æˆåŠŸ",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "favorite_count": 6,
    "has_favorited": true
  },
  "timestamp": 1728360600
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**ï¼ˆå·²æ”¶è—ï¼‰:
```json
{
  "success": false,
  "message": "æ‚¨å·²ç»æ”¶è—è¿‡è¯¥å¸–å­",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "favorite_count": 5,
    "has_favorited": true
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `400 Bad Request`: å·²ç»æ”¶è—è¿‡è¯¥å¸–å­
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 2. å–æ¶ˆæ”¶è—

**åŠŸèƒ½ä»‹ç»**: å–æ¶ˆæ”¶è—å¸–å­

**è¯·æ±‚æ–¹å¼**: `DELETE`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id/favorite`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.post_id | string | å¸–å­ID |
| data.favorite_count | integer | æ”¶è—æ€»æ•° |
| data.has_favorited | boolean | å½“å‰ç”¨æˆ·æ˜¯å¦å·²æ”¶è— |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å–æ¶ˆæ”¶è—æˆåŠŸ",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "favorite_count": 4,
    "has_favorited": false
  },
  "timestamp": 1728360600
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**ï¼ˆæœªæ”¶è—ï¼‰:
```json
{
  "success": false,
  "message": "æ‚¨å°šæœªæ”¶è—è¯¥å¸–å­",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "favorite_count": 5,
    "has_favorited": false
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `400 Bad Request`: å°šæœªæ”¶è—è¯¥å¸–å­
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 3. æŸ¥è¯¢æ”¶è—çŠ¶æ€

**åŠŸèƒ½ä»‹ç»**: æŸ¥è¯¢å½“å‰ç”¨æˆ·å¯¹æŒ‡å®šå¸–å­çš„æ”¶è—çŠ¶æ€

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id/favorite/status`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.post_id | string | å¸–å­ID |
| data.has_favorited | boolean | å½“å‰ç”¨æˆ·æ˜¯å¦å·²æ”¶è— |
| data.favorite_count | integer | å¸–å­æ€»æ”¶è—æ•° |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "post_id": "POST_2025Q4_ABC123",
    "has_favorited": true,
    "favorite_count": 5
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 4. è·å–ç”¨æˆ·æ”¶è—åˆ—è¡¨

**åŠŸèƒ½ä»‹ç»**: è·å–å½“å‰ç”¨æˆ·çš„æ”¶è—å¸–å­åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/my/favorites`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**æŸ¥è¯¢å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | integer | å¦ | é¡µç ï¼ˆé»˜è®¤1ï¼‰ |
| page_size | integer | å¦ | æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼Œæœ€å¤§100ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/v1/my/favorites?page=1&page_size=20
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.posts | array | æ”¶è—çš„å¸–å­åˆ—è¡¨ï¼ˆåŒ…å«å®Œæ•´å›¾ç‰‡ä¿¡æ¯ï¼‰ |
| data.total | integer | æ€»æ”¶è—æ•° |
| data.page | integer | å½“å‰é¡µç  |
| data.page_size | integer | æ¯é¡µæ•°é‡ |
| data.total_pages | integer | æ€»é¡µæ•° |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "posts": [
      {
        "post_id": "POST_2025Q4_ABC123",
        "user_id": 1,
        "title": "ç¾å¥½çš„ä¸€å¤©",
        "description": "ä»Šå¤©å¤©æ°”çœŸå¥½",
        "image_count": 3,
        "like_count": 10,
        "favorite_count": 5,
        "view_count": 100,
        "status": "APPROVED",
        "create_time": 1728360600,
        "update_time": 1728360600,
        "images": [
          {
            "image_id": "IMG_2025Q4_XYZ001",
            "post_id": 1,
            "display_order": 1,
            "file_url": "http://8.138.115.164:8080/uploads/images/IMG_2025Q4_XYZ001.jpg",
            "thumbnail_url": "http://8.138.115.164:8080/uploads/thumbnails/IMG_2025Q4_XYZ001_thumb.jpg",
            "file_size": 1024000,
            "width": 1920,
            "height": 1080,
            "mime_type": "image/jpeg",
            "create_time": 1728360600
          }
        ]
      }
    ],
    "total": 15,
    "page": 1,
    "page_size": 20,
    "total_pages": 1
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `400 Bad Request`: å‚æ•°é”™è¯¯
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

## åˆ†äº«ç›¸å…³API

> **ğŸ†• v2.3.0 æ–°å¢**: æ”¯æŒå¸–å­åˆ†äº«åŠŸèƒ½ï¼Œç”ŸæˆçŸ­é“¾æ¥

### 1. åˆ›å»ºå¸–å­åˆ†äº«é“¾æ¥

**åŠŸèƒ½ä»‹ç»**: ä¸ºå¸–å­åˆ›å»ºåˆ†äº«çŸ­é“¾æ¥ï¼Œæ”¯æŒiOS/Android/HarmonyOSä¸‰ç«¯Deep Link

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/posts/:post_id/share`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| post_id | string | æ˜¯ | å¸–å­ä¸šåŠ¡ID |

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.short_code | string | çŸ­é“¾æ¥ä»£ç ï¼ˆ8ä½Base62ç¼–ç ï¼‰ |
| data.short_url | string | å®Œæ•´çŸ­é“¾æ¥URL |
| data.post_id | string | å¸–å­ID |
| data.create_time | integer | åˆ›å»ºæ—¶é—´ |
| data.expire_time | integer | è¿‡æœŸæ—¶é—´ï¼ˆnullè¡¨ç¤ºæ°¸ä¹…æœ‰æ•ˆï¼‰ |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "åˆ†äº«é“¾æ¥åˆ›å»ºæˆåŠŸ",
  "data": {
    "short_code": "kHr7ZS9a",
    "short_url": "http://8.138.115.164:8080/s/kHr7ZS9a",
    "post_id": "POST_2025Q4_ABC123",
    "create_time": 1728360600,
    "expire_time": null
  },
  "timestamp": 1728360600
}
```

**æ³¨æ„äº‹é¡¹**:
- åŒä¸€ä¸ªå¸–å­å¤šæ¬¡è°ƒç”¨ä¼šè¿”å›ç›¸åŒçš„çŸ­é“¾æ¥ï¼ˆå»é‡é€»è¾‘ï¼‰
- çŸ­é“¾æ¥ä»£ç ç”±é›ªèŠ±IDç®—æ³•+Base62ç¼–ç ç”Ÿæˆï¼Œ8ä½é•¿åº¦
- æ”¯æŒDeep Linkè·³è½¬åˆ°åŸç”ŸAPPï¼š
  - iOS: Universal Links
  - Android: App Links
  - HarmonyOS: Deep Linking + App Linking

**é”™è¯¯ç è¯´æ˜**:
- `401 Unauthorized`: æœªæä¾›è®¤è¯ä»¤ç‰Œæˆ–ä»¤ç‰Œæ— æ•ˆ
- `404 Not Found`: å¸–å­ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 2. è§£æåˆ†äº«é“¾æ¥

**åŠŸèƒ½ä»‹ç»**: æ ¹æ®çŸ­é“¾æ¥ä»£ç è·å–å¸–å­ä¿¡æ¯ï¼ˆå…¬å¼€æ¥å£ï¼Œæ— éœ€è®¤è¯ï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/share/:code`

**è¯·æ±‚å¤´**: æ— éœ€è®¤è¯

**è·¯å¾„å‚æ•°**:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| code | string | æ˜¯ | çŸ­é“¾æ¥ä»£ç  |

**è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/v1/share/kHr7ZS9a
```

**è¿”å›å‚æ•°**:
| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| success | boolean | æ˜¯å¦æˆåŠŸ |
| message | string | è¿”å›æ¶ˆæ¯ |
| data.post | object | å¸–å­å®Œæ•´ä¿¡æ¯ï¼ˆåŒ…å«imagesæ•°ç»„ï¼‰ |
| data.share_info | object | åˆ†äº«é“¾æ¥ä¿¡æ¯ |
| data.share_info.short_code | string | çŸ­é“¾æ¥ä»£ç  |
| data.share_info.create_time | integer | åˆ›å»ºæ—¶é—´ |
| timestamp | integer | å“åº”æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "post": {
      "post_id": "POST_2025Q4_ABC123",
      "user_id": 1,
      "title": "ç¾å¥½çš„ä¸€å¤©",
      "description": "ä»Šå¤©å¤©æ°”çœŸå¥½",
      "image_count": 3,
      "like_count": 10,
      "favorite_count": 5,
      "view_count": 101,
      "status": "APPROVED",
      "create_time": 1728360600,
      "update_time": 1728360600,
      "images": [
        {
          "image_id": "IMG_2025Q4_XYZ001",
          "post_id": 1,
          "display_order": 1,
          "file_url": "http://8.138.115.164:8080/uploads/images/IMG_2025Q4_XYZ001.jpg",
          "thumbnail_url": "http://8.138.115.164:8080/uploads/thumbnails/IMG_2025Q4_XYZ001_thumb.jpg",
          "file_size": 1024000,
          "width": 1920,
          "height": 1080,
          "mime_type": "image/jpeg",
          "create_time": 1728360600
        }
      ]
    },
    "share_info": {
      "short_code": "kHr7ZS9a",
      "create_time": 1728360600
    }
  },
  "timestamp": 1728360600
}
```

**é”™è¯¯ç è¯´æ˜**:
- `404 Not Found`: åˆ†äº«é“¾æ¥ä¸å­˜åœ¨æˆ–å·²è¿‡æœŸ
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

**æ³¨æ„äº‹é¡¹**:
- æ­¤æ¥å£æ— éœ€è®¤è¯ï¼Œä»»ä½•äººéƒ½å¯ä»¥è®¿é—®
- è®¿é—®åˆ†äº«é“¾æ¥ä¼šè‡ªåŠ¨å¢åŠ å¸–å­æµè§ˆæ•°
- æ”¯æŒä¸‰ç«¯Deep Linkè‡ªåŠ¨è·³è½¬APP

---

## å›¾ç‰‡ç®¡ç†API

> **âš ï¸ éƒ¨åˆ†APIå·²åºŸå¼ƒ**: å»ºè®®ä½¿ç”¨å¸–å­ç®¡ç†API

### 1. ä¸Šä¼ å›¾ç‰‡

**åŠŸèƒ½ä»‹ç»**: ç”¨æˆ·ä¸Šä¼ å›¾æ–‡æ¨æ–‡ï¼ˆå›¾ç‰‡ä¸ºä¸» + é…æ–‡ï¼‰

**è¯·æ±‚æ–¹å¼**: `POST`

**è¯·æ±‚è·¯å¾„**: `/images`

**è¯·æ±‚å¤´**:
```
Content-Type: multipart/form-data
Authorization: Bearer {access_token}
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| image | File | æ˜¯ | å›¾ç‰‡æ–‡ä»¶ï¼ˆæ”¯æŒJPEG/PNG/WebPï¼Œæœ€å¤§5MBï¼‰ |
| title | String | æ˜¯ | æ¨æ–‡æ ‡é¢˜ï¼ˆæœ€å¤š255å­—ç¬¦ï¼‰ |
| description | String | å¦ | æ¨æ–‡é…æ–‡ï¼ˆè¯¦ç»†æè¿°ï¼‰ |
| tags | String | å¦ | æ ‡ç­¾åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼Œæœ€å¤š5ä¸ªï¼‰ |

**è¿”å›å€¼**:

```json
{
  "success": true,
  "message": "å›¾ç‰‡ä¸Šä¼ æˆåŠŸ",
  "data": {
    "id": 1,
    "image_id": "IMG_2025Q4_123456",
    "user_id": 1,
    "title": "ç¾ä¸½çš„é£æ™¯",
    "description": "ä»Šå¤©æ‹æ‘„çš„æ—¥è½",
    "file_url": "http://8.138.115.164:8080/uploads/images/abc123.jpg",
    "thumbnail_url": "http://8.138.115.164:8080/uploads/thumbnails/abc123_thumb.jpg",
    "file_size": 1024000,
    "width": 1920,
    "height": 1080,
    "mime_type": "image/jpeg",
    "like_count": 0,
    "favorite_count": 0,
    "view_count": 0,
    "status": "APPROVED",
    "create_time": 1759844400,
    "update_time": 1759844400
  },
  "timestamp": 1759844400
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›æˆ–æ— æ•ˆçš„è®¤è¯ä»¤ç‰Œ
- `400 Bad Request`: è¯·æ±‚å‚æ•°é”™è¯¯ï¼ˆæœªæ‰¾åˆ°å›¾ç‰‡æ–‡ä»¶ã€æ ‡é¢˜ä¸ºç©ºã€æ–‡ä»¶è¿‡å¤§ç­‰ï¼‰
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 2. è·å–æœ€æ–°å›¾ç‰‡åˆ—è¡¨

**åŠŸèƒ½ä»‹ç»**: è·å–æœ€æ–°å‘å¸ƒçš„å›¾æ–‡æ¨æ–‡åˆ—è¡¨ï¼ˆæŒ‰æ—¶é—´å€’åºï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/images?page=1&page_size=20`

**è¯·æ±‚å¤´**:
```
æ— éœ€è®¤è¯
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| page | Integer | å¦ | 1 | é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ |
| page_size | Integer | å¦ | 20 | æ¯é¡µæ•°é‡ï¼ˆæœ€å¤§100ï¼‰ |

**è¿”å›å€¼**:

```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "total": 100,
    "page": 1,
    "page_size": 20,
    "images": [
      {
        "id": 1,
        "image_id": "IMG_2025Q4_123456",
        "user_id": 1,
        "title": "ç¾ä¸½çš„é£æ™¯",
        "description": "ä»Šå¤©æ‹æ‘„çš„æ—¥è½",
        "file_url": "http://8.138.115.164:8080/uploads/images/abc123.jpg",
        "thumbnail_url": "http://8.138.115.164:8080/uploads/thumbnails/abc123_thumb.jpg",
        "file_size": 1024000,
        "width": 1920,
        "height": 1080,
        "mime_type": "image/jpeg",
        "like_count": 10,
        "favorite_count": 5,
        "view_count": 100,
        "status": "APPROVED",
        "create_time": 1759844400,
        "update_time": 1759844400
      }
    ]
  },
  "timestamp": 1759844400
}
```

**é”™è¯¯ç **:
- `400 Bad Request`: è¯·æ±‚å‚æ•°é”™è¯¯
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 3. è·å–å›¾ç‰‡è¯¦æƒ…

**åŠŸèƒ½ä»‹ç»**: è·å–æŒ‡å®šå›¾æ–‡æ¨æ–‡çš„è¯¦ç»†ä¿¡æ¯ï¼ˆä¼šå¢åŠ æµè§ˆæ•°ï¼‰

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/images/:id`

**è¯·æ±‚å¤´**:
```
æ— éœ€è®¤è¯
```

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | String | å›¾ç‰‡ä¸šåŠ¡é€»è¾‘IDï¼ˆimage_idï¼‰ |

**è¿”å›å€¼**:

```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "id": 1,
    "image_id": "IMG_2025Q4_123456",
    "user_id": 1,
    "title": "ç¾ä¸½çš„é£æ™¯",
    "description": "ä»Šå¤©æ‹æ‘„çš„æ—¥è½",
    "file_url": "http://8.138.115.164:8080/uploads/images/abc123.jpg",
    "thumbnail_url": "http://8.138.115.164:8080/uploads/thumbnails/abc123_thumb.jpg",
    "file_size": 1024000,
    "width": 1920,
    "height": 1080,
    "mime_type": "image/jpeg",
    "like_count": 10,
    "favorite_count": 5,
    "view_count": 101,
    "status": "APPROVED",
    "create_time": 1759844400,
    "update_time": 1759844400
  },
  "timestamp": 1759844400
}
```

**é”™è¯¯ç **:
- `404 Not Found`: å›¾ç‰‡ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 4. æ›´æ–°å›¾æ–‡é…æ–‡

> **âŒ å·²åºŸå¼ƒ**: è¯·ä½¿ç”¨ `PUT /posts/:post_id` ä»£æ›¿

**åŠŸèƒ½ä»‹ç»**: æ›´æ–°å›¾æ–‡æ¨æ–‡çš„æ ‡é¢˜å’Œé…æ–‡ï¼ˆåªæœ‰æ‰€æœ‰è€…å¯ä»¥ç¼–è¾‘ï¼‰

**è¯·æ±‚æ–¹å¼**: `PUT`

**è¯·æ±‚è·¯å¾„**: `/images/:id`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | String | å›¾ç‰‡ä¸šåŠ¡é€»è¾‘IDï¼ˆimage_idï¼‰ |

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| title | String | æ˜¯ | æ–°æ ‡é¢˜ï¼ˆæœ€å¤š255å­—ç¬¦ï¼‰ |
| description | String | å¦ | æ–°é…æ–‡ |

**è¯·æ±‚ç¤ºä¾‹**:

```json
{
  "title": "æ›´æ–°åçš„æ ‡é¢˜",
  "description": "æ›´æ–°åçš„é…æ–‡"
}
```

**è¿”å›å€¼**:

```json
{
  "success": true,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": null,
  "timestamp": 1759844400
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›æˆ–æ— æ•ˆçš„è®¤è¯ä»¤ç‰Œ
- `403 Forbidden`: æ— æƒé™ï¼ˆä¸æ˜¯å›¾ç‰‡æ‰€æœ‰è€…ï¼‰æˆ–å›¾ç‰‡ä¸å­˜åœ¨
- `400 Bad Request`: è¯·æ±‚å‚æ•°é”™è¯¯ï¼ˆæ ‡é¢˜ä¸ºç©ºã€æ ‡é¢˜è¿‡é•¿ç­‰ï¼‰
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 5. åˆ é™¤å›¾ç‰‡

**åŠŸèƒ½ä»‹ç»**: åˆ é™¤å›¾æ–‡æ¨æ–‡ï¼ˆåªæœ‰æ‰€æœ‰è€…å¯ä»¥åˆ é™¤ï¼‰

**è¯·æ±‚æ–¹å¼**: `DELETE`

**è¯·æ±‚è·¯å¾„**: `/images/:id`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer {access_token}
```

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | String | å›¾ç‰‡ä¸šåŠ¡é€»è¾‘IDï¼ˆimage_idï¼‰ |

**è¿”å›å€¼**:

```json
{
  "success": true,
  "message": "åˆ é™¤æˆåŠŸ",
  "data": null,
  "timestamp": 1759844400
}
```

**é”™è¯¯ç **:
- `401 Unauthorized`: æœªæä¾›æˆ–æ— æ•ˆçš„è®¤è¯ä»¤ç‰Œ
- `403 Forbidden`: æ— æƒé™ï¼ˆä¸æ˜¯å›¾ç‰‡æ‰€æœ‰è€…ï¼‰æˆ–å›¾ç‰‡ä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

### 6. è·å–ç”¨æˆ·å›¾ç‰‡åˆ—è¡¨

**åŠŸèƒ½ä»‹ç»**: è·å–æŒ‡å®šç”¨æˆ·å‘å¸ƒçš„å›¾æ–‡æ¨æ–‡åˆ—è¡¨

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/users/:id/images?page=1&page_size=20`

**è¯·æ±‚å¤´**:
```
æ— éœ€è®¤è¯
```

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | Integer | ç”¨æˆ·ID |

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| page | Integer | å¦ | 1 | é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ |
| page_size | Integer | å¦ | 20 | æ¯é¡µæ•°é‡ï¼ˆæœ€å¤§100ï¼‰ |

**è¿”å›å€¼**:

```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "total": 50,
    "page": 1,
    "page_size": 20,
    "images": [
      {
        "id": 1,
        "image_id": "IMG_2025Q4_123456",
        "user_id": 1,
        "title": "ç¾ä¸½çš„é£æ™¯",
        "description": "ä»Šå¤©æ‹æ‘„çš„æ—¥è½",
        "file_url": "http://8.138.115.164:8080/uploads/images/abc123.jpg",
        "thumbnail_url": "http://8.138.115.164:8080/uploads/thumbnails/abc123_thumb.jpg",
        "file_size": 1024000,
        "width": 1920,
        "height": 1080,
        "mime_type": "image/jpeg",
        "like_count": 10,
        "favorite_count": 5,
        "view_count": 100,
        "status": "APPROVED",
        "create_time": 1759844400,
        "update_time": 1759844400
      }
    ]
  },
  "timestamp": 1759844400
}
```

**é”™è¯¯ç **:
- `400 Bad Request`: è¯·æ±‚å‚æ•°é”™è¯¯
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---


## ç³»ç»Ÿç›¸å…³API

### 1. å¥åº·æ£€æŸ¥

**åŠŸèƒ½ä»‹ç»**: æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/health`

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| status | string | æœåŠ¡çŠ¶æ€ |
| timestamp | integer | æ—¶é—´æˆ³ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "status": "healthy",
  "timestamp": 1704067200
}
```

---

### 2. ç³»ç»ŸæŒ‡æ ‡

**åŠŸèƒ½ä»‹ç»**: è·å–ç³»ç»Ÿè¿è¡ŒæŒ‡æ ‡

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/metrics`

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| uptime | integer | è¿è¡Œæ—¶é—´ï¼ˆç§’ï¼‰ |
| requests_total | integer | æ€»è¯·æ±‚æ•° |
| database_connections | integer | æ•°æ®åº“è¿æ¥æ•° |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "uptime": 3600,
  "requests_total": 1234,
  "database_connections": 10
}
```

---

### 3. ç‰ˆæœ¬ä¿¡æ¯

**åŠŸèƒ½ä»‹ç»**: è·å–APIç‰ˆæœ¬ä¿¡æ¯

**è¯·æ±‚æ–¹å¼**: `GET`

**è¯·æ±‚è·¯å¾„**: `/api/v1/version`

**è¯·æ±‚å‚æ•°**: æ— 

**è¿”å›å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| version | string | APIç‰ˆæœ¬ |
| build_time | string | æ„å»ºæ—¶é—´ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:
```json
{
  "version": "1.0.0",
  "build_time": "2025-01-01T00:00:00Z"
}
```

---

## ğŸ“Œ é€šç”¨è¯´æ˜

### è®¤è¯æ–¹å¼

å¤§éƒ¨åˆ†APIéœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦JWTè®¿é—®ä»¤ç‰Œï¼š

```
Authorization: Bearer {access_token}
```

### å“åº”æ ¼å¼

æ‰€æœ‰APIå“åº”å‡ä¸ºJSONæ ¼å¼ï¼ŒåŒ…å«ä»¥ä¸‹åŸºæœ¬å­—æ®µï¼š

```json
{
  "success": true/false,
  "message": "æ¶ˆæ¯å†…å®¹",
  "data": {}
}
```

### é”™è¯¯å¤„ç†

å½“è¯·æ±‚å¤±è´¥æ—¶ï¼Œå“åº”ä¸­ä¼šåŒ…å«è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼š

```json
{
  "success": false,
  "message": "é”™è¯¯æè¿°",
  "data": null
}
```

### çŠ¶æ€ç 

- `200 OK`: è¯·æ±‚æˆåŠŸ
- `400 Bad Request`: è¯·æ±‚å‚æ•°é”™è¯¯
- `401 Unauthorized`: æœªæˆæƒï¼ˆä»¤ç‰Œæ— æ•ˆæˆ–è¿‡æœŸï¼‰
- `403 Forbidden`: ç¦æ­¢è®¿é—®
- `404 Not Found`: èµ„æºä¸å­˜åœ¨
- `500 Internal Server Error`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

---

## ğŸ” å®‰å…¨è¯´æ˜

1. **å¯†ç å®‰å…¨**: ä½¿ç”¨PBKDF2-HMAC-SHA256ç®—æ³•ï¼Œ100,000æ¬¡è¿­ä»£
2. **ä»¤ç‰Œå®‰å…¨**: JWTä»¤ç‰Œä½¿ç”¨HS256ç­¾åç®—æ³•
3. **ä¼ è¾“å®‰å…¨**: ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨HTTPS
4. **SQLæ³¨å…¥é˜²æŠ¤**: æ‰€æœ‰æ•°æ®åº“æŸ¥è¯¢ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.4.0 (2025-10-14) **ğŸ¯ å½“å‰ç‰ˆæœ¬**
- âœ… å®Œå–„APIæ–‡æ¡£
  - ä¿®å¤å¸–å­ç®¡ç†APIè¿”å›ç¤ºä¾‹ï¼ˆç»Ÿä¸€ä½¿ç”¨ä¸‹åˆ’çº¿å‘½åï¼‰
  - è¡¥å……imagesæ•°ç»„å®Œæ•´å­—æ®µè¯´æ˜ï¼ˆimage_id, display_order, file_urlç­‰ï¼‰
  - æ·»åŠ æ‰€æœ‰è¿”å›å‚æ•°çš„è¯¦ç»†å«ä¹‰è¯´æ˜
  - ä¿®å¤ä¿®æ”¹å¯†ç APIè·¯å¾„ï¼ˆPUT /auth/passwordï¼‰
- âœ… æ–‡æ¡£æ›´æ–°ä¸è§„èŒƒåŒ–
  - ç»Ÿä¸€JSONå­—æ®µå‘½åè§„èŒƒï¼ˆsnake_caseï¼‰
  - è¡¥å……æ‰€æœ‰APIçš„å®Œæ•´è¿”å›å‚æ•°è¯´æ˜
  - ä¼˜åŒ–æ–‡æ¡£ç»“æ„å’Œç›®å½•ç»„ç»‡

### v2.3.0 (2025-10-11)
- âœ… æ–°å¢åˆ†äº«ç³»ç»ŸAPIï¼ˆ2ä¸ªæ¥å£ï¼‰
  - POST /posts/:post_id/share - åˆ›å»ºå¸–å­åˆ†äº«é“¾æ¥
  - GET /share/:code - è§£æåˆ†äº«é“¾æ¥ï¼ˆå…¬å¼€æ¥å£ï¼‰
- âœ… æŠ€æœ¯å®ç°
  - é›ªèŠ±IDç®—æ³• + Base62ç¼–ç ï¼ˆ8ä½çŸ­ç ï¼‰
  - çŸ­é“¾æ¥å»é‡é€»è¾‘
  - åˆ†äº«é“¾æ¥è¿‡æœŸæœºåˆ¶
- âœ… Deep Linkæ”¯æŒ
  - iOS Universal Linksé…ç½®
  - Android App Linksé…ç½®
  - HarmonyOS Deep Linking + App Linkingé…ç½®
- âœ… æ•°æ®åº“
  - æ–°å¢ share_links è¡¨ï¼ˆ7å­—æ®µï¼Œ4ç´¢å¼•ï¼‰
  - å¤–é”®çº§è”åˆ é™¤ï¼ˆåˆ é™¤å¸–å­è‡ªåŠ¨åˆ é™¤åˆ†äº«é“¾æ¥ï¼‰

### v2.2.0 (2025-10-10)
- âœ… æ–°å¢ç‚¹èµç›¸å…³APIï¼ˆ3ä¸ªæ¥å£ï¼‰
  - POST /posts/:post_id/like - ç‚¹èµå¸–å­
  - DELETE /posts/:post_id/like - å–æ¶ˆç‚¹èµ
  - GET /posts/:post_id/like/status - æŸ¥è¯¢ç‚¹èµçŠ¶æ€
- âœ… æ–°å¢æ”¶è—ç›¸å…³APIï¼ˆ4ä¸ªæ¥å£ï¼‰
  - POST /posts/:post_id/favorite - æ”¶è—å¸–å­
  - DELETE /posts/:post_id/favorite - å–æ¶ˆæ”¶è—
  - GET /posts/:post_id/favorite/status - æŸ¥è¯¢æ”¶è—çŠ¶æ€
  - GET /my/favorites - è·å–ç”¨æˆ·æ”¶è—åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
- âœ… æ•°æ®åº“
  - æ–°å¢ likes è¡¨ï¼ˆç”¨æˆ·ç‚¹èµè®°å½•ï¼‰
  - æ–°å¢ favorites è¡¨ï¼ˆç”¨æˆ·æ”¶è—è®°å½•ï¼‰
  - æ·»åŠ ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
  - å®ç°ç‚¹èµ/æ”¶è—æ•°çš„å®æ—¶æ›´æ–°

### v2.1.0 (2025-10-09)
- âœ… æ–°å¢ç”¨æˆ·ä¿¡æ¯ç®¡ç†APIï¼ˆ4ä¸ªæ¥å£ï¼‰
  - GET /users/profile - è·å–å½“å‰ç”¨æˆ·å®Œæ•´ä¿¡æ¯
  - PUT /users/profile - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
  - GET /users/check-username - æ£€æŸ¥ç”¨æˆ·åå¯ç”¨æ€§
  - GET /users/:user_id - è·å–ç”¨æˆ·å…¬å¼€ä¿¡æ¯
- âœ… æ•°æ®åº“
  - usersè¡¨æ–°å¢å­—æ®µï¼šbio, gender, location, website, avatar_url
  - ä¼˜åŒ–ç”¨æˆ·ä¿¡æ¯å­˜å‚¨ç»“æ„

### v2.0.0 (2025-10-08)
- âœ… æ–°å¢å¸–å­ç®¡ç†APIï¼ˆ9ä¸ªæ¥å£ï¼‰
  - åˆ›å»ºå¸–å­ï¼ˆæ”¯æŒ1-9å¼ å›¾ç‰‡ï¼‰
  - è·å–å¸–å­è¯¦æƒ…
  - æ›´æ–°å¸–å­
  - åˆ é™¤å¸–å­
  - è·å–Feedæµï¼ˆåˆ†é¡µï¼‰
  - è·å–ç”¨æˆ·å¸–å­åˆ—è¡¨
  - æ·»åŠ å›¾ç‰‡åˆ°å¸–å­
  - åˆ é™¤å¸–å­ä¸­çš„å›¾ç‰‡
  - è°ƒæ•´å›¾ç‰‡é¡ºåº
- âœ… å›¾ç‰‡ç®¡ç†APIå‡çº§ä¸ºå¸–å­ç³»ç»Ÿ
- âŒ åºŸå¼ƒ PUT /images/:image_id/textï¼ˆä½¿ç”¨ PUT /posts/:post_id ä»£æ›¿ï¼‰

### v1.2.0 (2025-10-05)
- âœ… æ–°å¢å›¾ç‰‡ç®¡ç†APIï¼ˆ6ä¸ªæ¥å£ï¼‰
  - ä¸Šä¼ å›¾ç‰‡
  - è·å–å›¾ç‰‡è¯¦æƒ…
  - è·å–æœ€è¿‘å›¾ç‰‡åˆ—è¡¨
  - æ›´æ–°å›¾ç‰‡æ–‡æœ¬
  - åˆ é™¤å›¾ç‰‡
  - è·å–ç”¨æˆ·å›¾ç‰‡åˆ—è¡¨

### v1.0.0 (2025-01-XX)
- âœ… å®ç°ç”¨æˆ·æ³¨å†ŒAPI
- âœ… å®ç°ç”¨æˆ·ç™»å½•APIï¼ˆæ”¯æŒç”¨æˆ·å/æ‰‹æœºå·/é‚®ç®±ï¼‰
- âœ… å®ç°ä»¤ç‰ŒéªŒè¯API
- âœ… å®ç°ä»¤ç‰Œåˆ·æ–°API
- âœ… å®ç°ç”¨æˆ·ç™»å‡ºAPI
- âœ… å®ç°ä¿®æ”¹å¯†ç API
- âœ… å®ç°å¥åº·æ£€æŸ¥API
- âœ… å®ç°ç³»ç»ŸæŒ‡æ ‡API
- âœ… å®ç°ç‰ˆæœ¬ä¿¡æ¯API

---

**æ–‡æ¡£æœ€åæ›´æ–°**: 2025-10-14
**ç»´æŠ¤è€…**: Knot Development Team
