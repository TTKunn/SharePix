# [117] å¸–å­æ¥å£ç”¨æˆ·IDé€»è¾‘åŒ–æ”¹é€ æ–¹æ¡ˆ

**æ–‡æ¡£ç¼–å·**: [117]  
**åˆ›å»ºæ—¶é—´**: 2025-10-18  
**ä½œè€…**: Knot Team  
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜ä¼˜å…ˆçº§  
**çŠ¶æ€**: å¾…å®¡æ‰¹  

---

## ğŸ“‹ ç›®å½•

- [ä¸€ã€é—®é¢˜æ¦‚è¿°](#ä¸€é—®é¢˜æ¦‚è¿°)
- [äºŒã€å½±å“èŒƒå›´åˆ†æ](#äºŒå½±å“èŒƒå›´åˆ†æ)
- [ä¸‰ã€æŠ€æœ¯æ–¹æ¡ˆ](#ä¸‰æŠ€æœ¯æ–¹æ¡ˆ)
- [å››ã€å®æ–½æ­¥éª¤](#å››å®æ–½æ­¥éª¤)
- [äº”ã€æµ‹è¯•éªŒè¯](#äº”æµ‹è¯•éªŒè¯)
- [å…­ã€é£é™©è¯„ä¼°](#å…­é£é™©è¯„ä¼°)

---

## ä¸€ã€é—®é¢˜æ¦‚è¿°

### 1.1 é—®é¢˜æè¿°

å½“å‰å¸–å­ç›¸å…³APIæ¥å£åœ¨è¿”å›æ•°æ®æ—¶ï¼Œ**ä½¿ç”¨ç‰©ç†IDï¼ˆMySQLè‡ªå¢IDï¼‰è€Œéé€»è¾‘IDï¼ˆä¸šåŠ¡IDï¼‰**æ¥è¡¨ç¤ºç”¨æˆ·èº«ä»½ï¼Œå¯¼è‡´ï¼š

1. **æ•°æ®ä¸€è‡´æ€§é—®é¢˜**ï¼šç”¨æˆ·è¡¨ä½¿ç”¨é€»è¾‘IDï¼Œä½†å¸–å­æ•°æ®è¿”å›ç‰©ç†IDï¼Œå‰ç«¯éœ€è¦å¤„ç†ä¸¤ç§IDç±»å‹
2. **å®‰å…¨éšæ‚£**ï¼šæš´éœ²æ•°æ®åº“å†…éƒ¨ç»“æ„å’Œç”¨æˆ·æ•°é‡ä¿¡æ¯
3. **æ‰©å±•æ€§å·®**ï¼šç‰©ç†IDä¸æ”¯æŒåˆ†åº“åˆ†è¡¨ç­‰æ‰©å±•åœºæ™¯

### 1.2 é—®é¢˜ç¤ºä¾‹

**å½“å‰é”™è¯¯è¿”å›ï¼ˆåˆ›å»ºå¸–å­ï¼‰**ï¼š
```json
{
  "success": true,
  "data": {
    "post": {
      "post_id": "POST_2025Q4_ABC123",
      "user_id": 3,  âŒ ç‰©ç†ID (int)
      "title": "ç¾ä¸½é£æ™¯",
      "images": [
        {
          "image_id": "IMG_2025Q4_XYZ789",
          "user_id": 3  âŒ ç‰©ç†ID (int)
        }
      ]
    }
  }
}
```

**æœŸæœ›æ­£ç¡®è¿”å›**ï¼š
```json
{
  "success": true,
  "data": {
    "post": {
      "post_id": "POST_2025Q4_ABC123",
      "user_id": "USR_2025Q4_DEF456",  âœ… é€»è¾‘ID (string)
      "title": "ç¾ä¸½é£æ™¯",
      "images": [
        {
          "image_id": "IMG_2025Q4_XYZ789",
          "user_id": "USR_2025Q4_DEF456"  âœ… é€»è¾‘ID (string)
        }
      ]
    }
  }
}
```

---

## äºŒã€å½±å“èŒƒå›´åˆ†æ

### 2.1 å—å½±å“çš„æ¨¡å‹

| æ¨¡å‹ | æ–‡ä»¶è·¯å¾„ | é—®é¢˜ä»£ç  | å½±å“ç¨‹åº¦ |
|------|---------|---------|---------|
| **Post** | `src/models/post.h`<br>`src/models/post.cpp` | `int userId_`<br>`json["user_id"] = userId_;` | ğŸ”´ é«˜ |
| **Image** | `src/models/image.h`<br>`src/models/image.cpp` | `int userId_`<br>`json["user_id"] = userId_;` | ğŸ”´ é«˜ |

### 2.2 å—å½±å“çš„APIæ¥å£

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è¿”å›å†…å®¹ | å½±å“ |
|------|------|------|---------|------|
| åˆ›å»ºå¸–å­ | POST | `/api/v1/posts` | Postå¯¹è±¡ï¼ˆå«Imagesï¼‰ | ğŸ”´ é«˜ |
| è·å–å¸–å­è¯¦æƒ… | GET | `/api/v1/posts/:post_id` | Postå¯¹è±¡ï¼ˆå«Imagesï¼‰ | ğŸ”´ é«˜ |
| è·å–Feedæµ | GET | `/api/v1/posts` | Postæ•°ç»„ï¼ˆå«Imagesï¼‰ | ğŸ”´ é«˜ |
| è·å–ç”¨æˆ·å¸–å­ | GET | `/api/v1/users/:user_id/posts` | Postæ•°ç»„ï¼ˆå«Imagesï¼‰ | ğŸ”´ é«˜ |

### 2.3 ä¸å—å½±å“çš„æ¥å£

âœ… **ç‚¹èµç›¸å…³æ¥å£**ï¼šåªè¿”å› `{post_id, like_count, has_liked}`ï¼Œä¸è¿”å›Likeå¯¹è±¡  
âœ… **æ”¶è—ç›¸å…³æ¥å£**ï¼šåªè¿”å› `{post_id, favorite_count, has_favorited}`ï¼Œä¸è¿”å›Favoriteå¯¹è±¡  
âœ… **ç”¨æˆ·ç›¸å…³æ¥å£**ï¼šUseræ¨¡å‹å·²æ­£ç¡®ä½¿ç”¨é€»è¾‘ID  
âœ… **å…³æ³¨ç›¸å…³æ¥å£**ï¼šFollow Handleræ‰‹åŠ¨æ„å»ºJSONï¼Œå·²ä½¿ç”¨é€»è¾‘ID  

---

## ä¸‰ã€æŠ€æœ¯æ–¹æ¡ˆ

### 3.1 æ–¹æ¡ˆé€‰å‹

#### æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | æè¿° | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ€§èƒ½ | æ¨èåº¦ |
|------|------|------|------|------|--------|
| **A. æ¨¡å‹æ·»åŠ é€»è¾‘IDå­—æ®µ** | åœ¨Post/Imageæ¨¡å‹ä¸­æ–°å¢`userLogicalId_`å­—æ®µ | âœ… æ•°æ®å®Œæ•´<br>âœ… æ€§èƒ½æœ€ä¼˜<br>âœ… æ˜“ç»´æŠ¤ | âŒ ä¿®æ”¹èŒƒå›´å¤§ | â­â­â­â­â­ | â­â­â­â­â­ |
| B. toJson()åŠ¨æ€æŸ¥è¯¢ | åœ¨toJson()ä¸­æŸ¥è¯¢usersè¡¨ | âœ… æ”¹åŠ¨å° | âŒ N+1æŸ¥è¯¢<br>âŒ æ€§èƒ½å·® | â­ | â­ |
| C. Serviceå±‚æ‰¹é‡è½¬æ¢ | Serviceå±‚ç»Ÿä¸€è½¬æ¢ID | âœ… ä¸æ”¹æ¨¡å‹ | âŒ é€»è¾‘å¤æ‚<br>âŒ ç¼“å­˜ç®¡ç† | â­â­â­ | â­â­â­ |

**âœ… æ¨èæ–¹æ¡ˆAï¼šåœ¨æ¨¡å‹ä¸­æ·»åŠ é€»è¾‘IDå­—æ®µ**

### 3.2 è¯¦ç»†è®¾è®¡

#### 3.2.1 Postæ¨¡å‹æ”¹é€ 

**ä¿®æ”¹æ–‡ä»¶**ï¼š`src/models/post.h` å’Œ `src/models/post.cpp`

**Step 1: æ·»åŠ é€»è¾‘IDå­—æ®µï¼ˆpost.hï¼‰**

```cpp
class Post {
private:
    int id_;                      // ç‰©ç†IDï¼ˆè‡ªå¢ä¸»é”®ï¼‰
    std::string postId_;          // å¸–å­ä¸šåŠ¡ID
    int userId_;                  // ã€ä¿ç•™ã€‘å‘å¸ƒç”¨æˆ·ç‰©ç†IDï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
    std::string userLogicalId_;   // ã€æ–°å¢ã€‘å‘å¸ƒç”¨æˆ·é€»è¾‘IDï¼ˆè¿”å›å‰ç«¯ï¼‰
    // ... å…¶ä»–å­—æ®µ
    
public:
    // Getters
    int getUserId() const { return userId_; }
    const std::string& getUserLogicalId() const { return userLogicalId_; }
    
    // Setters
    void setUserId(int userId) { userId_ = userId; }
    void setUserLogicalId(const std::string& logicalId) { userLogicalId_ = logicalId; }
};
```

**Step 2: ä¿®æ”¹toJson()æ–¹æ³•ï¼ˆpost.cppï¼‰**

```cpp
Json::Value Post::toJson(bool includeImages) const {
    Json::Value json;
    
    json["id"] = id_;
    json["post_id"] = postId_;
    json["user_id"] = userLogicalId_;  // âœ… è¿”å›é€»è¾‘IDï¼ˆåŸï¼šuserId_ï¼‰
    json["title"] = title_;
    json["description"] = description_;
    json["image_count"] = imageCount_;
    // ... å…¶ä»–å­—æ®µ
    
    if (includeImages && !images_.empty()) {
        Json::Value imagesArray(Json::arrayValue);
        for (const auto& image : images_) {
            imagesArray.append(image.toJson());
        }
        json["images"] = imagesArray;
    }
    
    return json;
}
```

**Step 3: ä¿®æ”¹fromJson()æ–¹æ³•ï¼ˆpost.cppï¼‰**

```cpp
Post Post::fromJson(const Json::Value& j) {
    Post post;
    
    if (j.isMember("id") && j["id"].isInt()) {
        post.id_ = j["id"].asInt();
    }
    
    if (j.isMember("post_id") && j["post_id"].isString()) {
        post.postId_ = j["post_id"].asString();
    }
    
    if (j.isMember("user_id")) {
        if (j["user_id"].isInt()) {
            // å…¼å®¹æ—§æ ¼å¼ï¼ˆç‰©ç†IDï¼‰
            post.userId_ = j["user_id"].asInt();
        } else if (j["user_id"].isString()) {
            // æ–°æ ¼å¼ï¼ˆé€»è¾‘IDï¼‰
            post.userLogicalId_ = j["user_id"].asString();
        }
    }
    
    // ... è§£æå…¶ä»–å­—æ®µ
    
    return post;
}
```

#### 3.2.2 Imageæ¨¡å‹æ”¹é€ 

**ä¿®æ”¹æ–‡ä»¶**ï¼š`src/models/image.h` å’Œ `src/models/image.cpp`

**Step 1: æ·»åŠ é€»è¾‘IDå­—æ®µï¼ˆimage.hï¼‰**

```cpp
class Image {
private:
    int id_;                      // ç‰©ç†IDï¼ˆè‡ªå¢ä¸»é”®ï¼‰
    std::string imageId_;         // å›¾ç‰‡ä¸šåŠ¡ID
    int postId_;                  // æ‰€å±å¸–å­ç‰©ç†ID
    int userId_;                  // ã€ä¿ç•™ã€‘ä¸Šä¼ ç”¨æˆ·ç‰©ç†IDï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
    std::string userLogicalId_;   // ã€æ–°å¢ã€‘ä¸Šä¼ ç”¨æˆ·é€»è¾‘IDï¼ˆè¿”å›å‰ç«¯ï¼‰
    // ... å…¶ä»–å­—æ®µ
    
public:
    // Getters
    int getUserId() const { return userId_; }
    const std::string& getUserLogicalId() const { return userLogicalId_; }
    
    // Setters
    void setUserId(int userId) { userId_ = userId; }
    void setUserLogicalId(const std::string& logicalId) { userLogicalId_ = logicalId; }
};
```

**Step 2: ä¿®æ”¹toJson()æ–¹æ³•ï¼ˆimage.cppï¼‰**

```cpp
Json::Value Image::toJson() const {
    Json::Value json;

    json["id"] = id_;
    json["image_id"] = imageId_;
    json["post_id"] = postId_;
    json["display_order"] = displayOrder_;
    json["user_id"] = userLogicalId_;  // âœ… è¿”å›é€»è¾‘IDï¼ˆåŸï¼šuserId_ï¼‰
    
    // ä½¿ç”¨UrlHelperä¸ºå›¾ç‰‡è·¯å¾„æ·»åŠ æœåŠ¡å™¨URLå‰ç¼€
    json["file_url"] = UrlHelper::toFullUrl(fileUrl_);
    json["thumbnail_url"] = UrlHelper::toFullUrl(thumbnailUrl_);
    
    json["file_size"] = static_cast<Json::Int64>(fileSize_);
    json["width"] = width_;
    json["height"] = height_;
    json["mime_type"] = mimeType_;
    json["create_time"] = static_cast<Json::Int64>(createTime_);
    json["update_time"] = static_cast<Json::Int64>(updateTime_);

    return json;
}
```

#### 3.2.3 Repositoryå±‚æ”¹é€ 

**ä¿®æ”¹æ–‡ä»¶**ï¼š`src/database/post_repository.h` å’Œ `src/database/post_repository.cpp`

**æ ¸å¿ƒæ€è·¯**ï¼šåœ¨æŸ¥è¯¢postsè¡¨æ—¶ï¼Œé€šè¿‡JOIN usersè¡¨è·å–ç”¨æˆ·é€»è¾‘ID

**ç¤ºä¾‹1: getPostByPostId() - è·å–å•ä¸ªå¸–å­**

```cpp
std::optional<Post> PostRepository::getPostByPostId(const std::string& postId) {
    ConnectionGuard connGuard(DatabaseConnectionPool::getInstance());
    if (!connGuard.isValid()) {
        Logger::error("è·å–æ•°æ®åº“è¿æ¥å¤±è´¥");
        return std::nullopt;
    }

    MYSQL* conn = connGuard.get();

    // âœ… JOIN usersè¡¨è·å–é€»è¾‘ID
    std::string query = R"(
        SELECT 
            p.id, p.post_id, p.user_id, p.title, p.description,
            p.image_count, p.like_count, p.favorite_count, p.view_count,
            p.status, p.create_time, p.update_time,
            u.user_id AS user_logical_id  -- è·å–é€»è¾‘ID
        FROM posts p
        INNER JOIN users u ON p.user_id = u.id
        WHERE p.post_id = ?
    )";

    MYSQL_STMT* stmt = mysql_stmt_init(conn);
    if (!stmt) {
        Logger::error("mysql_stmt_initå¤±è´¥");
        return std::nullopt;
    }

    if (mysql_stmt_prepare(stmt, query.c_str(), query.length()) != 0) {
        Logger::error("mysql_stmt_prepareå¤±è´¥: " + std::string(mysql_stmt_error(stmt)));
        mysql_stmt_close(stmt);
        return std::nullopt;
    }

    // ç»‘å®šè¾“å…¥å‚æ•°
    MYSQL_BIND bindParams[1];
    memset(bindParams, 0, sizeof(bindParams));

    unsigned long postIdLength = postId.length();
    bindParams[0].buffer_type = MYSQL_TYPE_STRING;
    bindParams[0].buffer = const_cast<char*>(postId.c_str());
    bindParams[0].buffer_length = postId.length();
    bindParams[0].length = &postIdLength;

    if (mysql_stmt_bind_param(stmt, bindParams) != 0) {
        Logger::error("mysql_stmt_bind_paramå¤±è´¥");
        mysql_stmt_close(stmt);
        return std::nullopt;
    }

    if (mysql_stmt_execute(stmt) != 0) {
        Logger::error("mysql_stmt_executeå¤±è´¥");
        mysql_stmt_close(stmt);
        return std::nullopt;
    }

    // ç»‘å®šè¾“å‡ºç»“æœï¼ˆæ–°å¢user_logical_idå­—æ®µï¼‰
    MYSQL_BIND bindResults[13];  // åŸ12ä¸ª + 1ä¸ªuser_logical_id
    memset(bindResults, 0, sizeof(bindResults));

    // ... åŸæœ‰å­—æ®µç»‘å®š ...
    
    // ã€æ–°å¢ã€‘ç»‘å®šuser_logical_id
    char userLogicalId[128] = {0};
    unsigned long userLogicalIdLength;
    my_bool userLogicalIdIsNull;
    
    bindResults[12].buffer_type = MYSQL_TYPE_STRING;
    bindResults[12].buffer = userLogicalId;
    bindResults[12].buffer_length = sizeof(userLogicalId);
    bindResults[12].length = &userLogicalIdLength;
    bindResults[12].is_null = &userLogicalIdIsNull;

    if (mysql_stmt_bind_result(stmt, bindResults) != 0) {
        Logger::error("mysql_stmt_bind_resultå¤±è´¥");
        mysql_stmt_close(stmt);
        return std::nullopt;
    }

    // Fetchç»“æœ
    int fetchResult = mysql_stmt_fetch(stmt);
    
    if (fetchResult == 0) {  // æˆåŠŸè·å–ä¸€è¡Œ
        Post post;
        
        // ... è®¾ç½®åŸæœ‰å­—æ®µ ...
        
        // âœ… è®¾ç½®é€»è¾‘ID
        if (!userLogicalIdIsNull) {
            post.setUserLogicalId(std::string(userLogicalId, userLogicalIdLength));
        }
        
        mysql_stmt_close(stmt);
        
        // åŠ è½½å›¾ç‰‡åˆ—è¡¨
        auto images = getImagesByPostId(post.getId());
        for (const auto& image : images) {
            post.addImage(image);
        }
        
        return post;
    }
    
    mysql_stmt_close(stmt);
    return std::nullopt;
}
```

**ç¤ºä¾‹2: getRecentPosts() - è·å–å¸–å­åˆ—è¡¨**

```cpp
std::vector<Post> PostRepository::getRecentPosts(int limit, int offset) {
    ConnectionGuard connGuard(DatabaseConnectionPool::getInstance());
    std::vector<Post> posts;
    
    if (!connGuard.isValid()) {
        Logger::error("è·å–æ•°æ®åº“è¿æ¥å¤±è´¥");
        return posts;
    }

    MYSQL* conn = connGuard.get();

    // âœ… JOIN usersè¡¨è·å–é€»è¾‘ID
    std::string query = R"(
        SELECT 
            p.id, p.post_id, p.user_id, p.title, p.description,
            p.image_count, p.like_count, p.favorite_count, p.view_count,
            p.status, p.create_time, p.update_time,
            u.user_id AS user_logical_id
        FROM posts p
        INNER JOIN users u ON p.user_id = u.id
        WHERE p.status = 'APPROVED'
        ORDER BY p.create_time DESC
        LIMIT ? OFFSET ?
    )";

    // ... ç±»ä¼¼å¤„ç†ï¼Œç»‘å®šå‚æ•°å’Œç»“æœ ...
    
    while (mysql_stmt_fetch(stmt) == 0) {
        Post post;
        
        // ... è®¾ç½®æ‰€æœ‰å­—æ®µ ...
        
        // âœ… è®¾ç½®é€»è¾‘ID
        if (!userLogicalIdIsNull) {
            post.setUserLogicalId(std::string(userLogicalId, userLogicalIdLength));
        }
        
        posts.push_back(post);
    }
    
    mysql_stmt_close(stmt);
    
    // æ‰¹é‡åŠ è½½å›¾ç‰‡ï¼ˆä¼˜åŒ–æ€§èƒ½ï¼‰
    loadImagesForPosts(posts);
    
    return posts;
}
```

**ç¤ºä¾‹3: getImagesByPostId() - è·å–å›¾ç‰‡åˆ—è¡¨**

```cpp
std::vector<Image> ImageRepository::getImagesByPostId(int postId) {
    ConnectionGuard connGuard(DatabaseConnectionPool::getInstance());
    std::vector<Image> images;
    
    if (!connGuard.isValid()) {
        Logger::error("è·å–æ•°æ®åº“è¿æ¥å¤±è´¥");
        return images;
    }

    MYSQL* conn = connGuard.get();

    // âœ… JOIN usersè¡¨è·å–é€»è¾‘ID
    std::string query = R"(
        SELECT 
            i.id, i.image_id, i.post_id, i.display_order, i.user_id,
            i.file_url, i.thumbnail_url, i.file_size, i.width, i.height,
            i.mime_type, i.create_time, i.update_time,
            u.user_id AS user_logical_id
        FROM images i
        INNER JOIN users u ON i.user_id = u.id
        WHERE i.post_id = ?
        ORDER BY i.display_order ASC
    )";

    // ... ç»‘å®šå‚æ•°å’Œç»“æœï¼Œè®¾ç½®user_logical_id ...
    
    while (mysql_stmt_fetch(stmt) == 0) {
        Image image;
        
        // ... è®¾ç½®æ‰€æœ‰å­—æ®µ ...
        
        // âœ… è®¾ç½®é€»è¾‘ID
        if (!userLogicalIdIsNull) {
            image.setUserLogicalId(std::string(userLogicalId, userLogicalIdLength));
        }
        
        images.push_back(image);
    }
    
    mysql_stmt_close(stmt);
    return images;
}
```

#### 3.2.4 Serviceå±‚è°ƒæ•´

**ä¿®æ”¹æ–‡ä»¶**ï¼š`src/core/post_service.cpp`

**ä¸»è¦å·¥ä½œ**ï¼šç¡®ä¿åˆ›å»ºå¸–å­æ—¶è®¾ç½®æ­£ç¡®çš„é€»è¾‘ID

```cpp
CreatePostResult PostService::createPost(int userId, const std::string& title, 
                                         const std::string& description,
                                         const std::vector<std::string>& imagePaths) {
    CreatePostResult result;
    result.success = false;

    // 1. æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯è·å–é€»è¾‘ID
    auto userRepo = std::make_unique<UserRepository>();
    auto userOpt = userRepo->findById(userId);
    
    if (!userOpt.has_value()) {
        result.message = "ç”¨æˆ·ä¸å­˜åœ¨";
        return result;
    }
    
    std::string userLogicalId = userOpt->getUserId();  // è·å–é€»è¾‘ID

    // 2. åˆ›å»ºPostå¯¹è±¡
    Post post;
    post.setUserId(userId);  // ç‰©ç†IDï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
    post.setUserLogicalId(userLogicalId);  // âœ… é€»è¾‘IDï¼ˆè¿”å›å‰ç«¯ï¼‰
    post.setTitle(title);
    post.setDescription(description);
    // ... è®¾ç½®å…¶ä»–å­—æ®µ
    
    // 3. ä¿å­˜åˆ°æ•°æ®åº“
    int postPhysicalId = postRepo_->createPost(post);
    
    // 4. å¤„ç†å›¾ç‰‡ä¸Šä¼ 
    for (size_t i = 0; i < imagePaths.size(); i++) {
        Image image;
        image.setPostId(postPhysicalId);
        image.setUserId(userId);  // ç‰©ç†IDï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
        image.setUserLogicalId(userLogicalId);  // âœ… é€»è¾‘IDï¼ˆè¿”å›å‰ç«¯ï¼‰
        image.setDisplayOrder(i);
        image.setFileUrl(imagePaths[i]);
        // ... è®¾ç½®å…¶ä»–å­—æ®µ
        
        imageRepo_->createImage(image);
    }
    
    // 5. è¿”å›å®Œæ•´çš„Postå¯¹è±¡ï¼ˆåŒ…å«é€»è¾‘IDï¼‰
    result.success = true;
    result.post = post;
    result.message = "å¸–å­åˆ›å»ºæˆåŠŸ";
    
    return result;
}
```

---

## å››ã€å®æ–½æ­¥éª¤

### 4.1 åˆ†é˜¶æ®µå®æ–½è®¡åˆ’

#### é˜¶æ®µä¸€ï¼šæ¨¡å‹å±‚æ”¹é€ ï¼ˆ2å°æ—¶ï¼‰

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] ä¿®æ”¹ `src/models/post.h`ï¼šæ·»åŠ  `userLogicalId_` å­—æ®µ
- [ ] ä¿®æ”¹ `src/models/post.cpp`ï¼š
  - [ ] æ›´æ–° `toJson()` æ–¹æ³•
  - [ ] æ›´æ–° `fromJson()` æ–¹æ³•ï¼ˆå…¼å®¹æ—§æ ¼å¼ï¼‰
  - [ ] æ·»åŠ  getter/setter
- [ ] ä¿®æ”¹ `src/models/image.h`ï¼šæ·»åŠ  `userLogicalId_` å­—æ®µ
- [ ] ä¿®æ”¹ `src/models/image.cpp`ï¼š
  - [ ] æ›´æ–° `toJson()` æ–¹æ³•
  - [ ] æ›´æ–° `fromJson()` æ–¹æ³•ï¼ˆå…¼å®¹æ—§æ ¼å¼ï¼‰
  - [ ] æ·»åŠ  getter/setter

**éªŒè¯æ–¹å¼**ï¼šç¼–è¯‘é€šè¿‡ï¼Œæ— è¯­æ³•é”™è¯¯

```bash
cd backend-service
rm -rf build && mkdir build && cd build
cmake .. && make -j4
```

---

#### é˜¶æ®µäºŒï¼šRepositoryå±‚æ”¹é€ ï¼ˆ4å°æ—¶ï¼‰

**ä»»åŠ¡æ¸…å•**ï¼š

**PostRepository**ï¼š
- [ ] ä¿®æ”¹ `getPostByPostId()`ï¼šJOIN usersè¡¨è·å–é€»è¾‘ID
- [ ] ä¿®æ”¹ `getRecentPosts()`ï¼šJOIN usersè¡¨è·å–é€»è¾‘ID
- [ ] ä¿®æ”¹ `getUserPosts()`ï¼šJOIN usersè¡¨è·å–é€»è¾‘ID
- [ ] ä¿®æ”¹ `getPostsByIds()`ï¼šJOIN usersè¡¨è·å–é€»è¾‘IDï¼ˆæ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–ï¼‰

**ImageRepository**ï¼š
- [ ] ä¿®æ”¹ `getImagesByPostId()`ï¼šJOIN usersè¡¨è·å–é€»è¾‘ID
- [ ] ä¿®æ”¹ `getImageById()`ï¼šJOIN usersè¡¨è·å–é€»è¾‘ID
- [ ] ä¿®æ”¹ `getImagesByPostIds()`ï¼šJOIN usersè¡¨è·å–é€»è¾‘IDï¼ˆæ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–ï¼‰

**SQLæŸ¥è¯¢ä¼˜åŒ–**ï¼š
```sql
-- å•å¸–å­æŸ¥è¯¢ï¼ˆæ·»åŠ LEFT JOINï¼‰
SELECT 
    p.*, 
    u.user_id AS user_logical_id
FROM posts p
LEFT JOIN users u ON p.user_id = u.id
WHERE p.post_id = ?

-- æ‰¹é‡å¸–å­æŸ¥è¯¢ï¼ˆæ·»åŠ LEFT JOINï¼‰
SELECT 
    p.*, 
    u.user_id AS user_logical_id
FROM posts p
LEFT JOIN users u ON p.user_id = u.id
WHERE p.status = 'APPROVED'
ORDER BY p.create_time DESC
LIMIT ? OFFSET ?

-- å›¾ç‰‡æŸ¥è¯¢ï¼ˆæ·»åŠ LEFT JOINï¼‰
SELECT 
    i.*, 
    u.user_id AS user_logical_id
FROM images i
LEFT JOIN users u ON i.user_id = u.id
WHERE i.post_id = ?
ORDER BY i.display_order ASC
```

**éªŒè¯æ–¹å¼**ï¼š
```bash
# ç¼–è¯‘é€šè¿‡
make -j4

# è¿è¡ŒæœåŠ¡
./build/knot_image_sharing config/config.json

# æŸ¥çœ‹æ—¥å¿—
tail -f logs/auth-service.log
```

---

#### é˜¶æ®µä¸‰ï¼šServiceå±‚è°ƒæ•´ï¼ˆ2å°æ—¶ï¼‰

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] ä¿®æ”¹ `PostService::createPost()`ï¼š
  - [ ] æŸ¥è¯¢ç”¨æˆ·é€»è¾‘ID
  - [ ] è®¾ç½®Postå’ŒImageçš„é€»è¾‘ID
- [ ] ä¿®æ”¹ `PostService::updatePost()`ï¼š
  - [ ] ç¡®ä¿é€»è¾‘IDæ­£ç¡®ä¼ é€’
- [ ] ä¿®æ”¹ `ImageService::addImageToPost()`ï¼š
  - [ ] æŸ¥è¯¢ç”¨æˆ·é€»è¾‘ID
  - [ ] è®¾ç½®Imageçš„é€»è¾‘ID

**å…³é”®ä»£ç **ï¼š
```cpp
// è·å–ç”¨æˆ·é€»è¾‘ID
auto userRepo = std::make_unique<UserRepository>();
auto userOpt = userRepo->findById(userId);
std::string userLogicalId = userOpt->getUserId();

// è®¾ç½®åˆ°Postå¯¹è±¡
post.setUserLogicalId(userLogicalId);

// è®¾ç½®åˆ°Imageå¯¹è±¡
image.setUserLogicalId(userLogicalId);
```

**éªŒè¯æ–¹å¼**ï¼šå•å…ƒæµ‹è¯•é€šè¿‡

---

#### é˜¶æ®µå››ï¼šAPIå±‚éªŒè¯ï¼ˆ1å°æ—¶ï¼‰

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] éªŒè¯ `POST /api/v1/posts`ï¼šåˆ›å»ºå¸–å­è¿”å›é€»è¾‘ID
- [ ] éªŒè¯ `GET /api/v1/posts/:post_id`ï¼šå¸–å­è¯¦æƒ…è¿”å›é€»è¾‘ID
- [ ] éªŒè¯ `GET /api/v1/posts`ï¼šFeedæµè¿”å›é€»è¾‘ID
- [ ] éªŒè¯ `GET /api/v1/users/:user_id/posts`ï¼šç”¨æˆ·å¸–å­è¿”å›é€»è¾‘ID

**éªŒè¯å‘½ä»¤**ï¼š
```bash
# 1. åˆ›å»ºå¸–å­
curl -X POST http://localhost:8080/api/v1/posts \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: multipart/form-data" \
  -F "title=æµ‹è¯•å¸–å­" \
  -F "description=æµ‹è¯•æè¿°" \
  -F "images=@test.jpg"

# æ£€æŸ¥è¿”å›çš„user_idæ˜¯å¦ä¸ºé€»è¾‘IDï¼ˆstringç±»å‹ï¼‰
# æœŸæœ›ï¼š{ "user_id": "USR_2025Q4_XXX", ... }

# 2. è·å–å¸–å­è¯¦æƒ…
curl http://localhost:8080/api/v1/posts/POST_2025Q4_XXX

# 3. è·å–Feedæµ
curl http://localhost:8080/api/v1/posts

# 4. è·å–ç”¨æˆ·å¸–å­
curl http://localhost:8080/api/v1/users/USR_2025Q4_XXX/posts
```

---

### 4.2 ç¼–è¯‘å’Œéƒ¨ç½²

```bash
# 1. æ¸…ç†æ—§æ„å»º
cd /home/kun/projects/SharePix/backend-service
rm -rf build

# 2. é‡æ–°ç¼–è¯‘
mkdir build && cd build
cmake ..
make -j4

# 3. åœæ­¢æ—§æœåŠ¡
pkill knot_image_sharing

# 4. å¯åŠ¨æ–°æœåŠ¡
nohup ./knot_image_sharing ../config/config.json > ../logs/server.log 2>&1 &

# 5. æŸ¥çœ‹æ—¥å¿—
tail -f ../logs/auth-service.log
```

---

## äº”ã€æµ‹è¯•éªŒè¯

### 5.1 å•å…ƒæµ‹è¯•

#### æµ‹è¯•1ï¼šPostæ¨¡å‹toJson()

```cpp
// test/test_post_model.cpp
void testPostToJson() {
    Post post;
    post.setPostId("POST_2025Q4_ABC123");
    post.setUserId(3);  // ç‰©ç†ID
    post.setUserLogicalId("USR_2025Q4_DEF456");  // é€»è¾‘ID
    post.setTitle("æµ‹è¯•å¸–å­");
    
    Json::Value json = post.toJson();
    
    // éªŒè¯è¿”å›é€»è¾‘ID
    assert(json["user_id"].isString());
    assert(json["user_id"].asString() == "USR_2025Q4_DEF456");
    
    std::cout << "âœ… Post toJson() æµ‹è¯•é€šè¿‡" << std::endl;
}
```

#### æµ‹è¯•2ï¼šImageæ¨¡å‹toJson()

```cpp
// test/test_image_model.cpp
void testImageToJson() {
    Image image;
    image.setImageId("IMG_2025Q4_XYZ789");
    image.setUserId(3);  // ç‰©ç†ID
    image.setUserLogicalId("USR_2025Q4_DEF456");  // é€»è¾‘ID
    
    Json::Value json = image.toJson();
    
    // éªŒè¯è¿”å›é€»è¾‘ID
    assert(json["user_id"].isString());
    assert(json["user_id"].asString() == "USR_2025Q4_DEF456");
    
    std::cout << "âœ… Image toJson() æµ‹è¯•é€šè¿‡" << std::endl;
}
```

### 5.2 é›†æˆæµ‹è¯•

#### æµ‹è¯•åœºæ™¯1ï¼šåˆ›å»ºå¸–å­

```bash
# 1. ç™»å½•è·å–token
TOKEN=$(curl -s -X POST http://localhost:8080/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser","password":"password123"}' \
  | jq -r '.data.access_token')

# 2. åˆ›å»ºå¸–å­
curl -X POST http://localhost:8080/api/v1/posts \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: multipart/form-data" \
  -F "title=æµ‹è¯•é€»è¾‘ID" \
  -F "description=éªŒè¯user_idè¿”å›é€»è¾‘ID" \
  -F "images=@test.jpg" \
  | jq .

# æœŸæœ›è¾“å‡ºï¼š
# {
#   "success": true,
#   "data": {
#     "post": {
#       "user_id": "USR_2025Q4_XXX",  âœ… stringç±»å‹
#       "post_id": "POST_2025Q4_YYY",
#       "images": [
#         {
#           "user_id": "USR_2025Q4_XXX",  âœ… stringç±»å‹
#           "image_id": "IMG_2025Q4_ZZZ"
#         }
#       ]
#     }
#   }
# }
```

#### æµ‹è¯•åœºæ™¯2ï¼šè·å–Feedæµ

```bash
# è·å–æœ€æ–°å¸–å­åˆ—è¡¨
curl http://localhost:8080/api/v1/posts?page=1&page_size=10 | jq .

# éªŒè¯æ¯ä¸ªå¸–å­çš„user_idéƒ½æ˜¯stringç±»å‹çš„é€»è¾‘ID
# æœŸæœ›ï¼šæ‰€æœ‰user_idæ ¼å¼ä¸º "USR_YYYY_XXXX"
```

#### æµ‹è¯•åœºæ™¯3ï¼šè·å–å¸–å­è¯¦æƒ…

```bash
# è·å–å¸–å­è¯¦æƒ…
curl http://localhost:8080/api/v1/posts/POST_2025Q4_XXX | jq .

# éªŒè¯è¿”å›çš„user_idå’Œimagesä¸­çš„user_idéƒ½æ˜¯é€»è¾‘ID
```

### 5.3 æ€§èƒ½æµ‹è¯•

```bash
# ä½¿ç”¨abå·¥å…·è¿›è¡Œå¹¶å‘æµ‹è¯•
ab -n 100 -c 10 -H "Authorization: Bearer YOUR_TOKEN" \
   http://localhost:8080/api/v1/posts

# æœŸæœ›ï¼š
# - å“åº”æ—¶é—´ < 100ms
# - æˆåŠŸç‡ 100%
# - æ— å†…å­˜æ³„æ¼
```

### 5.4 å›å½’æµ‹è¯•æ¸…å•

- [ ] åˆ›å»ºå¸–å­ï¼šè¿”å›é€»è¾‘ID
- [ ] è·å–å¸–å­è¯¦æƒ…ï¼šè¿”å›é€»è¾‘ID
- [ ] è·å–Feedæµï¼šæ‰€æœ‰å¸–å­è¿”å›é€»è¾‘ID
- [ ] è·å–ç”¨æˆ·å¸–å­ï¼šæ‰€æœ‰å¸–å­è¿”å›é€»è¾‘ID
- [ ] æ·»åŠ å›¾ç‰‡åˆ°å¸–å­ï¼šå›¾ç‰‡è¿”å›é€»è¾‘ID
- [ ] ç‚¹èµåŠŸèƒ½ï¼šä¸å—å½±å“ï¼ˆä»æ­£å¸¸å·¥ä½œï¼‰
- [ ] æ”¶è—åŠŸèƒ½ï¼šä¸å—å½±å“ï¼ˆä»æ­£å¸¸å·¥ä½œï¼‰
- [ ] ç”¨æˆ·ä¿¡æ¯ï¼šä¸å—å½±å“ï¼ˆå·²ä½¿ç”¨é€»è¾‘IDï¼‰

---

## å…­ã€é£é™©è¯„ä¼°

### 6.1 æŠ€æœ¯é£é™©

| é£é™© | ç­‰çº§ | å½±å“ | åº”å¯¹æªæ–½ |
|------|------|------|---------|
| JOINæŸ¥è¯¢æ€§èƒ½ä¸‹é™ | ğŸŸ¡ ä¸­ | æŸ¥è¯¢é€Ÿåº¦å¯èƒ½ç•¥æ…¢ | 1. ç¡®ä¿users.idæœ‰ç´¢å¼•<br>2. ä½¿ç”¨EXPLAINåˆ†ææŸ¥è¯¢è®¡åˆ’<br>3. å¿…è¦æ—¶æ·»åŠ è¦†ç›–ç´¢å¼• |
| æ—§æ•°æ®è¿ç§»é—®é¢˜ | ğŸŸ¢ ä½ | å·²æœ‰å¸–å­å¯èƒ½ç¼ºå°‘é€»è¾‘ID | 1. RepositoryæŸ¥è¯¢å·²ä½¿ç”¨LEFT JOINï¼ˆå…è®¸NULLï¼‰<br>2. Modelé»˜è®¤å€¼è®¾ä¸ºç©ºå­—ç¬¦ä¸² |
| å†…å­˜å ç”¨å¢åŠ  | ğŸŸ¢ ä½ | æ¯ä¸ªPost/Imageå¢åŠ ~32å­—èŠ‚ | 1. å½±å“å¯å¿½ç•¥ï¼ˆå­—ç¬¦ä¸²å­—æ®µï¼‰<br>2. ç°ä»£æœåŠ¡å™¨å®Œå…¨å¯æ‰¿å— |

### 6.2 å…¼å®¹æ€§é£é™©

| é£é™© | ç­‰çº§ | å½±å“ | åº”å¯¹æªæ–½ |
|------|------|------|---------|
| å‰ç«¯éœ€è¦åŒæ­¥ä¿®æ”¹ | ğŸ”´ é«˜ | user_idä»intå˜ä¸ºstring | 1. æå‰é€šçŸ¥å‰ç«¯å›¢é˜Ÿ<br>2. æä¾›APIå˜æ›´æ–‡æ¡£<br>3. åè°ƒå‘å¸ƒæ—¶é—´ |
| æ—§ç‰ˆæœ¬å®¢æˆ·ç«¯ä¸å…¼å®¹ | ğŸŸ¡ ä¸­ | æ—§Appå¯èƒ½è§£æå¤±è´¥ | 1. ä¿ç•™idå­—æ®µï¼ˆç‰©ç†IDï¼‰ç”¨äºè°ƒè¯•<br>2. è€ƒè™‘ç‰ˆæœ¬å…¼å®¹ç­–ç•¥ |
| ç¬¬ä¸‰æ–¹é›†æˆå½±å“ | ğŸŸ¢ ä½ | å¦‚æœæœ‰ç¬¬ä¸‰æ–¹è°ƒç”¨API | 1. æ£€æŸ¥æ˜¯å¦æœ‰ç¬¬ä¸‰æ–¹è°ƒç”¨<br>2. æå‰é€šçŸ¥å¹¶æä¾›è¿ç§»æ–‡æ¡£ |

### 6.3 å›æ»šæ–¹æ¡ˆ

**å¦‚æœå‡ºç°ä¸¥é‡é—®é¢˜ï¼Œå›æ»šæ­¥éª¤**ï¼š

```bash
# 1. åœæ­¢æ–°æœåŠ¡
pkill knot_image_sharing

# 2. æ¢å¤æ—§ç‰ˆæœ¬ä»£ç 
cd /home/kun/projects/SharePix/backend-service
git checkout <ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬çš„commit>

# 3. é‡æ–°ç¼–è¯‘
rm -rf build && mkdir build && cd build
cmake .. && make -j4

# 4. å¯åŠ¨æ—§æœåŠ¡
nohup ./knot_image_sharing ../config/config.json > ../logs/server.log 2>&1 &

# 5. éªŒè¯æœåŠ¡æ­£å¸¸
curl http://localhost:8080/api/v1/posts
```

**æ•°æ®åº“æ— éœ€å›æ»š**ï¼ˆæ–°å¢å­—æ®µä¸å½±å“æ—§é€»è¾‘ï¼ŒLEFT JOINå…è®¸NULLï¼‰

---

## ä¸ƒã€æ—¶é—´ä¼°ç®—

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ |
|------|------|---------|
| 1 | æ¨¡å‹å±‚æ”¹é€  | 2å°æ—¶ |
| 2 | Repositoryå±‚æ”¹é€  | 4å°æ—¶ |
| 3 | Serviceå±‚è°ƒæ•´ | 2å°æ—¶ |
| 4 | APIå±‚éªŒè¯ | 1å°æ—¶ |
| 5 | å•å…ƒæµ‹è¯• | 2å°æ—¶ |
| 6 | é›†æˆæµ‹è¯• | 2å°æ—¶ |
| 7 | æ–‡æ¡£æ›´æ–° | 1å°æ—¶ |
| **æ€»è®¡** | **å…¨éƒ¨å®Œæˆ** | **14å°æ—¶ï¼ˆçº¦2ä¸ªå·¥ä½œæ—¥ï¼‰** |

---

## å…«ã€æ£€æŸ¥æ¸…å•

### 8.1 å¼€å‘å‰æ£€æŸ¥

- [ ] å·²å¤‡ä»½å½“å‰ä»£ç ï¼ˆgit commitï¼‰
- [ ] å·²é€šçŸ¥å‰ç«¯å›¢é˜ŸAPIå˜æ›´
- [ ] å·²å‡†å¤‡æµ‹è¯•ç¯å¢ƒå’Œæ•°æ®
- [ ] å·²ç¡®è®¤æ•°æ®åº“ç´¢å¼•å­˜åœ¨ï¼ˆusers.idï¼‰

### 8.2 å¼€å‘ä¸­æ£€æŸ¥

- [ ] æ‰€æœ‰ä¿®æ”¹çš„æ–‡ä»¶å·²ç¼–è¯‘é€šè¿‡
- [ ] å•å…ƒæµ‹è¯•å·²é€šè¿‡
- [ ] ä»£ç å·²è¿›è¡ŒCode Review
- [ ] æ—¥å¿—è®°å½•å®Œæ•´ï¼ˆDEBUGçº§åˆ«ï¼‰

### 8.3 å‘å¸ƒå‰æ£€æŸ¥

- [ ] é›†æˆæµ‹è¯•å…¨éƒ¨é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•è¾¾æ ‡
- [ ] APIæ–‡æ¡£å·²æ›´æ–°
- [ ] å›æ»šæ–¹æ¡ˆå·²éªŒè¯
- [ ] å‰ç«¯å·²å‡†å¤‡å¥½åŒæ­¥å‘å¸ƒ

---

## ä¹ã€å‚è€ƒèµ„æ–™

### 9.1 ç›¸å…³æ–‡æ¡£

- `[001]æ•°æ®åº“è®¾è®¡æ–‡æ¡£.md` - æ•°æ®åº“è¡¨ç»“æ„
- `[002]é¡¹ç›®æ¶æ„æ–‡æ¡£.md` - ä¹å±‚æ¶æ„è®¾è®¡
- `[000]APIæ–‡æ¡£.md` - APIæ¥å£è§„èŒƒ
- `[110]Feedæµç”¨æˆ·çŠ¶æ€æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–æ–¹æ¡ˆ.md` - ç±»ä¼¼çš„JOINæŸ¥è¯¢ä¼˜åŒ–

### 9.2 å…³é”®ä»£ç ä½ç½®

**æ¨¡å‹å±‚**ï¼š
- `src/models/post.h` å’Œ `src/models/post.cpp`
- `src/models/image.h` å’Œ `src/models/image.cpp`

**Repositoryå±‚**ï¼š
- `src/database/post_repository.h` å’Œ `src/database/post_repository.cpp`
- `src/database/image_repository.h` å’Œ `src/database/image_repository.cpp`

**Serviceå±‚**ï¼š
- `src/core/post_service.h` å’Œ `src/core/post_service.cpp`
- `src/core/image_service.h` å’Œ `src/core/image_service.cpp`

**APIå±‚**ï¼š
- `src/api/post_handler.h` å’Œ `src/api/post_handler.cpp`

---

## åã€æ€»ç»“

### 10.1 æ”¹é€ æ”¶ç›Š

âœ… **æ•°æ®ä¸€è‡´æ€§**ï¼šæ‰€æœ‰APIè¿”å›ç»Ÿä¸€çš„é€»è¾‘ID  
âœ… **å®‰å…¨æ€§**ï¼šä¸æš´éœ²æ•°æ®åº“å†…éƒ¨ç»“æ„  
âœ… **æ‰©å±•æ€§**ï¼šæ”¯æŒåˆ†åº“åˆ†è¡¨ç­‰æ‰©å±•åœºæ™¯  
âœ… **å¯ç»´æŠ¤æ€§**ï¼šä»£ç é€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç†è§£  

### 10.2 å®æ–½å»ºè®®

1. **ä¼˜å…ˆçº§é«˜**ï¼šå½±å“å‰ç«¯äº¤äº’ï¼Œå»ºè®®å°½å¿«å®æ–½
2. **åˆ†é˜¶æ®µå®æ–½**ï¼šæŒ‰æ¨¡å‹â†’Repositoryâ†’Serviceâ†’APIçš„é¡ºåºè¿›è¡Œ
3. **å……åˆ†æµ‹è¯•**ï¼šæ¯ä¸ªé˜¶æ®µå®Œæˆåè¿›è¡ŒéªŒè¯
4. **ååŒå‘å¸ƒ**ï¼šä¸å‰ç«¯å›¢é˜Ÿåè°ƒå‘å¸ƒæ—¶é—´

### 10.3 åç»­ä¼˜åŒ–

- [ ] è€ƒè™‘æ·»åŠ ç¼“å­˜ï¼ˆé€»è¾‘IDåˆ°ç‰©ç†IDçš„æ˜ å°„ï¼‰
- [ ] ç›‘æ§JOINæŸ¥è¯¢æ€§èƒ½ï¼Œå¿…è¦æ—¶ä¼˜åŒ–ç´¢å¼•
- [ ] è¯„ä¼°æ˜¯å¦éœ€è¦åå‘æ˜ å°„ï¼ˆé€»è¾‘IDâ†’ç‰©ç†IDæŸ¥è¯¢ï¼‰

---

**æ–‡æ¡£çŠ¶æ€**: âœ… å¾…å®¡æ‰¹  
**ä¸‹ä¸€æ­¥**: ç­‰å¾…å®¡æ‰¹é€šè¿‡åå¼€å§‹å®æ–½

---

